/**
 * Copyright © 2024 UC Regents and ALEKS Corporation
 * ALEKS® is a registered trademark of ALEKS Corporation.
**/
this.aleks=this.aleks||{},aleks.core=aleks.core||{},aleks.core.ui=aleks.core.ui||{},aleks.core.ui.SMALL_WIDTH=320,aleks.core.ui.MEDIUM_WIDTH=480,aleks.core.ui.LARGE_WIDTH=768,function(){(function(){var _protectedKey={},_getOwnerEvent=function(domEvent){return domEvent.__event_ownerEvent||null},_setOwnerEvent=function(domEvent,ownerEvent){domEvent.__event_ownerEvent=ownerEvent},_updateEvent=function(currentTarget){this.__event_defaultPrevented="defaultPrevented"in event?event.defaultPrevented:!1==event.returnValue,this.__event_eventPhase="eventPhase"in event?event.eventPhase:0,this.__event_currentTarget="currentTarget"in event?event.currentTarget:currentTarget,this.__event_type=event.type,this.__event_bubbles=event.bubbles,this.__event_cancelable=event.cancelable,this.__event_timeStamp="timeStamp"in event?event.timeStamp:0},_supportsEventInterface=function(){return global.Event&&global.Event.prototype&&global.Event.prototype.constructor},_getDOMEvent=function(){return!this.__event_event&&_supportsEventInterface()&&(this instanceof aleks.core.ui.CustomEvent?global.CustomEvent&&"function"==typeof global.CustomEvent?this.__event_event=new global.CustomEvent(this.getType(),{bubbles:this.getBubbles(),cancelable:this.getCancelable(),detail:this.getDetail()}):(this.__event_event=global.document.createEvent("CustomEvent"),this.__event_event.initCustomEvent(this.getType(),this.getBubbles(),this.getCancelable(),this.getDetail())):global.Event&&"function"==typeof global.Event?this.__event_event=new global.Event(this.getType(),{bubbles:this.getBubbles(),cancelable:this.getCancelable()}):(this.__event_event=global.document.createEvent("Event"),this.__event_event.initEvent(this.getType(),this.getBubbles(),this.getCancelable()))),this.__event_event};aleks.core.ui.Event=function(type,eventInitDict){this.__event_type=type+"",this.__event_bubbles=!!eventInitDict.bubbles,this.__event_cancelable=!!eventInitDict.cancelable,this.__event_propagation=eventInitDict.propagation===aleks.core.ui.Event.DOM_PROPAGATION?aleks.core.ui.Event.DOM_PROPAGATION:aleks.core.ui.Event.NO_PROPAGATION,this.__event_timeStamp=new Date().getTime(),this.__event_stopPropagationFlag=!1,this.__event_stopImmediatePropagationFlag=!1,this.__event_canceledFlag=!1,this.__event_initializedFlag=!0,this.__event_dispatchFlag=!1,this.__event_eventPhase=aleks.core.ui.Event.NONE,this.__event_currentTarget=null,this.__event_target=null,this.__event_event=null},aleks.core.ui.Event.prototype.getType=function(){return this.__event_type},aleks.core.ui.Event.prototype.getBubbles=function(){return this.__event_bubbles},aleks.core.ui.Event.prototype.getCancelable=function(){return this.__event_cancelable},aleks.core.ui.Event.prototype.getPropagation=function(){return this.__event_propagation},aleks.core.ui.Event.prototype.getDefaultPrevented=function(){return this.__event_propagation===aleks.core.ui.Event.DOM_PROPAGATION&&this.__event_event&&this.__event_cancelable&&!this.__event_canceledFlag&&(this.__event_canceledFlag="defaultPrevented"in this.__event_event?!!this.__event_event.defaultPrevented:!1==this.__event_event.returnValue),this.__event_canceledFlag},aleks.core.ui.Event.prototype.preventDefault=function(){this.__event_cancelable&&!this.__event_canceledFlag&&(this.__event_canceledFlag=!0,this.__event_propagation===aleks.core.ui.Event.DOM_PROPAGATION&&this.__event_event&&this.__event_event.preventDefault())},aleks.core.ui.Event.prototype.getTimeStamp=function(){return this.__event_timeStamp},aleks.core.ui.Event.prototype.getCurrentTarget=function(){return this.__event_currentTarget};var _setCurrentTarget=function(currentTarget){this.__event_currentTarget=currentTarget};aleks.core.ui.Event.prototype.getTarget=function(){return this.__event_target};var _setTarget=function(target){this.__event_target=target};aleks.core.ui.Event.prototype.getEventPhase=function(){if(this.__event_propagation===aleks.core.ui.Event.DOM_PROPAGATION){var domEvent=_getDOMEvent.call(this);this.__event_eventPhase=domEvent.eventPhase}return this.__event_eventPhase},aleks.core.ui.Event.fromEvent=function(event){if(event instanceof aleks.core.ui.Event)return event;if(dom.Event.isEvent(event)){var ownerEvent=_getOwnerEvent(event);if(ownerEvent)return ownerEvent;var uiEvent=new aleks.core.ui.Event(event);return _setOwnerEvent(event,uiEvent),uiEvent}return null},aleks.core.ui.Event.NONE=0,aleks.core.ui.Event.CAPTURING_PHASE=1,aleks.core.ui.Event.AT_TARGET=2,aleks.core.ui.Event.BUBBLING_PHASE=3,aleks.core.ui.Event.NO_PROPAGATION=0,aleks.core.ui.Event.DOM_PROPAGATION=1,aleks.core.ui.CustomEvent=function(type,eventInitDict){this._super(type,eventInitDict),this.__customevent_detail="detail"in eventInitDict?eventInitDict.detail:null},aleks.extend(aleks.core.ui.CustomEvent,aleks.core.ui.Event),aleks.core.ui.CustomEvent.prototype.getDetail=function(){return this.__customevent_detail}})(),function(){var _protectedKey={};aleks.core.ui.EventListenerReference=function(){throw new TypeError("Illegal constructor")},aleks.core.ui.CustomEventListenerReference=function(eventName,listener){if(arguments[arguments.length-1]===_protectedKey)this._eventName=eventName,this._listener=listener;else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.CustomEventListenerReference,aleks.core.ui.EventListenerReference),aleks.core.ui.CustomEventListenerReference.prototype.getEventName=function(){return this._eventName},aleks.core.ui.DOMEventListenerReference=function(eventName,domEventListenerReference){if(arguments[arguments.length-1]===_protectedKey)this._eventName=eventName,this._domEventListenerReference=domEventListenerReference;else throw new TypeError("Illegal constructor")},aleks.core.ui.EventTarget=function(){this.__aet_eventTarget=null,this.__aet_eventTargetEventManager=null,this.__aet_eventTargetCustomEventListeners={}};var _buildListenerWrapper=function(listener,targetObject){var listenerWrapper;if("function"==typeof listener){var thisObject=targetObject||this;listenerWrapper=function(event){try{listener.call(thisObject,event)}catch(e){aleks.isLogOnLan&&console.error(e.stack),console.error(e)}}}else if(targetObject&&targetObject[listener])listenerWrapper=function(event){targetObject[listener](event)};else throw new Error(listener+" is supposed to be a method of the object "+targetObject);return listenerWrapper},_addEventListener=function(isLegacy,eventName,listener,targetObject,options){if(eventName&&"string"==typeof eventName.valueOf()){var hasCustomDispatchForEvent="undefined"!=typeof this.__aet_eventTargetCustomEventListeners[eventName];if(!this.__aet_eventTarget||hasCustomDispatchForEvent){!hasCustomDispatchForEvent&&this._handleEvents(eventName);var listenerRef=_buildListenerWrapper.call(this,listener,targetObject);return this.__aet_eventTargetCustomEventListeners[eventName].push(listenerRef),new aleks.core.ui.CustomEventListenerReference(eventName,listenerRef,_protectedKey)}return this.__aet_eventTarget instanceof aleks.core.ui.EventTarget?isLegacy?this.__aet_eventTarget.addLegacyEventListener(eventName,listener,targetObject):this.__aet_eventTarget.addEventListener(eventName,listener,targetObject,options):isLegacy?new aleks.core.ui.DOMEventListenerReference(eventName,this.__aet_eventTargetEventManager.addLegacyEventListener(this.__aet_eventTarget,eventName,listener,targetObject||this),_protectedKey):new aleks.core.ui.DOMEventListenerReference(eventName,this.__aet_eventTargetEventManager.addEventListener(this.__aet_eventTarget,eventName,listener,targetObject||this,options),_protectedKey)}};aleks.core.ui.EventTarget.prototype._setEventTarget=function(eventTarget){this.__aet_eventTarget=eventTarget,this.__aet_eventTargetEventManager=this.__aet_eventTarget instanceof aleks.core.ui.EventTarget?null:new dom.EventManager},aleks.core.ui.EventTarget.prototype.getEventManager=function(){return this.__aet_eventTargetEventManager},aleks.core.ui.EventTarget.prototype._handleEvents=function(types){for(var currentEventType,listEventTypes="string"==typeof types.valueOf()?arguments:types,i=0;i<listEventTypes.length;i++)currentEventType=listEventTypes[i],"undefined"==typeof this.__aet_eventTargetCustomEventListeners[currentEventType]&&(this.__aet_eventTargetCustomEventListeners[currentEventType]=[])},aleks.core.ui.EventTarget.prototype.addEventListener=function(eventName,listener,targetObject,options){return _addEventListener.call(this,!1,eventName,listener,targetObject,options)},aleks.core.ui.EventTarget.prototype.addLegacyEventListener=function(eventName,listener,targetObject){return _addEventListener.call(this,!0,eventName,listener,targetObject)},aleks.core.ui.EventTarget.prototype.removeEventListener=function(eventListenerRef){if(eventListenerRef instanceof aleks.core.ui.CustomEventListenerReference){var customDispatchForEvent=this.__aet_eventTargetCustomEventListeners[eventListenerRef._eventName],hasCustomDispatchForEvent="undefined"!=typeof customDispatchForEvent;if(hasCustomDispatchForEvent)for(var nbListeners=customDispatchForEvent.length,i=0;i<nbListeners;i++)if(customDispatchForEvent[i]===eventListenerRef._listener)return void customDispatchForEvent.splice(i,1)}this.__aet_eventTarget instanceof aleks.core.ui.EventTarget?this.__aet_eventTarget.removeEventListener(eventListenerRef):this.__aet_eventTargetEventManager&&eventListenerRef instanceof aleks.core.ui.DOMEventListenerReference&&this.__aet_eventTargetEventManager.removeEventListener(eventListenerRef._domEventListenerReference)},aleks.core.ui.EventTarget.prototype.dispatchEvent=function(eventName,eventObject){if(arguments[0]instanceof aleks.core.ui.Event){var event=arguments[0];if(event.getEventPhase()===aleks.core.ui.Event.NONE){var eventName=event.getType();switch(event.getPropagation()){case aleks.core.ui.Event.NO_PROPAGATION:var customDispatchForEvent=this.__aet_eventTargetCustomEventListeners[eventName],hasCustomDispatchForEvent="undefined"!=typeof customDispatchForEvent;if(hasCustomDispatchForEvent)for(var nbListeners=customDispatchForEvent.length,i=0;i<nbListeners;i++)customDispatchForEvent[i].call(this,event);return!event.getDefaultPrevented();default:throw new Error("NOT SUPPORTED YET")}}else throw new Error("Failed to execute 'dispatchEvent' on 'EventTarget': The event is already being dispatched.")}else if(eventName&&"string"==typeof eventName.valueOf()){var customDispatchForEvent=this.__aet_eventTargetCustomEventListeners[eventName],hasCustomDispatchForEvent="undefined"!=typeof customDispatchForEvent;if(hasCustomDispatchForEvent)for(var currentClonedCustomDispatchForEvent,clonedCustomDispatchForEvent=Array.prototype.slice.call(customDispatchForEvent,0),i=0;i<clonedCustomDispatchForEvent.length;i++){currentClonedCustomDispatchForEvent=clonedCustomDispatchForEvent[i];for(var j=0;j<customDispatchForEvent.length;j++)if(currentClonedCustomDispatchForEvent===customDispatchForEvent[j]){currentClonedCustomDispatchForEvent.call(this,eventObject);break}}else this.__aet_eventTarget instanceof aleks.core.ui.EventTarget?this.__aet_eventTarget.dispatchEvent(eventName,eventObject):this.__aet_eventTarget&&dom.EventTarget.dispatchEvent(this.__aet_eventTarget,eventName,eventObject)}}}(),function(){aleks.core.ui.Node=function(){this._super(),this.__an_node=null,this.__an_childrenContainerNode=null,this._handleEvents("beforechildnodeinserted","childnodeinserted","beforechildnoderemoved","childnoderemoved")},aleks.extend(aleks.core.ui.Node,aleks.core.ui.EventTarget);var _isDOMNode=function(domNode){return domNode&&domNode.nodeType&&"number"==typeof domNode.nodeType},_getDOMNode=function(node){for(;node instanceof aleks.core.ui.Node;)node=node.__an_node;return _isDOMNode(node)?node:null},_getChildrenContainerDOMNode=function(node){for(var currentNode=node;currentNode instanceof aleks.core.ui.Node;)currentNode=currentNode.__an_childrenContainerNode;return _isDOMNode(currentNode)?currentNode:null},_makeNodeFromDOMNode=function(domNode){if(_isDOMNode(domNode))switch(domNode.nodeType){case 1:return aleks.core.ui.Element.fromElement(domNode);break;case 3:return aleks.core.ui.TextNode.fromTextNode(domNode);break;default:return aleks.core.ui.Node.fromNode(domNode)}return null},_getOwnerNode=function(node){return node&&node.__an_outerNode instanceof aleks.core.ui.Node?node.__an_outerNode:null},_getOutermostNode=function(node){if(node){for(;node.__an_outerNode instanceof aleks.core.ui.Node;)node=node.__an_outerNode;return node instanceof aleks.core.ui.Node?node:_makeNodeFromDOMNode(node)}return null},_getOutermostChildrenContainerNode=function(node){if(node){for(;node.__an_outerChildrenContainerNode instanceof aleks.core.ui.Node;)node=node.__an_outerChildrenContainerNode;return node instanceof aleks.core.ui.Node?node:_makeNodeFromDOMNode(node)}return null},_getChildrenContainerNodePath=function(node){var nodePath=[];if(node=_getChildrenContainerDOMNode(node),node)for(;null!==(_node$__an_outerChild=node.__an_outerChildrenContainerNode)&&void 0!==_node$__an_outerChild&&null!==(_node$__an_outerChild2=_node$__an_outerChild.isNode)&&void 0!==_node$__an_outerChild2&&_node$__an_outerChild2.call(_node$__an_outerChild);){var _node$__an_outerChild,_node$__an_outerChild2;nodePath.push(node.__an_outerChildrenContainerNode),node=node.__an_outerChildrenContainerNode}return nodePath},_dispatchBeforeChildListModified=function(eventType,nodePath,child){for(var nbNodes=nodePath.length,i=0;i<nbNodes;i++)if(!nodePath[i].dispatchEvent(new aleks.core.ui.CustomEvent(eventType,{cancelable:!0,detail:{relatedNode:child}})))return!1;return!0},_dispatchChildListModified=function(eventType,nodePath,child){for(var nbNodes=nodePath.length,i=0;i<nbNodes;i++)nodePath[i].dispatchEvent(new aleks.core.ui.CustomEvent(eventType,{cancelable:!1,detail:{relatedNode:child}}));return!0};aleks.core.ui.Node.prototype._setNode=function(node){if(this._setEventTarget(node),node)if(node.__an_outerNode instanceof aleks.core.ui.Node&&node.__an_outerNode._setNode(null),"function"==typeof node.constructor)node.__an_outerNode=this;else try{node.__an_outerNode=this}catch(e){}this.__an_node&&(this.__an_node.__an_outerNode=null),this.__an_node=node},aleks.core.ui.Node.prototype._setChildrenContainerNode=function(node){if(node)if(node.__an_outerChildrenContainerNode instanceof aleks.core.ui.Node&&node.__an_outerChildrenContainerNode._setChildrenContainerNode(null),"function"==typeof node.constructor)node.__an_outerChildrenContainerNode=this;else try{node.__an_outerChildrenContainerNode=this}catch(e){}this.__an_childrenContainerNode&&(this.__an_childrenContainerNode.__an_outerChildrenContainerNode=null),this.__an_childrenContainerNode=node};var _getParent=function(domNode){return domNode?_getOutermostChildrenContainerNode(domNode.parentNode):null};aleks.core.ui.Node.prototype.getParent=function(){return _getParent(_getDOMNode(this))},aleks.core.ui.Node.prototype.getChildren=function(){var children=[],domNode=_getChildrenContainerDOMNode(this.__an_childrenContainerNode);if(domNode){var domChildren=domNode.childNodes;if(domChildren)for(var childDOMNode,nbChildren=domChildren.length,i=0;i<nbChildren;i++)childDOMNode=domChildren[i],children.push(_getOutermostNode(childDOMNode))}return children},aleks.core.ui.Node.prototype.appendChild=function(child){aleks.core.ui.Node.prototype.insertBefore.call(this,child)},aleks.core.ui.Node.prototype.insertBefore=function(newChild,referenceChild){if(this.__an_childrenContainerNode){var newChildDOMNode=_getDOMNode(newChild),newChildNode=_getOutermostNode(newChild),previousContainerNodePath=_getChildrenContainerNodePath(_getParent(newChildDOMNode)),newContainerNodePath=_getChildrenContainerNodePath(this);_dispatchBeforeChildListModified("beforechildnoderemoved",previousContainerNodePath,newChildNode)&&_dispatchBeforeChildListModified("beforechildnodeinserted",newContainerNodePath,newChildNode)&&(dom.Node.insertBefore(newContainerNodePath[0].__an_childrenContainerNode,newChildDOMNode,_getDOMNode(referenceChild)),_dispatchChildListModified("childnoderemoved",previousContainerNodePath,newChildNode),_dispatchChildListModified("childnodeinserted",newContainerNodePath,newChildNode))}},aleks.core.ui.Node.prototype.insertFirstChild=function(newChild){if(this.__an_childrenContainerNode){const listChildren=aleks.core.ui.Node.prototype.getChildren.call(this);listChildren[0]?this.insertBefore(newChild,listChildren[0]):this.appendChild(newChild)}},aleks.core.ui.Node.prototype.removeChild=function(child){if(this.__an_childrenContainerNode){var childDOMNode=_getDOMNode(child),childNode=_getOutermostNode(child),nodePath=_getChildrenContainerNodePath(this);_dispatchBeforeChildListModified("beforechildnoderemoved",nodePath,childNode)&&(dom.Node.removeChild(nodePath[0].__an_childrenContainerNode,childDOMNode),_dispatchChildListModified("childnoderemoved",nodePath,childNode))}},aleks.core.ui.Node.prototype.isNode=function(){return!0},aleks.core.ui.Node.prototype.removeAllChildren=function(){if(this.__an_childrenContainerNode)for(var listChildren=aleks.core.ui.Node.prototype.getChildren.call(this),nbChildren=listChildren.length,i=0;i<nbChildren;i++)this.removeChild(listChildren[i])},aleks.core.ui.Node.prototype.replaceChild=function(newChild,oldChild){if(this.__an_childrenContainerNode){var newChildDOMNode=_getDOMNode(newChild),newChildNode=_getOutermostNode(newChild),oldChildDOMNode=_getDOMNode(oldChild),oldChildNode=_getOutermostNode(oldChild),previousContainerNodePath=_getChildrenContainerNodePath(_getParent(newChildDOMNode)),newContainerNodePath=_getChildrenContainerNodePath(this);_dispatchBeforeChildListModified("beforechildnoderemoved",previousContainerNodePath,newChildNode)&&_dispatchBeforeChildListModified("beforechildnoderemoved",newContainerNodePath,oldChildNode)&&_dispatchBeforeChildListModified("beforechildnodeinserted",newContainerNodePath,newChildNode)&&(dom.Node.replaceChild(newContainerNodePath[0].__an_childrenContainerNode,newChildDOMNode,oldChildDOMNode),_dispatchChildListModified("childnoderemoved",previousContainerNodePath,newChildNode),_dispatchChildListModified("childnoderemoved",newContainerNodePath,oldChildNode),_dispatchChildListModified("childnodeinserted",newContainerNodePath,newChildNode))}},aleks.core.ui.Node.prototype.contains=function(node){return!!this.__an_childrenContainerNode&&(this.__an_childrenContainerNode instanceof aleks.core.ui.Node?this.__an_childrenContainerNode.contains(node):dom.Node.contains(this.__an_childrenContainerNode,_getDOMNode(node)))},aleks.core.ui.Node.fromNode=function(node){if(node instanceof aleks.core.ui.Node)return node;if(_isDOMNode(node)){var ownerNode=_getOwnerNode(node);if(ownerNode)return ownerNode;var aleksNode=new aleks.core.ui.Node;return aleksNode._setNode(node),aleksNode._setChildrenContainerNode(node),aleksNode}return null}}(),function(){aleks.core.ui.CharacterData=function(){this._super(),this.__acd_characterData=null},aleks.extend(aleks.core.ui.CharacterData,aleks.core.ui.Node),aleks.core.ui.CharacterData.prototype._setCharacterData=function(characterData){this._setNode(characterData),this._setChildrenContainerNode(characterData),this.__acd_characterData=characterData},aleks.core.ui.CharacterData.prototype.getLength=function(){if(this.__acd_characterData)return this.__acd_characterData instanceof aleks.core.ui.CharacterData?this.__acd_characterData.getLength():this.__acd_characterData.length},aleks.core.ui.CharacterData.prototype.getData=function(){if(this.__acd_characterData)return this.__acd_characterData instanceof aleks.core.ui.CharacterData?this.__acd_characterData.getData():this.__acd_characterData.data},aleks.core.ui.CharacterData.prototype.setData=function(data){if(this.__acd_characterData)return this.__acd_characterData instanceof aleks.core.ui.CharacterData?this.__acd_characterData.setData(data):this.__acd_characterData.data=data},aleks.core.ui.CharacterData.prototype.substringData=function(offset,count){if(this.__acd_characterData)return this.__acd_characterData.substringData(offset,count)},aleks.core.ui.CharacterData.prototype.appendData=function(data){this.__acd_characterData&&this.__acd_characterData.appendData(data)},aleks.core.ui.CharacterData.prototype.insertData=function(offset,data){this.__acd_characterData&&this.__acd_characterData.insertData(offset,data)},aleks.core.ui.CharacterData.prototype.deleteData=function(offset,count){this.__acd_characterData&&this.__acd_characterData.deleteData(offset,count)},aleks.core.ui.CharacterData.prototype.replaceData=function(offset,count,data){this.__acd_characterData&&this.__acd_characterData.replaceData(offset,count,data)}}(),function(){var _protectedKey={};aleks.core.ui.TextNode=function(data){if(this._super(),this.__at_textNode=null,arguments[arguments.length-1]!==_protectedKey||1<arguments.length){var textNode=document.createTextNode(data+"");this._setTextNode(textNode)}},aleks.extend(aleks.core.ui.TextNode,aleks.core.ui.CharacterData);var _isDOMTextNode=function(domTextNode){return domTextNode&&3==domTextNode.nodeType};aleks.core.ui.TextNode.prototype._setTextNode=function(textNode){this._setCharacterData(textNode),this.__at_textNode=textNode},aleks.core.ui.TextNode.prototype.getWholeText=function(){if(this.__at_textNode)return this.__at_textNode instanceof aleks.core.ui.TextNode?this.__at_textNode.getWholeText():this.__at_textNode.wholeText},aleks.core.ui.TextNode.prototype.splitText=function(offset){if(this.__at_textNode)return aleks.core.ui.TextNode.fromTextNode(this.__at_textNode.splitText(offset))},aleks.core.ui.TextNode.fromTextNode=function(textNode){if(textNode instanceof aleks.core.ui.TextNode)return textNode;if(_isDOMTextNode(textNode)){var ownerNode=aleks.core.ui.Node.fromNode(textNode);if(ownerNode instanceof aleks.core.ui.TextNode)return ownerNode||null;var uiTextNode=new aleks.core.ui.TextNode(_protectedKey);return uiTextNode._setTextNode(textNode),uiTextNode}return null}}(),function(){var _protectedKey={},_getDOMElement=function(element){for(var currentElement=element;currentElement instanceof aleks.core.ui.Element;)currentElement=currentElement.__ae_element;return currentElement},_isDOMElement=function(domElement){return domElement&&1==domElement.nodeType};aleks.core.ui.Element=function(tagName){switch((tagName+"").toLowerCase()){case"a":return new aleks.core.ui.AnchorElement(_protectedKey);case"img":return new aleks.core.ui.ImageElement(_protectedKey);case"input":return new aleks.core.ui.InputElement(_protectedKey);case"textarea":return new aleks.core.ui.TextAreaElement(_protectedKey);case"button":return new aleks.core.ui.ButtonElement(_protectedKey);default:if(this._super(),this.__ae_element=null,this.__ae_childrenContainerElement=null,this.__events={},this.constructor==aleks.core.ui.Element||0<arguments.length){var element=document.createElement(tagName);this._setElement(element),this._setChildrenContainerElement(element)}}},aleks.extend(aleks.core.ui.Element,aleks.core.ui.Node),aleks.core.ui.Element.prototype._setElement=function(element){this._setNode(element),this.__ae_element=element},aleks.core.ui.Element.prototype._setChildrenContainerElement=function(element){this._setChildrenContainerNode(element),this.__ae_childrenContainerElement=element},aleks.core.ui.Element.prototype.getDOMElement=function(){return _getDOMElement(this.__ae_element)},aleks.core.ui.Element.prototype.getFocusableElements=function(){const focusableElements="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]";return this.getDOMElement().querySelectorAll(focusableElements)},aleks.core.ui.Element.prototype.getId=function(){var domElement=_getDOMElement(this.__ae_element);return domElement&&"string"==typeof domElement.id?domElement.id:""},aleks.core.ui.Element.prototype.setId=function(id){var domElement=_getDOMElement(this.__ae_element);domElement&&(domElement.id=null===id||"undefined"==typeof id?"":id+"")},aleks.core.ui.Element.prototype.setFor=function(forVal){var domElement=_getDOMElement(this.__ae_element);domElement&&domElement.setAttribute("for",null===forVal||"undefined"==typeof forVal?"":forVal+"")},aleks.core.ui.Element.prototype.getFor=function(){var domElement=_getDOMElement(this.__ae_element);return domElement?domElement.getAttribute("for"):""},aleks.core.ui.Element.prototype.setDraggable=function(value){var domElement=_getDOMElement(this.__ae_element),sanitizedValue=!1!==value;domElement&&(domElement.draggable=sanitizedValue)},aleks.core.ui.Element.prototype.getName=function(){return this.__ae_element?this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.getName():this.__ae_element.name||"":""},aleks.core.ui.Element.prototype.setName=function(name){this.__ae_element&&(this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.setName(name):this.__ae_element.name=null==name?"":name+"")},aleks.core.ui.Element.prototype.hasClass=function(classNames){var domElement=_getDOMElement(this.__ae_element);return dom.Element.hasClass(domElement,classNames)},aleks.core.ui.Element.prototype.addClass=function(classNames){var domElement=_getDOMElement(this.__ae_element);dom.Element.addClass(domElement,classNames)},aleks.core.ui.Element.prototype.removeClass=function(classNames){var domElement=_getDOMElement(this.__ae_element);dom.Element.removeClass(domElement,classNames)},aleks.core.ui.Element.prototype.toggleClass=function(classNames,stateForced){var domElement=_getDOMElement(this.__ae_element);2<=arguments.length?dom.Element.toggleClass(domElement,classNames,stateForced):dom.Element.toggleClass(domElement,classNames)},aleks.core.ui.Element.prototype.getTitle=function(){return this.__ae_element?this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.getTitle():dom.Element.getTitle(this.__ae_element):null},aleks.core.ui.Element.prototype.setTitle=function(title){this.__ae_element&&(this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.setTitle(title):dom.Element.setTitle(this.__ae_element,title))},aleks.core.ui.Element.prototype.getRole=function(){return this.__ae_element?this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.getRole():dom.Element.getAttribute(this.__ae_element,"role"):""},aleks.core.ui.Element.prototype.setAriaStyle=function(style){if(this.__ae_element)if(this.__ae_element instanceof aleks.core.ui.Element)this.__ae_element.setAriaStyle(style);else for(var ariaProperty in style){var ariaAttribute="";switch(ariaProperty){case"label":ariaAttribute="aria-label";break;case"level":ariaAttribute="aria-level";break;case"disabled":ariaAttribute="aria-disabled";break;case"expanded":ariaAttribute="aria-expanded";break;case"hidden":ariaAttribute="aria-hidden";break;case"activedescendant":ariaAttribute="aria-activedescendant";break;case"id":ariaAttribute="id";break;case"invalid":ariaAttribute="aria-invalid";break;case"alt":ariaAttribute="alt";break;case"errormessage":ariaAttribute="aria-errormessage";break;case"role":ariaAttribute="role";break;case"maxlength":ariaAttribute="maxlength";break;case"size":ariaAttribute="size";break;case"readonly":ariaAttribute="aria-readonly";break;case"selected":ariaAttribute="aria-selected";break;case"popup":ariaAttribute="aria-haspopup";break;case"live":ariaAttribute="aria-live";break;case"labelby":ariaAttribute="aria-labelledby";break;case"describeby":ariaAttribute="aria-describedby";break;case"value":ariaAttribute="value";break;case"valuenow":ariaAttribute="aria-valuenow";break;case"valuemin":ariaAttribute="aria-valuemin";break;case"valuemax":ariaAttribute="aria-valuemax";break;case"valuetext":ariaAttribute="aria-valuetext";break;case"posinset":ariaAttribute="aria-posinset";break;case"scope":ariaAttribute="scope";break;case"setsize":ariaAttribute="aria-setsize";break;case"tabindex":ariaAttribute="tabindex";break;case"atomic":ariaAttribute="aria-atomic";break;case"level":ariaAttribute="aria-level";break;case"checked":ariaAttribute="aria-checked";break;case"pressed":ariaAttribute="aria-pressed";break;case"controls":ariaAttribute="aria-controls";break;case"sort":ariaAttribute="aria-sort";break;case"modal":ariaAttribute="aria-modal";break;case"haspopup":ariaAttribute="aria-haspopup";break;case"autocomplete":ariaAttribute="aria-autocomplete";break;case"required":ariaAttribute="aria-required";break;case"colspan":ariaAttribute="aria-colspan";break;case"owns":ariaAttribute="aria-owns";break;case"multiselectable":ariaAttribute="aria-multiselectable";break;case"current":ariaAttribute="aria-current";break;default:}if(null===style[ariaProperty]||""===style[ariaProperty]||"undefined"==typeof style[ariaProperty])dom.Element.removeAttribute(this.__ae_element,ariaAttribute);else if(""!=ariaAttribute){let propertyValue=style[ariaProperty];if("describeby"===ariaProperty||"labelby"===ariaProperty){const currentProperty=dom.Element.getAttribute(this.__ae_element,ariaAttribute);currentProperty&&(propertyValue=`${currentProperty} ${propertyValue}`)}dom.Element.setAttribute(this.__ae_element,ariaAttribute,propertyValue)}}},aleks.core.ui.Element.prototype.getScrollTop=function(){return this.__ae_element?this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.getScrollTop():this.__ae_element.scrollTop:""},aleks.core.ui.Element.prototype.getScrollLeft=function(){return this.__ae_element?this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.getScrollLeft():this.__ae_element.scrollLeft:""},aleks.core.ui.Element.prototype.setStyle=function(style){this.__ae_element&&(this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.setStyle(style):dom.Element.setStyle(this.__ae_element,style))},aleks.core.ui.Element.prototype.getStyle=function(cssValue){return this.getDOMElement().style[cssValue]},aleks.core.ui.Element.prototype.getBoundingClientRect=function(opt_referenceElement){return dom.Element.getBoundingClientRect(_getDOMElement(this.__ae_element),_getDOMElement(opt_referenceElement))},aleks.core.ui.Element.prototype.getCurrentWidth=function(boxName){var domElement=_getDOMElement(this.__ae_element);switch(boxName){case"padding-box":if(domElement&&"number"==typeof domElement.clientWidth)return domElement.clientWidth;break;case"scroll-box":if(domElement&&"number"==typeof domElement.scrollWidth)return domElement.scrollWidth;break;case"border-box":default:if(domElement&&"number"==typeof domElement.offsetWidth)return domElement.offsetWidth}return 0},aleks.core.ui.Element.prototype.getCurrentHeight=function(boxName){var domElement=_getDOMElement(this.__ae_element);switch(boxName){case"padding-box":if(domElement&&"number"==typeof domElement.clientHeight)return domElement.clientHeight;break;case"scroll-box":if(domElement&&"number"==typeof domElement.scrollHeight)return domElement.scrollHeight;break;case"border-box":default:if(domElement&&"number"==typeof domElement.offsetHeight)return domElement.offsetHeight}return 0},aleks.core.ui.Element.prototype.focus=function(){this.__ae_element&&this.__ae_element.focus()},aleks.core.ui.Element.prototype.blur=function(){this.__ae_element&&this.__ae_element.blur()},aleks.core.ui.Element.prototype.isFocusable=function(){if(this.__ae_element)return this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.isFocusable():dom.Element.isFocusable(this.__ae_element)},aleks.core.ui.Element.prototype.isTabbable=function(){if(this.__ae_element)return this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.isTabbable():dom.Element.isTabbable(this.__ae_element)},aleks.core.ui.Element.prototype.setFocusable=function(value){this.__ae_element&&(this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.setFocusable(value):dom.Element.setFocusable(this.__ae_element,value))},aleks.core.ui.Element.prototype.setTabbable=function(value){this.__ae_element&&(this.__ae_element instanceof aleks.core.ui.Element?this.__ae_element.setTabbable(value):dom.Element.setTabbable(this.__ae_element,value))},aleks.core.ui.Element.prototype.preventDefaultFocusStyle=function(){var domElement=_getDOMElement(this.__ae_element);domElement&&dom.Element.preventDefaultFocusStyle(domElement)},aleks.core.ui.Element.prototype.registerEventListener=function(eventId,eventName,action,owner){if(!this.__events[eventId])this.__events[eventId]=this.addEventListener(eventName,action,owner);else throw new Error("An event with eventId \""+eventId+"\" is already registered to this aleks.core.ui.Element.")},aleks.core.ui.Element.prototype.removeEventListenersById=function(eventIds){"string"==typeof eventIds&&(eventIds=[eventIds]),eventIds.forEach(function(eventId){this.removeEventListener(this.__events[eventId]),delete this.__events[eventId]},this)},aleks.core.ui.Element.fromElement=function(element){if(element instanceof aleks.core.ui.Element)return element;if(_isDOMElement(element)){var ownerNode=aleks.core.ui.Node.fromNode(element);if(ownerNode instanceof aleks.core.ui.Element)return ownerNode||null;var aleksElement=new aleks.core.ui.Element(element.tagName);return aleksElement._setElement(element),aleksElement._setChildrenContainerElement(element),aleksElement}return null},aleks.core.ui.AnchorElement=function(){if(arguments[arguments.length-1]===_protectedKey){this._super();var element=document.createElement("a");this._setElement(element),this._setChildrenContainerElement(element)}else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.AnchorElement,aleks.core.ui.Element),aleks.core.ui.AnchorElement.prototype.getHref=function(){var domElement=_getDOMElement(this);return domElement?dom.Element.getAttribute(domElement,"href"):null},aleks.core.ui.AnchorElement.prototype.setHref=function(href){var domElement=_getDOMElement(this);domElement&&(null===href||"undefined"==typeof href?dom.Element.removeAttribute(domElement,"href"):domElement.href=href+"")},aleks.core.ui.AnchorElement.prototype.setTarget=function(target){var domElement=_getDOMElement(this);domElement&&(null===target||"undefined"==typeof target?dom.Element.removeAttribute(domElement,"target"):domElement.target=target+"")},aleks.core.ui.ImageElement=function(){if(arguments[arguments.length-1]===_protectedKey)this._super(),this.__element=document.createElement("img"),this.__element.alt="",this._setElement(this.__element),this.__loadedPromise=new dom.Promise(function(resolve,reject){this.__element.addEventListener("load",function(){resolve()}),this.__element.addEventListener("error",function(){aleks.isLogOnLan?reject("Failed to load image "+this.src):resolve()})}.bind(this));else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.ImageElement,aleks.core.ui.Element),aleks.core.ui.ImageElement.prototype.setAriaStyle=function(style){this._super(style),style.label&&(this.__element.alt=style.label)},aleks.core.ui.ImageElement.prototype.getLoaded=function(){return this.__loadedPromise},aleks.core.ui.ImageElement.prototype.getSrc=function(){var domElement=_getDOMElement(this);return domElement?dom.Element.getAttribute(domElement,"src"):null},aleks.core.ui.ImageElement.prototype.setSrc=function(src){if(src){var domElement=_getDOMElement(this);domElement&&(domElement.src=src+"")}},aleks.core.ui.ImageElement.prototype.getWidth=function(){return this.__element.width},aleks.core.ui.ImageElement.prototype.getHeight=function(){return this.__element.height},aleks.core.ui.ControlElement=function(tagName){if(this._super(),tagName){var element=document.createElement(tagName);this._setElement(element),this._setChildrenContainerElement(element)}},aleks.extend(aleks.core.ui.ControlElement,aleks.core.ui.Element),aleks.core.ui.ControlElement.prototype.getForm=function(){var domElement=_getDOMElement(this);return domElement&&domElement.form&&"form"==(domElement.form.tagName+"").toLowerCase()?domElement.form:null},aleks.core.ui.ControlElement.prototype.getType=function(){var domElement=_getDOMElement(this);return domElement&&"string"==typeof domElement.type?domElement.type:""},aleks.core.ui.ControlElement.prototype.setType=function(type){var domElement=_getDOMElement(this);domElement&&(domElement.type=null==type||"undefined"==typeof type?"":type+"")},aleks.core.ui.ControlElement.prototype.getValue=function(){var domElement=_getDOMElement(this);return domElement&&"string"==typeof domElement.value?domElement.value:""},aleks.core.ui.ControlElement.prototype.setValue=function(value){var domElement=_getDOMElement(this);domElement&&(domElement.value=null==value||"undefined"==typeof value?"":value+"")},aleks.core.ui.ControlElement.prototype.isDisabled=function(){var domElement=_getDOMElement(this);if(domElement)return!!domElement.disabled},aleks.core.ui.ControlElement.prototype.setDisabled=function(disabled){var domElement=_getDOMElement(this);domElement&&(domElement.disabled=!!disabled)},aleks.core.ui.ControlElement.prototype.setHidden=function(hidden){var domElement=_getDOMElement(this);domElement&&(domElement.hidden=!!hidden)},aleks.core.ui.InputElement=function(){if(arguments[arguments.length-1]===_protectedKey)this._super("input");else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.InputElement,aleks.core.ui.ControlElement),aleks.core.ui.InputElement.prototype.isChecked=function(){var domElement=_getDOMElement(this);if(domElement)return!!domElement.checked},aleks.core.ui.InputElement.prototype.setChecked=function(checked){var domElement=_getDOMElement(this);domElement&&(domElement.checked=!!checked)},aleks.core.ui.InputElement.prototype.isIndeterminate=function(){var domElement=_getDOMElement(this);if(domElement)return!!domElement.indeterminate},aleks.core.ui.InputElement.prototype.setIndeterminate=function(indeterminate){var domElement=_getDOMElement(this);domElement&&(domElement.indeterminate=!!indeterminate)},aleks.core.ui.InputElement.prototype.setMaxLength=function(maxLength){var domElement=_getDOMElement(this);domElement&&(domElement.maxLength=maxLength)},aleks.core.ui.InputElement.prototype.setAutocomplete=function(autocomplete){var domElement=_getDOMElement(this);domElement&&(domElement.autocomplete=autocomplete)},aleks.core.ui.InputElement.prototype.select=function(){var domElement=_getDOMElement(this);domElement&&domElement.select&&domElement.select()},aleks.core.ui.ButtonElement=function(){if(arguments[arguments.length-1]===_protectedKey)this._super("button");else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.ButtonElement,aleks.core.ui.ControlElement),aleks.core.ui.TextAreaElement=function(){if(arguments[arguments.length-1]===_protectedKey)this._super("textarea");else throw new TypeError("Illegal constructor")},aleks.extend(aleks.core.ui.TextAreaElement,aleks.core.ui.ControlElement),aleks.core.ui.TextAreaElement.prototype.getCaretPosition=function(){var domElement=_getDOMElement(this);return domElement?domElement.selectionStart:0},aleks.core.ui.TextAreaElement.prototype.setCaretPosition=function(position){var domElement=_getDOMElement(this);domElement&&(domElement.selectionStart=position,domElement.selectionEnd=position)},aleks.core.ui.TextAreaElement.prototype.getMaxLength=function(){var domElement=_getDOMElement(this);return domElement?domElement.maxLength:""},aleks.core.ui.TextAreaElement.prototype.setMaxLength=function(maxLength){var domElement=_getDOMElement(this);domElement&&(domElement.maxLength=maxLength)},aleks.core.ui.TextAreaElement.prototype.isReadOnly=function(){var domElement=_getDOMElement(this);if(domElement)return!!domElement.readOnly},aleks.core.ui.TextAreaElement.prototype.setReadOnly=function(readOnly){var domElement=_getDOMElement(this);domElement&&(domElement.readOnly=!!readOnly)}}()}(),function(){aleks.core.ui.AbstractElement=function(){this._super(),this.__ae_setStyleFunctions={},this.__ae_defaultSetStyleFunction=null},aleks.extend(aleks.core.ui.AbstractElement,aleks.core.ui.Element),aleks.core.ui.AbstractElement.prototype.setStyle=function(style){var filteredStyle={};for(var cssProperty in style){var camelCaseProperty=dom.Element.getCamelCaseStyleProperty(cssProperty),setStyleFunction=this.__ae_setStyleFunctions[camelCaseProperty];setStyleFunction&&setStyleFunction.call?setStyleFunction.call(this,camelCaseProperty,style[cssProperty]):this.__ae_defaultSetStyleFunction?this.__ae_defaultSetStyleFunction.call(this,camelCaseProperty,style[cssProperty]):filteredStyle[cssProperty]=style[cssProperty]}this._super(filteredStyle)},aleks.core.ui.AbstractElement.prototype._handleStyles=function(cssProperties,styleSetterFunction){var nbArguments=arguments.length,lastArgument=arguments[nbArguments-1],isLastArgumentStyleSetter="function"==typeof lastArgument,fixedStyleSetterFunction=isLastArgumentStyleSetter?lastArgument:function(){};if(0==nbArguments||1==nbArguments&&isLastArgumentStyleSetter)this.__ae_defaultSetStyleFunction=fixedStyleSetterFunction;else for(var currentArgument,i=isLastArgumentStyleSetter?nbArguments-2:nbArguments-1;0<=i;i--)if(currentArgument=arguments[i],currentArgument&&"string"==typeof currentArgument.valueOf())this.__ae_setStyleFunctions[dom.Element.getCamelCaseStyleProperty(currentArgument)]=fixedStyleSetterFunction;else if(currentArgument&&0<currentArgument.length)for(var j=0;j<currentArgument.length;j++)this.__ae_setStyleFunctions[dom.Element.getCamelCaseStyleProperty(currentArgument[j])]=fixedStyleSetterFunction}}(),function(){var _protectedKey={};aleks.core.ui.StateEventListenerReference=function(listenerRef){if(arguments[arguments.length-1]===_protectedKey)this._listenerRef=listenerRef;else throw new TypeError("Illegal constructor")},aleks.core.ui.StateChangeEvent=function(target,type,fromState,toState){if(arguments[arguments.length-1]===_protectedKey)this.target=target,this.type=type+"",this.fromState=fromState,this.toState=toState;else throw new TypeError("Illegal constructor")},aleks.core.ui.AbstractStateElement=function(){this._super(),this.__ase_state={},this.__ase_listeners=[]},aleks.extend(aleks.core.ui.AbstractStateElement,aleks.core.ui.AbstractElement);var _patternValidState=/^-?[_a-zA-Z][_a-zA-Z0-9:\.\-]*$/,_makeFunctionFromStateExpression=function(){var cache={};return function(stateExpression){var vars=[],tmpStateExpression=stateExpression.replace(/[^(),\s!]+/g,function(match,offset,string){if(_patternValidState.test(match))return vars.push(match)-1;throw new Error});tmpStateExpression=tmpStateExpression.replace(/(^|\(|,)\s+/g,"$1").replace(/\s+($|\)|,)/g,"$1").replace(/([^,\s])\(/g,"$1 "+"(").replace(/\)([^,\s])/g,")"+" $1").replace(/\s+/g,"&&").replace(/,+/g,"||"),tmpStateExpression=tmpStateExpression.replace(/\d+/g,function(match,offset,string){return"state['"+vars[match].replace(/'/g,"\\'")+"']"});var savedFunction=cache[tmpStateExpression];if(savedFunction)return savedFunction;var functionToSave=new Function("state","return Boolean("+tmpStateExpression+");");return cache[tmpStateExpression]=functionToSave,functionToSave}}(),_buildListenerWrapper=function(listener,targetObject){var listenerWrapper;if("function"==typeof listener){var thisObject=targetObject||this;listenerWrapper=function(event){listener.call(thisObject,event)}}else if(targetObject&&targetObject[listener])listenerWrapper=function(event){targetObject[listener](event)};else throw new Error(listener+" is supposed to be a method of the object "+targetObject);return listenerWrapper},_dispatchIfStateChanged=function(listenerContext,fromState,toState){var stateExpressionValue=listenerContext.stateExpressionFunction(toState);if(stateExpressionValue!=listenerContext.stateExpressionValue&&(listenerContext.stateExpressionValue=stateExpressionValue,"change"==listenerContext.type||"in"==listenerContext.type&&stateExpressionValue||"out"==listenerContext.type&&!stateExpressionValue)){var eventType=stateExpressionValue?"in":"out",eventFromState={};for(var stateProperty in fromState)eventFromState[stateProperty]=fromState[stateProperty];var eventToState={};for(var stateProperty in fromState)eventToState[stateProperty]=toState[stateProperty];var event=new aleks.core.ui.StateChangeEvent(this,eventType,eventFromState,eventToState,_protectedKey);listenerContext.listenerRef.call(this,event)}};aleks.core.ui.AbstractStateElement.prototype.getState=function(stateProperty){return!!this.__ase_state[stateProperty]},aleks.core.ui.AbstractStateElement.prototype.setState=function(stateProperty,stateValue){var stateObject,stateHasBeenModified=!1,diffState={};for(var stateProperty in stateProperty&&"string"==typeof stateProperty.valueOf()?(stateObject={},stateObject[stateProperty]=stateValue):stateObject=stateProperty,stateObject){if(stateValue=!!stateObject[stateProperty],"undefined"==typeof this.__ase_state[stateProperty])if(_patternValidState.test(stateProperty))this.__ase_state[stateProperty]=!1;else throw new Error("SyntaxError: '"+stateProperty.replace(/'/g,"\\'")+"' is not a valid name for a state property");this.__ase_state[stateProperty]!=stateValue&&(diffState[stateProperty]=stateValue,stateHasBeenModified=!0)}if(stateHasBeenModified){var fromState=this.__ase_state,toState={};for(var stateProperty in fromState)toState[stateProperty]=fromState[stateProperty];for(var stateProperty in diffState)toState[stateProperty]=diffState[stateProperty];this.__ase_state=toState;for(var i=0;i<this.__ase_listeners.length&&this.__ase_state===toState;i++)_dispatchIfStateChanged.call(this,this.__ase_listeners[i],fromState,toState)}},aleks.core.ui.AbstractStateElement.prototype.addStateEventListener=function(type,stateExpression,listener,targetObject){let options=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{};if(("in"==type||"out"==type||"change"==type)&&stateExpression&&"string"==typeof stateExpression.valueOf()){var listenerRef=_buildListenerWrapper.call(this,listener,targetObject),stateExpressionFunction=null;try{stateExpressionFunction=_makeFunctionFromStateExpression.call(this,stateExpression)}catch(e){throw new Error("SyntaxError: invalid state expression")}if(stateExpressionFunction){var listenerContext={type:type+"",listenerRef:listenerRef,stateExpression:stateExpression+"",stateExpressionFunction:stateExpressionFunction,stateExpressionValue:void 0};if(this.__ase_listeners.push(listenerContext),!1!==options.callListener)_dispatchIfStateChanged.call(this,listenerContext,this.__ase_state,this.__ase_state);else{const stateExpressionValue=listenerContext.stateExpressionFunction(this.__ase_state);stateExpressionValue!=listenerContext.stateExpressionValue&&(listenerContext.stateExpressionValue=stateExpressionValue)}return new aleks.core.ui.StateEventListenerReference(listenerRef,_protectedKey)}}},aleks.core.ui.AbstractStateElement.prototype.removeStateEventListener=function(eventListenerRef){if(eventListenerRef instanceof aleks.core.ui.StateEventListenerReference)for(var nbListeners=this.__ase_listeners.length,i=0;i<nbListeners;i++)if(this.__ase_listeners[i].listenerRef===eventListenerRef._listenerRef)return void this.__ase_listeners.splice(i,1)},aleks.core.ui.AbstractStateElement.prototype.setFocusedColor=function(){!isTablet&&(this.setStyle({border:"2px solid transparent","background-clip":"padding-box"}),this.addStateEventListener("in","!disabled focused",function(){global.isWindowHighContrastOn?this.setStyle({outline:this.__currentFocusedColor+" solid thick"}):(this.__defaultFocusStyle={"box-shadow":"0 0 0px 2px "+this.__currentFocusedColor,border:"2px solid transparent"},this.setStyle(this.__focusStyleJSON?this.__focusStyleJSON:this.__defaultFocusStyle))},this),this.addStateEventListener("out","!disabled focused",function(){global.isWindowHighContrastOn?this.setStyle({outline:""}):this.setStyle(this.__unfocusStyleJSON?this.__unfocusStyleJSON:{"box-shadow":"",border:"2px solid transparent"})},this))},aleks.core.ui.AbstractStateElement.prototype.setInsetFocusedStyle=function(){this.__focusStyleJSON={"box-shadow":"inset 0 0 0 2px "+this.__currentFocusedColor}},aleks.core.ui.AbstractStateElement.prototype.setFocusedStyle=function(style){this.__focusStyleJSON=style},aleks.core.ui.AbstractStateElement.prototype.setUnfocusedStyle=function(style){this.__unfocusStyleJSON=style}}(),function(){var __ac_addWindowEventListeners,__ac_removeWindowEventListeners,__ac_lastTouchEventTimestamp=0,__ac_isRealMouseEvent=function(event){return!!(1e4<=new Date().getTime()-__ac_lastTouchEventTimestamp)},__ac_isLeftMouseEvent=function(event){return"which"in event?1==event.which:1==(1&event.button)},__ac_mousedownFocusHandler=function(){this.__ac_element&&(this.getState("disabled")?this.setState("focused",!1):this.__ac_keyEventTarget.focus())},__ac_inFocused=function(){if(this.__ac_element)if(this.getState("disabled"))this.setState("focused",!1);else{var wasReallyFocused=this.__ac_hasReceivedFocusEvent;if(!wasReallyFocused){var focusEventListener=this.__ac_keyEventTarget.addEventListener("focus",function(){wasReallyFocused=!0},this);this.__ac_keyEventTarget.focus(),this.__ac_keyEventTarget.removeEventListener(focusEventListener)}if(wasReallyFocused){if(this.dispatchEvent("focus",null),this.__topHeightClearance){var rect=this.__ac_element.getBoundingClientRect();rect.__cr_top<=this.__topHeightClearance&&window.scrollBy(0,-this.__topHeightClearance)}if(this.__bottomHeightClearance){var rect=this.__ac_element.getBoundingClientRect(),windowHeight=window.getWindowWidthHeight()[1],minBottom=windowHeight-this.__bottomHeightClearance+2;rect.__cr_bottom>=minBottom&&window.scrollBy(0,rect.__cr_bottom-minBottom+4)}}else this.setState("focused",!1)}},__ac_outFocused=function(){this.__ac_element&&(this.__ac_keyEventTarget.blur(),this.dispatchEvent("blur",null))},__ac_focusHandler=function(event){this.__ac_hasReceivedFocusEvent=!0,this.setState("focused",!0),this.__ac_hasReceivedFocusEvent=!1},__ac_blurHandler=function(event){!this.__ac_ignoreNextBlur&&this.setState("focused",!1)},__ac_mouseoverHandler=function(event){__ac_isRealMouseEvent.call(this,event)&&this.setState("hovered",!0)},__ac_mouseoutHandler=function(event){this.setState("hovered",!1)},__ac_mousedownHandler=function(event){var self=this;this.__ac_ignoreNextBlur=!0,window.setTimeout(function(){self.__ac_ignoreNextBlur=!1,__ac_mousedownFocusHandler.call(self)},0),self.setState("hovered",!0),__ac_isLeftMouseEvent(event)&&__ac_isRealMouseEvent.call(this,event)&&(__ac_addWindowEventListeners.call(this),this.setState("pressed",!0))},__ac_mouseupHandler=function(event){__ac_isLeftMouseEvent(event)&&(__ac_removeWindowEventListeners.call(this),this.setState("pressed",!1))},__ac_cancelPress=function(){this.setState("hovered",!1),this.setState("pressed",!1)},__ac_cancelTouch=function(event){this.__ac_lastTouchStartPosition=null,__ac_cancelPress.call(this)},__ac_dragendHandler=function(event){__ac_removeWindowEventListeners.call(this),__ac_cancelPress.call(this)},__ac_touchstartHandler=function(event){if(1==event.touches.length){var touch=event.touches[0];this.setState("hovered",!0),this.setState("pressed",!0),this.__ac_lastTouchStartPosition={x:touch.screenX,y:touch.screenY}}else __ac_cancelTouch.call(this)},__ac_touchmoveHandler=function(event){this.__ac_lastTouchStartPosition&&this.getState("hovered")&&(1!=event.touches.length||10<=Math.abs(this.__ac_lastTouchStartPosition.x-event.touches[0].screenX)||10<=Math.abs(this.__ac_lastTouchStartPosition.y-event.touches[0].screenY))&&this.setState("hovered",!1)},__ac_touchendHandler=function(event){this.setState("pressed",!1),__ac_lastTouchEventTimestamp=new Date().getTime(),__ac_cancelTouch.call(this)},__ac_touchcancelHandler=function(event){__ac_lastTouchEventTimestamp=new Date().getTime(),__ac_cancelTouch.call(this)},__ac_mousedownDocumentHandler=function(event){!__ac_isLeftMouseEvent(event)&&(__ac_removeWindowEventListeners.call(this),__ac_cancelPress.call(this))},__ac_rec_addWindowEventListeners=function(currentWindow){try{this.__ac_windowEventListeners.addEventListener(currentWindow.document,"mouseup",__ac_mouseupHandler,this),this.__ac_windowEventListeners.addEventListener(currentWindow.document,"mousedown",__ac_mousedownDocumentHandler,this),this.__ac_windowEventListeners.addEventListener(currentWindow.document,"contextmenu",__ac_mousedownDocumentHandler,this);for(var i=0;i<currentWindow.frames.length;i++)__ac_rec_addWindowEventListeners.call(this,currentWindow.frames[i])}catch(error){}},__ac_removeWindowEventListeners=function(){this.__ac_windowEventListeners.removeAllEventListeners()},__ac_addWindowEventListeners=function(){__ac_removeWindowEventListeners.call(this),__ac_rec_addWindowEventListeners.call(this,window.top)};aleks.core.ui.AbstractControl=function(){this._super(),this.__ac_element=null,this.__ac_keyEventTarget=null,this.__ac_ignoreNextBlur=!1,this.__ac_lastTouchStartPosition=null,this.__ac_hasReceivedFocusEvent=!1,this.__ac_windowEventListeners=new dom.EventManager,this.__topHeightClearance=null,this.__bottomHeightClearance=null,this.addStateEventListener("in","hovered",function(){this.__ac_element&&!this.getState("disabled")&&this.dispatchEvent("mouseover",null)},this),this.addStateEventListener("out","hovered",function(){this.__ac_element&&!this.getState("disabled")&&this.dispatchEvent("mouseout",null)},this),this.addStateEventListener("in","pressed",function(){this.__ac_element&&!this.getState("disabled")&&this.dispatchEvent("press",null)},this),this.addStateEventListener("out","pressed",function(event){this.__ac_element&&!this.getState("disabled")&&(this.dispatchEvent("release",null),this.getState("hovered")&&!(this.__ac_keyEventTarget instanceof aleks.core.ui.ButtonElement)&&this.dispatchEvent("click",event))},this),this.addStateEventListener("in","focused",__ac_inFocused,this),this.addStateEventListener("out","focused",__ac_outFocused,this),this.addStateEventListener("in","disabled",function(){this.__ac_element&&(this.__ac_keyEventTarget.setFocusable(!1),this.setState("focused",!1),this.dispatchEvent("disable",null))},this),this.addStateEventListener("out","disabled",function(){this.__ac_element&&(this.__ac_keyEventTarget.setFocusable(!0),this.dispatchEvent("enable",null))},this),this._handleEvents("click","press","release","mouseover","mouseout","focus","blur","enable","disable")},aleks.extend(aleks.core.ui.AbstractControl,aleks.core.ui.AbstractStateElement),aleks.core.ui.AbstractControl.prototype._setElement=function(element){this._super(element),(!this.__ac_keyEventTarget||this.__ac_keyEventTarget===this.__ac_element)&&this._setKeyEventTarget(element),this.__ac_element=aleks.core.ui.Element.fromElement(element),this.__ac_element.addEventListener("mouseenter",__ac_mouseoverHandler,this),this.__ac_element.addEventListener("mouseleave",__ac_mouseoutHandler,this),this.__ac_element.addEventListener("mousedown",__ac_mousedownHandler,this),this.__ac_element.addEventListener("mouseup",__ac_mouseupHandler,this),this.__ac_element.addEventListener("dragend",__ac_dragendHandler,this),this.__ac_element.addEventListener("touchstart",__ac_touchstartHandler,this,{passive:!0}),this.__ac_element.addEventListener("touchmove",__ac_touchmoveHandler,this,{passive:!0}),this.__ac_element.addEventListener("touchend",__ac_touchendHandler,this,{passive:!0}),this.__ac_element.addEventListener("touchcancel",__ac_touchcancelHandler,this,{passive:!0})},aleks.core.ui.AbstractControl.prototype._setKeyEventTarget=function(element){this.__ac_keyEventTarget&&(this.__ac_keyEventTarget.setFocusable(!1),this.__ac_keyEventTarget.setTabbable(!1),this.__ac_keyEventTarget.removeEventListener(this.__ac_savedFocusEventListener),this.__ac_keyEventTarget.removeEventListener(this.__ac_savedBlurEventListener)),this.__ac_keyEventTarget=aleks.core.ui.Element.fromElement(element),this.__ac_keyEventTarget.preventDefaultFocusStyle(),this.__ac_keyEventTarget.setFocusable(!0),this.__ac_keyEventTarget.setTabbable(!0),this.__ac_savedFocusEventListener=this.__ac_keyEventTarget.addEventListener("focus",__ac_focusHandler,this),this.__ac_savedBlurEventListener=this.__ac_keyEventTarget.addEventListener("blur",__ac_blurHandler,this)},aleks.core.ui.AbstractControl.prototype.getKeyEventTarget=function(){return this.__ac_keyEventTarget},aleks.core.ui.AbstractControl.prototype.enableAutoScrollOverFixedElements=function(topClearance,bottomClearance){this.__topHeightClearance=topClearance,this.__bottomHeightClearance=bottomClearance,this.__bottomHeightClearance+=document.body.clientWidth<document.body.scrollWidth?18:0},aleks.core.ui.AbstractControl.prototype.isDisabled=function(){return this.getState("disabled")},aleks.core.ui.AbstractControl.prototype.setDisabled=function(value){this.setState("disabled",!!value)},aleks.core.ui.AbstractControl.prototype.setHidden=function(value){this.setState("hidden",!!value)},aleks.core.ui.AbstractControl.prototype.focus=function(){this.setState("focused",!0)},aleks.core.ui.AbstractControl.prototype.blur=function(){this.setState("focused",!1)},aleks.core.ui.AbstractControl.prototype.isFocusable=function(){return this.__ac_keyEventTarget&&this.__ac_keyEventTarget.isFocusable()},aleks.core.ui.AbstractControl.prototype.isTabbable=function(){return this.__ac_keyEventTarget&&this.__ac_keyEventTarget.isTabbable()},aleks.core.ui.AbstractControl.prototype.setFocusable=function(value){this.__ac_keyEventTarget&&this.__ac_keyEventTarget.setFocusable(value)},aleks.core.ui.AbstractControl.prototype.setTabbable=function(value){this.__ac_keyEventTarget&&this.__ac_keyEventTarget.setTabbable(value)},aleks.core.ui.AbstractControl.prototype.setAriaStyle=function(style){this.__ac_keyEventTarget?this.__ac_keyEventTarget.setAriaStyle(style):this._super(style)},aleks.core.ui.AbstractControl.prototype.setInputId=function(id){this.__ac_keyEventTarget&&this.__ac_keyEventTarget.setId(id)},aleks.core.ui.AbstractControl.prototype.getInputId=function(){if(this.__ac_keyEventTarget)return this.__ac_keyEventTarget.getId()}}(),function(){aleks.core.ui.TextContainer=function(text){let{useInnerText,getInnerText}=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{useInnerText:!1,getInnerText:!1};this._super(),this._container=new aleks.core.ui.Element("div"),this._textOverflow=!1,this._setElement(this._container),this._setChildrenContainerElement(this._container),this.__setInnerMethod=useInnerText?"innerText":"innerHTML",this.__getInnerMethod=getInnerText?"innerText":this.__setInnerMethod,null!=text&&0<text.toString().length&&this.setText(text)},aleks.extend(aleks.core.ui.TextContainer,aleks.core.ui.AbstractElement),aleks.core.ui.TextContainer.prototype.setTextOverflowLines=function(){let lines=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;this.setStyle({textOverflow:"ellipsis",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":lines,"-webkit-box-orient":"vertical"}),this.getDOMElement().title=unescapeHtmlEntities(this.getText()),this._textOverflow=!0,this._handleStyles("display",function(cssCamelCaseProperty,cssValue){cssValue&&"none"!==cssValue&&(cssValue=cssValue.match(/inline/)?"-webkit-inline-box":"-webkit-box"),this._container.setStyle({display:cssValue})})},aleks.core.ui.TextContainer.prototype.setText=function(text){this.getDOMElement()[this.__setInnerMethod]=text,this.getDOMElement().hidden=!1,this._textOverflow&&(this.getDOMElement().title=unescapeHtmlEntities(text))},aleks.core.ui.TextContainer.prototype.getText=function(){return this.getDOMElement()[this.__getInnerMethod]},aleks.core.ui.TextContainer.prototype.appendText=function(text){this.getDOMElement()[this.__setInnerMethod]+=text,this.getDOMElement().hidden=!1,this._textOverflow&&(this.getDOMElement().title+=unescapeHtmlEntities(text))},aleks.core.ui.TextContainer.prototype.hideText=function(){this.setStyle({overflow:"hidden","max-height":"1px","max-width":"1px",position:"absolute"})},aleks.core.ui.TextContainer.prototype.showText=function(){this.setStyle({overflow:"visible","max-height":"none","max-width":"none",position:"static"})}}(),aleks.core.ui.getWindowSize=function(){window.innerWidth<=aleks.core.ui.SMALL_WIDTH?smt.windowSize="small":window.innerWidth>aleks.core.ui.SMALL_WIDTH&&window.innerWidth<=aleks.core.ui.MEDIUM_WIDTH?smt.windowSize="medium":window.innerWidth>aleks.core.ui.MEDIUM_WIDTH&&window.innerWidth<=aleks.core.ui.LARGE_WIDTH?smt.windowSize="large":window.innerWidth>aleks.core.ui.LARGE_WIDTH&&(smt.windowSize="extralarge")},this.ui=aleks.core.ui;