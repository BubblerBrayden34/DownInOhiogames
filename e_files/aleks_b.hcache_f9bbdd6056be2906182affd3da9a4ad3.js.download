/**
 * Copyright © 2024 UC Regents and ALEKS Corporation
 * ALEKS® is a registered trademark of ALEKS Corporation.
**/
var _this=this,global=global||Function("return this")();global.aleks=global.aleks||{},aleks.extend=function(subClass,superClass){if("function"!=typeof subClass)throw new Error("aleks.extend failed. The first argument should be a Class.");if("function"!=typeof superClass)throw new Error("aleks.extend failed. The second argument should be a Class.");for(let ancestor=superClass;ancestor;){if(ancestor===subClass)throw new Error("aleks.extend failed. An inheritance cycle was detected.");ancestor=ancestor.__parentClass}const Intermediate=function(){this.constructor=subClass};Intermediate.prototype=superClass.prototype;const oldProto=subClass.prototype;for(let key in subClass.prototype=new Intermediate,subClass.__parentClass=superClass,subClass.prototype._super=function(){var _superClass$prototype;this._super===subClass.prototype._super&&(this._super.__caller=this._super.caller);const classMethod=this._super.__caller;let classMethodName=classMethod.__classMethodName;if("undefined"==typeof classMethodName&&(subClass.prototype.constructor===classMethod&&(classMethodName="constructor",classMethod.__classMethodName=classMethodName),"undefined"==typeof classMethodName))for(let i in subClass.prototype)if(subClass.prototype[i]===classMethod){classMethodName=i,classMethod.__classMethodName=classMethodName;break}let returnValue;const superMethod=null===(_superClass$prototype=superClass.prototype)||void 0===_superClass$prototype?void 0:_superClass$prototype[classMethodName];if("undefined"!=typeof classMethodName&&subClass.prototype.hasOwnProperty(classMethodName)&&subClass.prototype[classMethodName]===classMethod&&"function"==typeof superMethod&&classMethod!==superMethod)superMethod.__classMethodName=classMethodName,returnValue=superMethod.apply(this,arguments);else if(superClass.prototype._super)returnValue=superClass.prototype._super.apply(this,arguments);else throw new Error("Call to super method failed. The method does not override any parent method.");return returnValue},oldProto)subClass.prototype[key]=oldProto[key]};function ClassExtend(subClass,superClass){aleks.extend(subClass,superClass)}aleks.deepEquals=function(){function deepEquals(value1,value2){if(__isSimpleValue(value1)||__isSimpleValue(value2))return value1===value2;if(Array.isArray(value1)&&Array.isArray(value2)){if(value1.length==value2.length){for(var i=0;i<value1.length;i++)if(!deepEquals(value1[i],value2[i]))return!1;return!0}return!1}if("object"==typeof value1&&"object"==typeof value2){var nativeClass1=__getNativeClassName(value1),nativeClass2=__getNativeClassName(value2);if(nativeClass1==nativeClass2){if("String"==nativeClass1||"Number"==nativeClass1||"Boolean"==nativeClass1||"Date"==nativeClass1)return __getValueForNativeClass[nativeClass1].call(value1)==__getValueForNativeClass[nativeClass2].call(value2);if("function"==typeof value1.equals)return value1.equals(value2);if("Object"==nativeClass1){var keysValue1=Object.keys(value1),keysValue2=Object.keys(value2);if(keysValue1.length==keysValue2.length){for(var i=0;i<keysValue1.length;i++)if(!deepEquals(value1[keysValue1[i]],value2[keysValue1[i]]))return!1;return!0}return!1}return!1}return!1}return!1}var __toString=Object.prototype.toString,__isSimpleValue=function(value){var valueType=typeof value;return"boolean"==valueType||"number"===valueType||"string"===valueType||null===value||value===void 0},__getNativeClassName=function(){var regexp=/\[object (\w+)\]/;return function(object){var regexpMatch=__toString.call(object).match(regexp);return regexpMatch?regexpMatch[1]:null}}(),__getValueForNativeClass={String:String.prototype.valueOf,Number:Number.prototype.valueOf,Boolean:Boolean.prototype.valueOf,Date:Date.prototype.valueOf};return deepEquals}(),global.getObjectProperty=function(object){for(var currentNode=object,currentKeyIndex=1;currentKeyIndex<arguments.length;)if(null!=currentNode&&"object"==typeof currentNode){var currentKey=arguments[currentKeyIndex];if(Array.isArray(currentNode)){var length=currentNode.length,currentKeyAsInt=0|currentKey;if(!(currentKeyAsInt==currentKey))return null;else if(0>currentKeyAsInt&&-length<=currentKeyAsInt)currentNode=currentNode[length+currentKeyAsInt];else if(0<=currentKeyAsInt&&currentKeyAsInt<length)currentNode=currentNode[currentKeyAsInt];else return null}else{var nextNode=currentNode[currentKey];currentNode=null==nextNode?null:nextNode}currentKeyIndex++}else return null;return currentNode},aleks.getReverseLookupTable=object=>{const reversedObject={};return Object.keys(object).filter(key=>"object"!=typeof object[key]&&"function"!=typeof object[key]).forEach(key=>{reversedObject[object[key]]=key}),reversedObject},aleks.cleanFloatSum=function(num){var regex=/^\d*\.\d{3,}$/g;return regex.test(num)?parseFloat(num.toFixed(2)):num},aleks.sanitizeText=function(){let text=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",keepCodePoint=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];return text.replaceAll(/[\u{10000}-\u{FFFFF}]/ug,c=>keepCodePoint?`&#${c.codePointAt(0)};`:"")},aleks.getCircularReplacer=()=>{const seen=new WeakSet;return(key,value)=>{if("object"==typeof value&&null!==value){if(seen.has(value))return;seen.add(value)}return value}},aleks.throttle=function(func){let throttleTimeout,delay=1<arguments.length&&arguments[1]!==void 0?arguments[1]:100;return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];throttleTimeout||(throttleTimeout=setTimeout(()=>{func.apply(_this,args),clearTimeout(throttleTimeout),throttleTimeout=null},delay))}},aleks.findPathToValue=function(object,searchedKey,value){let path=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[];if("object"!=typeof object||null===object)return[];if(object[searchedKey]===value)return[...path,searchedKey];let matchingPath=[];for(const currentKey of Object.keys(object))if(matchingPath=aleks.findPathToValue(object[currentKey],searchedKey,value,[...path,currentKey]),matchingPath.length)break;return matchingPath},aleks.setValueFromPath=(object,path,value)=>{const lengthPath=path.length;let currentPath=object;for(let j=0;j<lengthPath-1;j++)currentPath=currentPath[path[j]];return currentPath[path[lengthPath-1]]=value,object},aleks.validation={},aleks.validation.validate=function(){let value=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",type=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"",options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};const{allowNegative,digitsAfterDecimal}=options,result={isValid:!0,sanitizedValue:value},sanitizeValueToNumber=()=>{const isInteger="integer"===type,isReal="real"===type;let currDigitsAfterDecimal=0,hasDecimal=!1,hasMinus=!1,hasNum=!1,sanitizedValue="";if(value)for(const char of value.toString())!allowNegative||"-"!==char||hasMinus||hasNum?isReal&&[",","."].includes(char)&&!hasDecimal?(sanitizedValue+=char,hasDecimal=!0):/\d/.test(char)&&(isInteger||isReal&&digitsAfterDecimal&&currDigitsAfterDecimal<digitsAfterDecimal)&&(sanitizedValue+=char,hasNum=!0,currDigitsAfterDecimal+=hasDecimal?1:0):(sanitizedValue+=char,hasMinus=!0);return sanitizedValue};switch(type){case"integer":{const startsWith=allowNegative?"^-?":"^";result.isValid=new RegExp(startsWith+"\\d*$","g").test(value),result.sanitizedValue=result.isValid?value:sanitizeValueToNumber();break}case"real":{const startsWith=allowNegative?"^-?":"^",endsWith=digitsAfterDecimal?`{0,${digitsAfterDecimal}}$`:"*$";result.isValid=new RegExp(startsWith+"\\d*[.,]?\\d"+endsWith,"g").test(value),result.sanitizedValue=result.isValid?value:sanitizeValueToNumber();break}case"letters":{const LETTERS="a-z";result.isValid=/^[a-z]*$/gi.test(value),result.sanitizedValue=value.replace(/[^a-z]/gi,"");break}case"personName":{const RESTRICTED_CHARACTERS=",;:!.()@*&#%^+<=>~$",sanitizedName=value.replace(/[,;:!.()@*&#%^+<=>~$]/g,"");result.isValid=/^[^,;:!.()@*&#%^+<=>~$]*$/g.test(value),result.sanitizedValue=sanitizedName.charAt(0).toUpperCase()+sanitizedName.slice(1);break}}return result},aleks.validation.getHTMLParsingErrors=function(){function getHTMLParsingErrors(originalHtml){let html=originalHtml.replace(/\r\n|\n|\r/gm,"");const stack=[];let i=0,loopIndex=0;for(;i<html.length&&loopIndex<__MAX_CHARACTERS;){if("<"===html[i]&&"/"===html[i+1]){let index=i;for(;">"!==html[index]&&loopIndex<__MAX_CHARACTERS;)index++,loopIndex++;const closingTag=html.substring(i+2,index).trim();if(__EXCEPTION_TAGS.includes(closingTag)){i++;continue}const poppedValue=stack.pop();if(poppedValue!==closingTag)return stack.push(poppedValue),{tagStack:stack,firstMismatchTag:closingTag,html:__escapeHTML(html)}}else if("<"===html[i]&&"'"!==html[i+1]){let index=i;for(;" "!==html[index]&&">"!==html[index]&&loopIndex<__MAX_CHARACTERS;)index++,loopIndex++;const tag=html.substring(i+1,index).trim().replace(/\//g,""),preString=html.substring(i-9,i).trim(),test=preString.match(new RegExp("\\\\(?:"+__ALLOWED_SUBSTRINGS.join("|")+")"));-1===__EXCEPTION_TAGS.indexOf(tag)&&!test&&stack.push(tag)}i++,loopIndex++}return loopIndex>=__MAX_CHARACTERS&&stack.push("HTML too long"),0===stack.length?null:{tagStack:stack,firstMismatchTag:null,html:__escapeHTML(html)}}const __EXCEPTION_TAGS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","xlist","xdecimal","xdigit","xdigit2"],__MAX_CHARACTERS=15e4,__ALLOWED_SUBSTRINGS=["enclose","style","over","under","editbox","rounding","integral","evaluation"],__escapeHTML=function(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};return getHTMLParsingErrors}(),aleks.appContext={};{const AppNames={ADVENTURE:"ALEKS Adventure",IM:"Instructor Module",SM:"Student Module",STM:"Simplified Teacher Module",UNKNOWN:"Unknown"};aleks.appContext.app={...AppNames,__app:AppNames.UNKNOWN,get(){return this.__app},set(app){const allowedNames=Object.values(AppNames);if(allowedNames.includes(app))this.__app=app;else throw new TypeError(`aleks.appContext.app.set: Invalid app: ${app}`)},is(app){return this.__app===app}}}