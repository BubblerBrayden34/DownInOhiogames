/**
 * Copyright © 2024 UC Regents and ALEKS Corporation
 * ALEKS® is a registered trademark of ALEKS Corporation.
**/
this.aleks=this.aleks||{},aleks.core=aleks.core||{},aleks.core.ui=aleks.core.ui||{},aleks.core.ui.addCloseAction=function(_ref){let{closeButton,actionTarget,actionType,callback,callbackContext,onBeforeCallback,preventClose}=_ref;const closeHandler=e=>{!preventClose&&(actionTarget.setVisibility?(closeButton.blur(),actionTarget.setVisibility(!1)):actionTarget.setStyle({display:"none"}),"remove"===actionType&&(actionTarget.remove?actionTarget.remove():actionTarget.getParent().removeChild(actionTarget))),callback&&((null===e||void 0===e?void 0:e.keyCode)===dom.KeyCode.ESC&&callback.triggerOnEsc||(null===e||void 0===e?void 0:e.keyCode)!==dom.KeyCode.ESC)&&callback.apply(callbackContext||actionTarget)};return dom.Timer.schedule(new dom.Task(function(){var _actionTarget$addEscK;!actionTarget.escKeyListener&&(null===(_actionTarget$addEscK=actionTarget.addEscKeyListener)||void 0===_actionTarget$addEscK?void 0:_actionTarget$addEscK.call(actionTarget,e=>{e.keyCode===dom.KeyCode.ESC&&closeHandler(e)}))},this),1),closeButton.addEventListener("click",function(){if("function"==typeof onBeforeCallback){const run=onBeforeCallback.apply(callbackContext||actionTarget);run&&closeHandler()}else closeHandler()}),closeButton.addEventListener("keydown",e=>{var _closeOptions$customK;const closeOptions=null===actionTarget||void 0===actionTarget?void 0:actionTarget.getButtonsOptions().close,availableButtons=null===actionTarget||void 0===actionTarget?void 0:actionTarget.getButtons();!e.shiftKey&&null!==closeOptions&&void 0!==closeOptions&&null!==(_closeOptions$customK=closeOptions.customKeycode)&&void 0!==_closeOptions$customK&&_closeOptions$customK.has(e.keyCode)&&closeButton===availableButtons.close&&closeHandler()}),closeHandler},aleks.core.ui.idGenerator=function*(prefix){for(let id=0;!0;)yield prefix+id++},function(){aleks.core.ui.NewButton=function(){let options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this._super(),this.__b_button=new aleks.core.ui.Element("button"),this.__b_button.setType("button"),!global.useAccessibility&&this.__b_button.setStyle({"user-select":"none"}),!options.isNewButton&&(this.__b_button.setStyle({position:"relative",border:"0px solid transparent",background:"none",padding:"0px",margin:"0px",outline:"none",verticalAlign:"middle","touch-callout":"none"}),this._handleStyles("focusedColor",function(cssCamelCaseProperty,cssValue){this.__currentFocusedColor=cssValue})),this.__b_button.addEventListener("click",function(event){!this.getState("disabled")&&this.dispatchEvent("click",event)},this),this.addStateEventListener("in","disabled",function(){this.__b_button.setStyle({cursor:""}),this.__b_button.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this.__b_button.setStyle({cursor:"pointer"}),this.__b_button.setDisabled(!1)},this),this._setElement(this.__b_button),this._setChildrenContainerElement(this.__b_button),this.setAriaStyle({tabindex:""})},aleks.extend(aleks.core.ui.NewButton,aleks.core.ui.AbstractControl),aleks.core.ui.NewButton.prototype.setName=function(name){this.__b_button.setName(name)},aleks.core.ui.NewButton.prototype.setValue=function(name){this.__b_button.setName(name)},aleks.core.ui.NewButton.prototype.getInputElement=function(){return this.__b_button},aleks.core.ui.NewButton.prototype.getContentContainerContainer=function(){return this.__b_button}}(),function(){var _setCSSPosition=function(cssCamelCaseProperty,cssValue){""==cssValue||"static"==cssValue?this.__b_container.setStyle({position:"relative"}):this.__b_container.setStyle({position:cssValue})},_setCSSDimension=function(cssCamelCaseProperty,cssValue){if(""==cssValue||"auto"==cssValue){var style={};style[cssCamelCaseProperty]="auto",this.__b_container.setStyle(style),this.__b_contentContainer.setStyle(style),this.__b_contentContainerContainer.setStyle(style)}else{var outerStyle={};outerStyle[cssCamelCaseProperty]=cssValue;var innerStyle={};innerStyle[cssCamelCaseProperty]="100%",this.__b_container.setStyle(outerStyle),this.__b_contentContainer.setStyle(innerStyle),this.__b_contentContainerContainer.setStyle(innerStyle)}},_setCSSDisplay=function(cssCamelCaseProperty,cssValue){"none"==cssValue?this.__b_container.setStyle({display:"none"}):this.__b_container.setStyle({display:"inline-block"})},_buttonInputClickHandler=function(event){!this.getState("disabled")&&this.dispatchEvent("click",event)};aleks.core.ui.Button=function(){this._super(),this.__b_container=new aleks.core.ui.Element("span"),this.__b_container.setStyle({display:"inline-block",position:"relative",verticalAlign:"middle",width:"auto",height:"auto",touchCallout:"none"}),!global.useAccessibility&&this.__b_container.setStyle({userSelect:"none"}),this.__b_contentContainerContainer=new aleks.core.ui.Element("div"),this.__b_contentContainerContainer.setStyle({float:"left",clear:"both",position:"relative",width:"auto",height:"auto"}),this.__b_input=new aleks.core.ui.Element("input"),this.__b_input.setType("button"),this.__b_input.setStyle({position:"absolute",left:"0px",top:"0px",width:"1px",height:"1px",border:"0px solid transparent",background:"none",padding:"0px",margin:"0px",outline:"none",overflow:"hidden",fontSize:"0px",pointerEvents:"none"}),this.__b_input.addEventListener("click",_buttonInputClickHandler,this),this.__b_contentContainerContainer.appendChild(this.__b_input),this.__b_contentContainer=new aleks.core.ui.Element("div"),this.__b_contentContainer.setStyle({float:"left",clear:"both",position:"relative",width:"auto",height:"auto"}),this.__b_contentContainerContainer.appendChild(this.__b_contentContainer),this.__b_container.appendChild(this.__b_contentContainerContainer),this.addStateEventListener("in","disabled",function(){this.__b_container.setStyle({cursor:""}),this.__b_input.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this.__b_container.setStyle({cursor:"pointer"}),this.__b_input.setDisabled(!1)},this),this._handleStyles("position",_setCSSPosition),this._handleStyles("width","height",_setCSSDimension),this._handleStyles("display",_setCSSDisplay),this._handleStyles("focusedColor",function(cssCamelCaseProperty,cssValue){this.__currentFocusedColor=cssValue}),this.__ariaRoleType="button",this._setElement(this.__b_container),this._setChildrenContainerElement(this.__b_contentContainer),this._setKeyEventTarget(this.__b_input),this.setAriaStyle({tabindex:""})},aleks.extend(aleks.core.ui.Button,aleks.core.ui.AbstractControl),aleks.core.ui.Button.prototype.setAriaRoleType=function(role){this.setAriaStyle({role}),this.__ariaRoleType=role},aleks.core.ui.Button.prototype.setName=function(name){this.__b_input.setName(name)},aleks.core.ui.Button.prototype.setValue=function(name){this.__b_input.setName(name)},aleks.core.ui.Button.prototype.getContentContainer=function(){return this.__b_contentContainer},aleks.core.ui.Button.prototype.getContentContainerContainer=function(){return this.__b_contentContainerContainer},aleks.core.ui.Button.prototype.getInputElement=function(){return this.__b_input},aleks.core.ui.Button.prototype.getSpanContainer=function(){return this.__b_container}}(),function(){var _setCSSPosition=function(cssCamelCaseProperty,cssValue){""==cssValue||"static"==cssValue?this.__tcb_container.setStyle({position:"relative"}):this.__tcb_container.setStyle({position:cssValue})},_buttonInputClickHandler=function(event){!this.getState("disabled")&&this.dispatchEvent("click",event)};aleks.core.ui.TableCellButton=function(){this._super(),this.__tcb_container=new aleks.core.ui.Element("td"),this.__tcb_container.setStyle({position:"relative",verticalAlign:"middle",textAlign:"center",fontSize:"1em",userSelect:"none",touchCallout:"none"});var buttonInput=new aleks.core.ui.Element("input");buttonInput.setType("button"),buttonInput.setStyle({position:"absolute",left:"0px",top:"0px",width:"1px",height:"1px",border:"0px solid transparent",background:"none",padding:"0px",margin:"0px",outline:"none",overflow:"hidden",fontSize:"0px",pointerEvents:"none"}),buttonInput.addEventListener("click",_buttonInputClickHandler,this),this.__tcb_container.appendChild(buttonInput),this.addStateEventListener("in","disabled",function(){this.__tcb_container.setStyle({cursor:""}),buttonInput.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this.__tcb_container.setStyle({cursor:"pointer"}),buttonInput.setDisabled(!1)},this),this._handleStyles("position",_setCSSPosition),this._setElement(this.__tcb_container),this._setChildrenContainerElement(this.__tcb_container),this._setKeyEventTarget(buttonInput)},aleks.extend(aleks.core.ui.TableCellButton,aleks.core.ui.AbstractControl)}(),function(){aleks.core.ui.Link=function(){this._super(),this.__lnk_url=null,this.__lnk_disabledWanted=!1,this.__lnk_anchorElement=new aleks.core.ui.Element("a"),this.addStateEventListener("in","disabled",function(){this.__lnk_anchorElement.setStyle({cursor:""}),this.__lnk_anchorElement.setHref(null)},this),this.addStateEventListener("out","disabled",function(){null===this.__lnk_url?this.setState("disabled",!0):(this.__lnk_anchorElement.setStyle({cursor:"pointer"}),this.__lnk_anchorElement.setHref(this.__lnk_url))},this),this._setElement(this.__lnk_anchorElement),this._setChildrenContainerElement(this.__lnk_anchorElement)},aleks.extend(aleks.core.ui.Link,aleks.core.ui.AbstractControl),aleks.core.ui.Link.prototype.setDisabled=function(value){this.__lnk_disabledWanted=!!value,this.setState("disabled",this.__lnk_disabledWanted)},aleks.core.ui.Link.prototype.getHref=function(){return this.__lnk_url},aleks.core.ui.Link.prototype.setHref=function(href,reset){this.__lnk_url=null==href||"undefined"==typeof href?null:href+"",this.setState("disabled",this.__lnk_disabledWanted||null===this.__lnk_url),reset&&this.__lnk_anchorElement.setHref(this.__lnk_url)},aleks.core.ui.Link.prototype.setTarget=function(target){this.__lnk_anchorElement.setTarget(target)}}(),function(){aleks.core.ui.TextLink=function(text,href){this._super(),this.__tlnk_textNode=new aleks.core.ui.TextNode(""),this.setText(text),this.setHref(href),this.appendChild(this.__tlnk_textNode),this.addStateEventListener("in","pressed",()=>this.addClass("active")),this.addStateEventListener("out","pressed",()=>this.removeClass("active"))},aleks.extend(aleks.core.ui.TextLink,aleks.core.ui.Link),aleks.core.ui.TextLink.prototype.getText=function(){return this.__tlnk_textNode.getData()},aleks.core.ui.TextLink.prototype.setText=function(text){this.__tlnk_textNode.setData(null==text||"undefined"==typeof text?"":text+"")}}(),function(){var _LayoutCellStyler=function(){this.__lcs_styleString=""};_LayoutCellStyler.prototype.setStyle=function(style){var element=document.createElement("td");element.style.cssText=this.__lcs_styleString,dom.Element.setStyle(element,style);var newStyleString=element.style.cssText;return newStyleString!=this.__lcs_styleString&&(this.__lcs_styleString=newStyleString,!0)},_LayoutCellStyler.prototype._getStyleString=function(){return this.__lcs_styleString};var _LayoutCellCollection=function(){this.__lcc_cells=[],this.__lcc_styler=new _LayoutCellStyler};_LayoutCellCollection.prototype.setStyle=function(style){this.__lcc_styler.setStyle(style)&&this._applyStyle()},_LayoutCellCollection.prototype._getStyleString=function(){return this.__lcc_styler._getStyleString()},_LayoutCellCollection.prototype._applyStyle=function(){for(var cell,i=this.__lcc_cells.length-1;0<=i;i--)cell=this.__lcc_cells[i],null!==cell&&cell._updateStyle()},_LayoutCellCollection.prototype._cell=function(index){return this.__lcc_cells[index]},_LayoutCellCollection.prototype._resize=function(length){if(this.__lcc_cells.length>length)this.__lcc_cells.splice(length,this.__lcc_cells.length-length);else if(this.__lcc_cells.length<length)for(var i=this.__lcc_cells.length;i<length;i++)this.__lcc_cells.push(null)},_LayoutCellCollection.prototype._setCellAt=function(index,layoutCell){this.__lcc_cells[index]=layoutCell},_LayoutCellCollection.prototype._insertCellAt=function(index,layoutCell){this.__lcc_cells.splice(index,0,layoutCell)},_LayoutCellCollection.prototype._removeCellAt=function(index){this.__lcc_cells.splice(index,1)},_LayoutCellCollection.prototype._addCell=function(layoutCell){this.__lcc_cells.push(layoutCell)},_LayoutCellCollection.prototype._removeCell=function(layoutCell){for(var i=0,length=this.__lcc_cells.length;i<length;)this.__lcc_cells[i]===layoutCell?(this.__lcc_cells.splice(i,1),length--):i++};var _LayoutColumn=function(){this._super()};aleks.extend(_LayoutColumn,_LayoutCellCollection),_LayoutColumn.prototype.row=function(index){return this._cell(index)};var _LayoutRow=function(){this._super()};aleks.extend(_LayoutRow,_LayoutCellCollection),_LayoutRow.prototype.column=function(index){return this._cell(index)};var _LayoutCell=function(layoutTable,layoutColumn,layoutRow,cell,options){this._super(),this.__lc_cell=cell,this.__lc_styler=new _LayoutCellStyler,this.__lc_layoutTable=layoutTable,this.__lc_layoutColumn=layoutColumn,this.__lc_layoutRow=layoutRow,this.__options=options||{},this.__options.noDefaultStyle?this._handleStyles("align","valign",this._updateAlignment):this._updateStyle(),this._setElement(this.__lc_cell),this._setChildrenContainerElement(this.__lc_cell)};aleks.extend(_LayoutCell,aleks.core.ui.AbstractElement),_LayoutCell.prototype.setStyle=function(style){this.__options.noDefaultStyle?this._super.apply(this,arguments):this.__lc_styler.setStyle(style)&&this._updateStyle()},_LayoutCell.prototype._updateStyle=function(){this.__lc_cell.style.cssText="vertical-align:baseline;text-align:left;font-size:1em;"+this.__lc_layoutTable._getDefaultCellStyleString()+";"+this.__lc_layoutColumn._getStyleString()+";"+this.__lc_layoutRow._getStyleString()+";"+this.__lc_styler._getStyleString()+";"},_LayoutCell.prototype._updateAlignment=function(cssCamelCaseProperty,cssValue){this.__lc_cell.setAttribute(cssCamelCaseProperty,cssValue)},aleks.core.ui.TableMatrix=function(nbRows,nbColumns){this._super(),this._nbRows=nbRows,this._nbColumns=nbColumns,this._table=new aleks.core.ui.Element("table"),this._tr={},this._td={},this._defaultCellStyle=null,this._setElement(this._table),this._setChildrenContainerElement(this._table),this._build()},aleks.core.ui.TableMatrix.prototype.cell=function(rowIdx,colIdx){return this._td[rowIdx][colIdx]},aleks.core.ui.TableMatrix.prototype.cells=function(rowIdx){return this._td[rowIdx]},aleks.core.ui.TableMatrix.prototype.row=function(rowIdx){return this._tr[rowIdx]},aleks.core.ui.TableMatrix.prototype.addRow=function(){this._buildRow(this._nbRows),this._drawRow(this._nbRows),this._nbRows++},aleks.core.ui.TableMatrix.prototype._buildCell=function(rowIdx,colIdx){if(this._td[rowIdx]&&this._td[rowIdx][colIdx])throw new Error("Cell "+rowIdx+"/"+colIdx+" already exists");this._td[rowIdx][colIdx]=new aleks.core.ui.Element("td")},aleks.core.ui.TableMatrix.prototype._buildRow=function(rowIdx){if(this._tr[rowIdx]||this._td[rowIdx])throw new Error("Row "+rowIdx+" already exists");this._tr[rowIdx]=new aleks.core.ui.Element("tr"),this._td[rowIdx]={};for(var colIdx=0;colIdx<this._nbColumns;colIdx++)this._buildCell(rowIdx,colIdx)},aleks.core.ui.TableMatrix.prototype._build=function(){for(var rowIdx=0;rowIdx<this._nbRows;rowIdx++)this._buildRow(rowIdx);this._drawRows()},aleks.core.ui.TableMatrix.prototype._drawRow=function(rowIdx){var row=this.row(rowIdx);row.removeAllChildren();for(var colIdx=0;colIdx<this._nbColumns;colIdx++)row.appendChild(this.cell(rowIdx,colIdx));this.appendChild(this.row(rowIdx))},aleks.core.ui.TableMatrix.prototype._drawRows=function(){this.removeAllChildren();for(var rowIdx=0;rowIdx<this._nbRows;rowIdx++)this._drawRow(rowIdx)},aleks.core.ui.TableMatrix.prototype._drawTable=function(){this.removeAllChildren();for(var rowIdx=0;rowIdx<this._nbRows;rowIdx++)this.appendChild(this.row(rowIdx))},aleks.core.ui.TableMatrix.prototype.sortRows=function(indexes){var newRows={},newCells={};indexes.forEach(function(prev,idx){newRows[idx]=this.row(prev),newCells[idx]=this.cells(prev)},this),this._tr=newRows,this._td=newCells,this._drawTable()},aleks.core.ui.TableMatrix.prototype.setDefaultCellStyle=function(style){for(var rowIdx in this._defaultCellStyle=style,this._td)for(var colIdx in this._td[rowIdx])this.cell(rowIdx,colIdx).setStyle(this._defaultCellStyle)},aleks.extend(aleks.core.ui.TableMatrix,aleks.core.ui.AbstractElement),aleks.core.ui.LayoutTable=function(nbRows,nbColumns,options,headColumns){this._super(),this.__lt_tr=[],this.__lt_rows=[],this.__lt_cols=[],this.__lt_colHeaders=this._initColHeaders(headColumns),this.__lt_colHeaders_cols=[],this.__lt_cells=new _LayoutCellCollection,this.__options=options||{},this.__lt_tableLayout=document.createElement("table"),this._setCSSFontSize(),this.__lt_tableLayout.cellSpacing=0,this.__lt_tableLayout.cellPadding=0,this.setDimensions(nbRows,nbColumns),this._setTableHeaders(headColumns),this._handleStyles("fontSize",this._setCSSFontSize),this._handleStyles("align","valign",this._updateAlignment),this._setElement(this.__lt_tableLayout),this.setAriaStyle({role:"presentation"})},aleks.extend(aleks.core.ui.LayoutTable,aleks.core.ui.AbstractElement),aleks.core.ui.LayoutTable.prototype._getDefaultCellStyleString=function(){return this.__lt_cells._getStyleString()},aleks.core.ui.LayoutTable.prototype._setCSSFontSize=function(cssCamelCaseProperty,cssValue){cssValue=cssValue?cssValue+"":"1em",this.__lt_tableLayout.style.fontSize=cssValue},aleks.core.ui.LayoutTable.prototype._updateAlignment=function(cssCamelCaseProperty,cssValue){this.__lt_tableLayout.setAttribute(cssCamelCaseProperty,cssValue)},aleks.core.ui.LayoutTable.prototype.setDefaultCellStyle=function(style){this.__lt_cells.setStyle(style)},aleks.core.ui.LayoutTable.prototype._initColHeaders=function(columns){var headers=[];if(columns)for(var col=0;col<columns.length;col++)headers[col]=columns[col].id&&"string"==typeof columns[col].id?columns[col].id:"header_"+col;return headers},aleks.core.ui.LayoutTable.prototype._setTableHeaders=function(columns){if(columns)for(var htmlCell,tableHeader=this.__lt_tableLayout.createTHead(),row=tableHeader.insertRow(0),len=columns.length,col=0;col<len;col++){htmlCell=document.createElement("th"),row.appendChild(htmlCell);var columnCell=new _LayoutCell(this,col,0,htmlCell,{noDefaultStyle:this.__options.headerStyle||!0});columnCell.setAriaStyle({scope:"col"}),columnCell.setStyle(this.__options.headerStyle||{padding:"0px 15px"}),columnCell.setId(this.__lt_colHeaders[col]);var innerDiv=new aleks.core.ui.Element("div");columns[col].columnName&&"string"==typeof columns[col].columnName?innerDiv.appendChild(new aleks.core.ui.TextContainer(columns[col].columnName)):innerDiv.appendChild(columns[col]),columnCell.appendChild(innerDiv),this.__lt_colHeaders_cols.push(columnCell)}},aleks.core.ui.LayoutTable.prototype.setDimensions=function(nbRows,nbColumns){nbRows=+nbRows,nbColumns=+nbColumns,!(1<=nbRows)&&(nbRows=1),!(1<=nbColumns)&&(nbColumns=1);var previousNbRows=this.__lt_rows.length,previousNbColumns=this.__lt_cols.length;if(nbRows!=previousNbRows){for(var i=0;i<Math.min(nbColumns,previousNbColumns);i++)this.__lt_cols[i]._resize(nbRows);if(nbRows>previousNbRows)for(var row,i=previousNbRows;i<nbRows;i++){row=this.__lt_tableLayout.insertRow(-1),this.__lt_tr.push(row);var layoutRow=new _LayoutRow;layoutRow._resize(nbColumns);for(var j=0;j<Math.min(nbColumns,previousNbColumns);j++){var layoutColumn=this.__lt_cols[j],layoutCell=new _LayoutCell(this,layoutColumn,layoutRow,row.insertCell(-1),{noDefaultStyle:this.__options.noDefaultStyle});this.__lt_colHeaders[j]&&(layoutCell.getDOMElement().headers=this.__lt_colHeaders[j]),layoutRow._setCellAt(j,layoutCell),layoutColumn._setCellAt(i,layoutCell),this.__lt_cells._addCell(layoutCell)}this.__lt_rows.push(layoutRow)}else for(var layoutRow,i=previousNbRows;i>nbRows;i--){layoutRow=this.__lt_rows.pop();for(var layoutCell,j=0;j<previousNbColumns;j++)layoutCell=layoutRow.column(j),layoutCell&&this.__lt_cells._removeCell(layoutCell);this.__lt_tableLayout.deleteRow(-1)}}if(nbColumns!=previousNbColumns)if(nbColumns>previousNbColumns){for(var i=0;i<nbRows;i++)this.__lt_rows[i]._resize(nbColumns);for(var layoutColumn,i=previousNbColumns;i<nbColumns;i++){layoutColumn=new _LayoutColumn,layoutColumn._resize(nbRows);for(var j=0;j<nbRows;j++){var row=this.__lt_tableLayout.rows[j],layoutRow=this.__lt_rows[j],layoutCell=new _LayoutCell(this,layoutColumn,layoutRow,row.insertCell(-1),{noDefaultStyle:this.__options.noDefaultStyle});this.__lt_colHeaders[i]&&(layoutCell.getDOMElement().headers=this.__lt_colHeaders[i]),layoutRow._setCellAt(i,layoutCell),layoutColumn._setCellAt(j,layoutCell),this.__lt_cells._addCell(layoutCell)}this.__lt_cols.push(layoutColumn)}}else{for(var i=0;i<Math.min(nbRows,previousNbRows);i++)this.__lt_rows[i]._resize(nbColumns);for(var layoutColumn,i=previousNbColumns;i>nbColumns;i--){layoutColumn=this.__lt_cols.pop();for(var layoutCell,j=0;j<Math.min(nbRows,previousNbRows);j++)layoutCell=layoutColumn.row(j),layoutCell&&this.__lt_cells._removeCell(layoutCell),this.__lt_tableLayout.rows[j].deleteCell(-1)}}},aleks.core.ui.LayoutTable.prototype.getRowCount=function(){return this.__lt_rows.length},aleks.core.ui.LayoutTable.prototype.getColumnCount=function(){return this.__lt_cols.length},aleks.core.ui.LayoutTable.prototype.row=function(index){return this.__lt_rows[index]},aleks.core.ui.LayoutTable.prototype.getRow=function(index){return this.__lt_tr[index]},aleks.core.ui.LayoutTable.prototype.column=function(index){return this.__lt_cols[index]},aleks.core.ui.LayoutTable.prototype.cell=function(rowIndex,columnIndex){return this.__lt_rows[rowIndex].column(columnIndex)},aleks.core.ui.LayoutTable.prototype.headerColumn=function(columnIndex){return this.__lt_colHeaders_cols[columnIndex]}}(),function(){aleks.core.ui.CollapseEvent=function(type,collapsibleElement){this.__ce_type=type+"",this.__ce_collapsibleElement=collapsibleElement},aleks.core.ui.CollapseEvent.prototype.getType=function(){return this.__ce_type},aleks.core.ui.CollapseEvent.prototype.getCollapsibleElement=function(){return this.__ce_collapsibleElement}}(),function(){aleks.core.ui.AbstractCollapsibleElement=function(isCollapsed){this._super(),this.__ace_isCollapsed=!!isCollapsed},aleks.extend(aleks.core.ui.AbstractCollapsibleElement,aleks.core.ui.AbstractElement),aleks.core.ui.AbstractCollapsibleElement.prototype.toggle=function(){this.__ace_isCollapsed?this.expand.apply(this,arguments):this.collapse.apply(this,arguments)},aleks.core.ui.AbstractCollapsibleElement.prototype.expand=function(){this.__ace_isCollapsed=!1},aleks.core.ui.AbstractCollapsibleElement.prototype.collapse=function(){this.__ace_isCollapsed=!0},aleks.core.ui.AbstractCollapsibleElement.prototype.isCollapsed=function(){return this.__ace_isCollapsed},aleks.core.ui.AbstractCollapsibleElement.prototype.isExpanded=function(){return!this.__ace_isCollapsed}}(),function(){var _setTimeout=function(callbackFunction,delay,targetObject){return setTimeout(function(){callbackFunction.call(targetObject||window)},delay)},_marginAndDisplayStyle=function(marginDirection,marginValue,displayValue){var style={display:displayValue};return style["margin-"+marginDirection]=marginValue,style},_animateCollapse=function(){this.__aace_animation.animateTo(0,500,"easeInOutQuart")},_endAnimationCollapse=function(){this.__aace_contentContainer.setStyle(_marginAndDisplayStyle(this.__aace_animationDirection,"-10000px","none")),this.dispatchEvent("hasCollapsed",new aleks.core.ui.CollapseEvent("hasCollapsed",this))},_animateExpand=function(){this.__aace_animation.animateTo(1,500,"easeInOutQuart")},_endAnimationExpand=function(){this.__aace_contentContainer.setStyle(_marginAndDisplayStyle(this.__aace_animationDirection,"0px","")),this.__aace_container.setStyle({overflow:"visible"}),this.__aace_contentContainer.setStyle({overflow:"visible"}),this.dispatchEvent("hasExpanded",new aleks.core.ui.CollapseEvent("hasExpanded",this))},_animationStopHandler=function(event){var animation=event.getAnimation(),currentProgress=animation.getCurrentProgress(),destinationProgress=animation.getDestinationProgress();currentProgress===destinationProgress&&(0===currentProgress&&_endAnimationCollapse.call(this),1===currentProgress&&_endAnimationExpand.call(this))},_prepareAnimation=function(){var contentSize;if(contentSize="left"==this.__aace_animationDirection||"right"==this.__aace_animationDirection?this.__aace_contentContainer.getCurrentWidth():this.__aace_contentContainer.getCurrentHeight(),this.__aace_animationContentSize!=contentSize){var currentProgress=this.isCollapsed()?1:0;if(this.__aace_animation&&(currentProgress=this.__aace_animation.getCurrentProgress(),this.__aace_animation.stop()),1<contentSize){var startStyle={};startStyle["margin-"+this.__aace_animationDirection]=-contentSize+"px";var endStyle={};endStyle["margin-"+this.__aace_animationDirection]="0px",this.__aace_animation=new aleks.core.ui.ElementStyleTweenAnimation(this.__aace_contentContainer,startStyle,endStyle),this.__aace_animation.addEventListener("animationStop",_animationStopHandler,this),this.__aace_animation.skipTo(currentProgress)}else this.__aace_animation=null;this.__aace_animationContentSize=contentSize}},_setCSSOverflow=function(cssCamelCaseProperty,cssValue){"visible"==cssValue?(this.__aace_container.setStyle({overflow:"visible"}),this.__aace_contentContainer.setStyle({overflow:"visible"}),this.__aace_clearFloatElement.getParent()!=this.__aace_container&&this.__aace_container.appendChild(this.__aace_clearFloatElement)):(this.__aace_container.setStyle({overflow:"hidden"}),this.__aace_contentContainer.setStyle({overflow:"hidden"}),this.__aace_clearFloatElement.getParent()==this.__aace_container&&this.__aace_container.removeChild(this.__aace_clearFloatElement))};aleks.core.ui.AbstractAnimatedCollapsibleElement=function(boxType,isCollapsed,animationDirection){this._super(isCollapsed),this.__aace_animation=null,this.__aace_animationContentSize=0,this.__aace_animationTimer=null,this.__aace_animationCollapsing=!1,this.__aace_animationExpanding=!1,this.__aace_clearFloatElement=new aleks.core.ui.Element("div"),this.__aace_clearFloatElement.setStyle({clear:"both",position:"relative",width:"0px",height:"0px",lineHeight:"0px",fontSize:"0px",overflow:"hidden",zoom:"1"}),"inline-block"===boxType?(this.__aace_animationDirection="right"==animationDirection?"right":"left",this.__aace_container=new aleks.core.ui.Element("span"),this.__aace_container.setStyle({position:"relative",overflow:"hidden",display:"inline-block",zoom:"1"}),this.__aace_contentContainer=new aleks.core.ui.Element("div"),this.__aace_contentContainer.setStyle({overflow:"hidden",float:"left",zoom:"1"})):(this.__aace_animationDirection="bottom"==animationDirection?"bottom":"top",this.__aace_container=new aleks.core.ui.Element("div"),this.__aace_container.setStyle({position:"relative",overflow:"hidden",width:"100%",zoom:"1"}),this.__aace_contentContainer=new aleks.core.ui.Element("div"),this.__aace_contentContainer.setStyle({overflow:"hidden",width:"100%",float:"left",zoom:"1"})),isCollapsed?this.__aace_contentContainer.setStyle(_marginAndDisplayStyle(this.__aace_animationDirection,"-10000px","none")):this.__aace_contentContainer.setStyle(_marginAndDisplayStyle(this.__aace_animationDirection,"0px","")),this.__aace_container.appendChild(this.__aace_contentContainer),this._setElement(this.__aace_container),this._setChildrenContainerElement(this.__aace_contentContainer),this._handleStyles("overflow",_setCSSOverflow),this._handleEvents("willCollapse","hasCollapsed","willExpand","hasExpanded")},aleks.extend(aleks.core.ui.AbstractAnimatedCollapsibleElement,aleks.core.ui.AbstractCollapsibleElement),aleks.core.ui.AbstractAnimatedCollapsibleElement.prototype.collapse=function(animated){this._super(),this.__aace_container.setStyle({overflow:"hidden"}),this.__aace_contentContainer.setStyle({overflow:"hidden"}),"undefined"==typeof animated&&(animated=!0),(!this.__aace_animationCollapsing||!animated&&this.__aace_animation&&0<this.__aace_animation.getCurrentProgress())&&(this.dispatchEvent("willCollapse",new aleks.core.ui.CollapseEvent("willCollapse",this)),this.__aace_animationCollapsing=!0,this.__aace_animationExpanding=!1,animated?(this.__aace_animationTimer&&clearTimeout(this.__aace_animationTimer),this.__aace_animation&&1!=this.__aace_animation.getCurrentProgress()?this.__aace_animation?_animateCollapse.call(this):_endAnimationCollapse.call(this):this.__aace_animationTimer=_setTimeout(function(){_prepareAnimation.call(this),this.__aace_animation?_animateCollapse.call(this):_endAnimationCollapse.call(this)},0,this)):(this.__aace_animation&&this.__aace_animation.skipTo(0),_endAnimationCollapse.call(this)))},aleks.core.ui.AbstractAnimatedCollapsibleElement.prototype.expand=function(animated){this._super(),"undefined"==typeof animated&&(animated=!0),(!this.__aace_animationExpanding||!animated&&this.__aace_animation&&1>this.__aace_animation.getCurrentProgress())&&(this.dispatchEvent("willExpand",new aleks.core.ui.CollapseEvent("willExpand",this)),this.__aace_animationCollapsing=!1,this.__aace_animationExpanding=!0,animated?(this.__aace_animationTimer&&clearTimeout(this.__aace_animationTimer),this.__aace_animation&&0!=this.__aace_animation.getCurrentProgress()?this.__aace_animation?_animateExpand.call(this):_endAnimationExpand.call(this):(this.__aace_contentContainer.setStyle(_marginAndDisplayStyle(this.__aace_animationDirection,"-10000px","")),this.__aace_animationTimer=_setTimeout(function(){_prepareAnimation.call(this),this.__aace_animation?_animateExpand.call(this):_endAnimationExpand.call(this)},0,this))):(this.__aace_animation&&this.__aace_animation.skipTo(1),_endAnimationExpand.call(this)))}}(),function(){aleks.core.ui.AnimatedCollapsibleBlockElement=function(isCollapsed,animationDirection){this._super("block",isCollapsed,animationDirection)},aleks.extend(aleks.core.ui.AnimatedCollapsibleBlockElement,aleks.core.ui.AbstractAnimatedCollapsibleElement)}(),function(){aleks.core.ui.AnimatedCollapsibleInlineBlockElement=function(isCollapsed,animationDirection){this._super("inline-block",isCollapsed,animationDirection)},aleks.extend(aleks.core.ui.AnimatedCollapsibleInlineBlockElement,aleks.core.ui.AbstractAnimatedCollapsibleElement)}(),function(){const _checkboxInputChangeHandler=function(e){!this.getState("disabled")&&this.dispatchEvent("click")},_clickHandler=function(e){this.getState("disabled")||this.eventLocked?this.getInput().setChecked(this.getState("checked")):(this.eventLocked=!0,this.setIndeterminate(!1),this.setChecked(!this.getState("checked")),setTimeout(()=>this.eventLocked=!1,0))};aleks.core.ui.Checkbox=function(){this._super();var container=new aleks.core.ui.Element("span");container.setStyle({userSelect:"none",display:"inline-block",position:"relative",verticalAlign:"middle",width:"auto",height:"auto"}),this.checkboxInputContainer=new aleks.core.ui.Element("div"),this.checkboxInputContainer.setStyle({width:"100%",height:"100%",position:"relative",opacity:0,border:"none",background:"none",padding:"0px",margin:"0px","font-size":"0px",overflow:"hidden"}),this.__cb_checkboxInput=new aleks.core.ui.Element("input"),this.__cb_checkboxInput.setType("checkbox"),this.__cb_checkboxInput.setStyle({width:"100%",height:"100%",position:"relative",border:"none",background:"none",padding:"0px",margin:"0px","font-size":"0px",overflow:"hidden",appearance:"none",clip:"rect(0px 0px 1px 1px)",pointerEvents:"none"}),this.__cb_checkboxInput.addEventListener("change",_checkboxInputChangeHandler,this),this.addEventListener("click",_clickHandler,this),this.checkboxInputContainer.appendChild(this.__cb_checkboxInput),container.appendChild(this.checkboxInputContainer),this.addStateEventListener("in","checked",function(){this.__cb_checkboxInput.setChecked(!0)},this),this.addStateEventListener("out","checked",function(){this.__cb_checkboxInput.setChecked(!1)},this),this.addStateEventListener("in","disabled",function(){this.__cb_checkboxInput.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this.__cb_checkboxInput.setDisabled(!1)},this),this.addStateEventListener("in","indeterminate",function(){this.__cb_checkboxInput.setIndeterminate(!0)},this),this.addStateEventListener("out","indeterminate",function(){this.__cb_checkboxInput.setIndeterminate(!1)},this),this.addStateEventListener("in","disabled",function(){container.setStyle({cursor:""})},this),this.addStateEventListener("out","disabled",function(){container.setStyle({cursor:"pointer"})},this),this._handleStyles("display",function(cssCamelCaseProperty,cssValue){"none"==cssValue?container.setStyle({display:"none"}):container.setStyle({display:"inline-block"})}),this._handleStyles("position",function(cssCamelCaseProperty,cssValue){""==cssValue||"static"==cssValue?container.setStyle({position:"relative"}):container.setStyle({position:cssValue})}),this._setElement(container),this._setChildrenContainerElement(container),this._setKeyEventTarget(this.__cb_checkboxInput)},aleks.extend(aleks.core.ui.Checkbox,aleks.core.ui.AbstractControl),aleks.core.ui.Checkbox.prototype.getDOMInputElement=function(){return this.__cb_checkboxInput.getDOMElement()},aleks.core.ui.Checkbox.prototype.getInput=function(){return this.__cb_checkboxInput},aleks.core.ui.Checkbox.prototype.getName=function(){return this.__cb_checkboxInput.getName()},aleks.core.ui.Checkbox.prototype.setName=function(name){this.__cb_checkboxInput.setName(name)},aleks.core.ui.Checkbox.prototype.isIndeterminate=function(state){return this.getState("indeterminate")},aleks.core.ui.Checkbox.prototype.setIndeterminate=function(state){this.setState("indeterminate",!!state)},aleks.core.ui.Checkbox.prototype.isChecked=function(){return this.getState("checked")},aleks.core.ui.Checkbox.prototype.setChecked=function(state){this.setState("checked",!!state)},aleks.core.ui.Checkbox.prototype.getValue=function(){return this.__cb_checkboxInput.getValue()},aleks.core.ui.Checkbox.prototype.setValue=function(value){this.__cb_checkboxInput.setValue(value)},aleks.core.ui.Checkbox.prototype.setCheckboxList=function(list){this.__checkboxList=list},aleks.core.ui.Checkbox.prototype.getCheckboxList=function(){return this.__checkboxList},aleks.core.ui.Checkbox.prototype.setChildren=function(list){this.setState("children",!0),this.setCheckboxList(list),this.addStateEventListener("in","checked",function(){this.__checkboxList[0].setDisabled(!1),this.__checkboxList[0].setChecked(!1)},this),this.addStateEventListener("out","checked",function(){if(!this.__checkboxList[0].isChecked()){for(var check_any=!0,i=1;i<this.__checkboxList.length;i++)if(this.__checkboxList[i].isChecked()){check_any=!1;break}check_any&&this.__checkboxList[0].setChecked(!0)}},this)},aleks.core.ui.Checkbox.prototype.setParent=function(list){this.setState("parent",!0),this.setCheckboxList(list),this.addStateEventListener("in","checked",function(){this.setDisabled(!0);let elementToFocus=aleks.prevFocus,focusNextCheckbox=aleks.prevFocus===this.getDOMInputElement();for(var i=1;i<this.__checkboxList.length;i++)focusNextCheckbox&&!this.__checkboxList[i].isDisabled()&&(elementToFocus=this.__checkboxList[i],focusNextCheckbox=!1),this.__checkboxList[i].setChecked(!1);dom.Timer.schedule(new dom.Task(function(){var _elementToFocus;null===(_elementToFocus=elementToFocus)||void 0===_elementToFocus||_elementToFocus.focus()},this),1)},this),this.setChecked(!0)}}(),function(){var _clickHandler=function(){var __input=this.getInput();__input&&(__input.setIndeterminate&&__input.setIndeterminate(!1),__input.focus())};aleks.core.ui.Label=function(){this._super();var container=new aleks.core.ui.Element("label");container.setStyle({display:"inline-block",position:"relative",verticalAlign:"middle",width:"auto",height:"auto"}),this._setElement(container),this._setChildrenContainerElement(container),this.addStateEventListener("in","disabled",function(){container.setStyle({cursor:""})},this),this.addStateEventListener("out","disabled",function(){container.setStyle({cursor:"pointer"})},this),this.setTabbable(!1),this.setFocusable(!1)},aleks.extend(aleks.core.ui.Label,aleks.core.ui.AbstractControl),aleks.core.ui.Label.prototype.setInput=function(ui_input){this.__input=ui_input,this.__input.addStateEventListener("in","disabled",function(){this.setDisabled(!0)},this),this.__input.addStateEventListener("out","disabled",function(){this.setDisabled(!1)},this),this.addEventListener("click",_clickHandler,this),this.getDOMElement().setAttribute("for",this.__input.getInputId()),this.setId(`${this.__input.getInputId()}_label`)},aleks.core.ui.Label.prototype.getInput=function(){return this.__input}}(),function(){const groupNameGenerator=aleks.core.ui.idGenerator("Group_");var _radioButtonInputClickHandler=function(event){!this.getState("disabled")&&this.dispatchEvent("click",event)};const _clickHandler=function(){if("function"==typeof this._onBeforeClick){const doClick=()=>{this.setChecked(!0)};this._onBeforeClick(doClick)}else this.setChecked(!0)};aleks.core.ui.Group=function(){let options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this._super(),this.__inputType=options.inputType,this.__level=options.level||1,this.__name=options.name||groupNameGenerator.next().value,this.__groupContainer=new aleks.core.ui.Element("div"),this.__groupInputMap=new Map,this.__groupInputList=[],this.__selectAllCheckbox=null,this.__elements=[],this.__groupInputMaxSelected=options.maxSelected,this.__groupContainer.setAriaStyle({role:"radio"===this.__inputType?"radiogroup":"group"}),this._setElement(this.__groupContainer),this._setChildrenContainerElement(this.__groupContainer)},aleks.extend(aleks.core.ui.Group,aleks.core.ui.AbstractElement),aleks.core.ui.Group.prototype.addInput=function(container,groupInputObj){const groupInput=groupInputObj.component;if(container.appendChild(groupInput),groupInput.setName&&groupInput.setName(this.__name),groupInput.value&&groupInput.setValue(groupInput.value),groupInput.setInputId&&groupInput.getInputId&&!groupInput.getInputId()&&groupInput.setInputId(`${this.__name}_${this.__groupInputList.length}`),groupInputObj.label){let uiLabel=groupInputObj.label;if(!(uiLabel instanceof aleks.ui.Label)){const text=new aleks.ui.Body({level:this.__level,safe:groupInputObj.safe,text:groupInputObj.label,emphasis:groupInputObj.emphasis});uiLabel=this.getNewLabel(),uiLabel.appendChild(text)}"radio"===this.__inputType&&uiLabel.setAriaStyle({role:"presentation"}),uiLabel.setInput(groupInput),container.appendChild(uiLabel)}groupInputObj.inlineElements&&groupInputObj.inlineElements.forEach(element=>container.appendChild(element)),this.appendChild(container),this.__groupInputList.push(groupInput),this.__elements.push(groupInput),this.__groupInputMap.set(groupInput.getValue(),groupInput),this.__handleMaxSelected(groupInput),groupInputObj.isChecked&&groupInput.setChecked(!0),groupInputObj.isDisabled&&groupInput.setDisabled(!0),this.__enableAllCheckBehavior(groupInput,groupInputObj)},aleks.core.ui.Group.prototype.getElements=function(){return this.__elements},aleks.core.ui.Group.prototype.__enableAllCheckBehavior=function(groupInput,_ref2){let{isSelectAll=!1,isChecked=!1}=_ref2;if(isSelectAll){this.__selectAllCheckbox=groupInput;const selectCheckboxValue=groupInput.getValue();isChecked&&groupInput.setDisabled(!0),this.__selectAllCheckbox.addStateEventListener("in","checked",function(){this.__selectAllCheckbox.setDisabled(!0),this.__groupInputList.forEach(input=>{input.getState("checked")&&input.getValue()!==selectCheckboxValue&&input.setChecked(!1)})},this)}else groupInput.addStateEventListener("in","checked",function(){this.__selectAllCheckbox&&(this.__selectAllCheckbox.setChecked(!1),this.__selectAllCheckbox.setDisabled(!1))},this),groupInput.addStateEventListener("out","checked",function(){this.__selectAllCheckbox&&this.__groupInputList.every(input=>!input.getState("checked"))&&this.__selectAllCheckbox.setChecked(!0)},this)},aleks.core.ui.Group.prototype.getInputList=function(){return this.__groupInputList},aleks.core.ui.Group.prototype.appendChild=function(component){this._super(component),this.__elements.push(component)},aleks.core.ui.Group.prototype.getInputMap=function(){return this.__groupInputMap},aleks.core.ui.Group.prototype.getName=function(){return this.__name},aleks.core.ui.Group.prototype.isChecked=function(){return this.__groupInputList.some(groupInput=>groupInput.getState("checked"))},aleks.core.ui.Group.prototype.getChecked=function(){const checkedInputs=this.__groupInputList.filter(groupInput=>groupInput.getState("checked"));return"radio"===this.__inputType?checkedInputs[0]:checkedInputs},aleks.core.ui.Group.prototype.getInputByValue=function(value){return 0<this.__groupInputMap.size&&this.__groupInputMap.get(value)||null},aleks.core.ui.Group.prototype.setChecked=function(value){const checkInput=this.__groupInputMap.get(value);checkInput&&checkInput.setState("checked",!0)},aleks.core.ui.Group.prototype.getValue=function(value){const checkInput=this.__groupInputMap.get(value);return checkInput&&checkInput.getValue()},aleks.core.ui.Group.prototype.__handleMaxSelected=function(input){this.__groupInputMaxSelected&&input.addEventListener("click",function(){input.isChecked()&&this.getChecked().length>=this.__groupInputMaxSelected?this.disableInputMax():this.enableAllInput()},this)},aleks.core.ui.Group.prototype.enableAllInput=function(){this.__groupInputList.forEach(input=>input.setDisabled(!1))},aleks.core.ui.Group.prototype.disableInputMax=function(){this.__groupInputList.forEach(input=>!input.getState("checked")&&input.setDisabled(!0))},aleks.core.ui.Group.prototype.deselectAll=function(){this.__groupInputList.forEach(input=>{input.getState("checked")&&input.setChecked(!1)})},aleks.core.ui.RadioButton=function(){this._super(),this.flags={addFocus:!1},this._onBeforeClick=null;var container=new aleks.core.ui.Element("span");container.setStyle({userSelect:"none",display:"inline-block",position:"relative",verticalAlign:"middle",width:"auto",height:"auto"}),this.radioButtonInputContainer=new aleks.core.ui.Element("div"),this.radioButtonInputContainer.setStyle({position:"absolute",top:"1px",left:"0px",height:"1px",width:"1px",border:"none",background:"none",padding:"0px",margin:"0px",fontSize:"0px",overflow:"hidden"}),this.__rb_radioButtonInput=new aleks.core.ui.Element("input"),this.__rb_radioButtonInput.__rb_radioButtonUIElement=this,this.__rb_radioButtonInput.setType("radio"),this.__rb_radioButtonInput.setStyle({position:"absolute",top:"-1px",left:"0px",height:"1px",width:"1px",border:"none",background:"none",padding:"0px",margin:"0px",fontSize:"0px",overflow:"hidden",appearance:"none",clip:"rect(0px 0px 1px 1px)",pointerEvents:"none"}),this.__rb_radioButtonInput.addEventListener("click",_radioButtonInputClickHandler,this),this.radioButtonInputContainer.appendChild(this.__rb_radioButtonInput),container.appendChild(this.radioButtonInputContainer),this.addStateEventListener("in","checked",function(){this.__rb_radioButtonInput.setChecked(!0),this.__rb_radioButtonInput.setAriaStyle({tabindex:0,checked:!0});var inputName=this.__rb_radioButtonInput.getName();if(inputName){var listInputs,inputForm=this.__rb_radioButtonInput.getForm();if(inputForm)listInputs=inputForm.getElementsByTagName("input");else{var list1=document.getElementsByTagName("input"),list2=document.getElementsByName(inputName);listInputs=list1.length>list2.length?list2:list1}if(listInputs)for(var i=0;i<listInputs.length;i++){var currentInput=aleks.core.ui.Element.fromElement(listInputs[i]),currentRadioButton=currentInput.__rb_radioButtonUIElement;currentRadioButton&&currentRadioButton!=this&&(currentRadioButton.setChecked(currentInput.isChecked()),currentRadioButton.setAriaStyle({tabindex:-1}))}}},this),this.addStateEventListener("out","checked",function(){this.__rb_radioButtonInput.setChecked(!1),this.__rb_radioButtonInput.setAriaStyle({checked:!1})},this),this.addStateEventListener("in","disabled",function(){this.__rb_radioButtonInput.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this.__rb_radioButtonInput.setDisabled(!1)},this),this.addStateEventListener("in","disabled",function(){container.setStyle({cursor:""})},this),this.addStateEventListener("out","disabled",function(){container.setStyle({cursor:"pointer"})},this),this._handleStyles("display",function(cssCamelCaseProperty,cssValue){"none"==cssValue?container.setStyle({display:"none"}):container.setStyle({display:"inline-block"})}),this._handleStyles("position",function(cssCamelCaseProperty,cssValue){""==cssValue||"static"==cssValue?container.setStyle({position:"relative"}):container.setStyle({position:cssValue})}),this._setElement(container),this._setChildrenContainerElement(container),this._setKeyEventTarget(this.__rb_radioButtonInput),this.addEventListener("click",_clickHandler,this)},aleks.extend(aleks.core.ui.RadioButton,aleks.core.ui.AbstractControl),aleks.core.ui.RadioButton.prototype.getDOMInputElement=function(){return this.__rb_radioButtonInput.getDOMElement()},aleks.core.ui.RadioButton.prototype.getName=function(){return this.__rb_radioButtonInput.getName()},aleks.core.ui.RadioButton.prototype.setName=function(name){this.__rb_radioButtonInput.setName(name)},aleks.core.ui.RadioButton.prototype.isChecked=function(){return this.getState("checked")},aleks.core.ui.RadioButton.prototype.setChecked=function(state){this.setState("checked",!!state)},aleks.core.ui.RadioButton.prototype.getValue=function(){return this.__rb_radioButtonInput.getValue()},aleks.core.ui.RadioButton.prototype.setValue=function(value){this.__rb_radioButtonInput.setValue(value)},aleks.core.ui.RadioButton.prototype.setInputId=function(id){this.__rb_radioButtonInput.setId(id)},aleks.core.ui.RadioButton.prototype.getInput=function(){return this.__rb_radioButtonInput},aleks.core.ui.RadioButton.prototype.setOnBeforeClick=function(fctOnBeforeClick){this._onBeforeClick=fctOnBeforeClick}}(),function(){var __checkPlaceholder=function(){""==this.__ti_textInput.getValue()?this._ti_placeholderContainer.setStyle({display:""}):this._ti_placeholderContainer.setStyle({display:"none"})};aleks.core.ui.TextInput=function(){let inputType=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"text";this._super();var maxSupportedHalfHeight=250;this._container=new aleks.core.ui.Element("span"),this._container.setStyle({display:"inline-block",position:"relative",zIndex:"0",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"auto",height:"auto",userSelect:"none",verticalAlign:"middle"}),this._ti_placeholderContainer=new aleks.core.ui.Element("div"),this._ti_placeholderContainer.setStyle({position:"absolute",zIndex:"1",left:"0px",top:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this._ti_placeholder=new aleks.core.ui.Element("div"),this._ti_placeholder.setStyle({position:"absolute",left:"0px",right:"0px",height:"100%",display:"flex",alignItems:"center",borderColor:"transparent",borderTop:"none",borderBottom:"none",overflow:"hidden",textOverflow:"ellipsis"}),this._ti_placeholderTextNode=new aleks.core.ui.TextNode(""),this._ti_placeholder.appendChild(this._ti_placeholderTextNode),this._ti_placeholderContainer.appendChild(this._ti_placeholder),this._container.appendChild(this._ti_placeholderContainer),this.__ti_textInput=new aleks.core.ui.Input({inputType}),this.__ti_textInput.setStyle({position:"absolute",zIndex:"2",left:"0px",top:"0px",boxSizing:"border-box",width:"100%",height:"100%",border:"none",background:"transparent",padding:"0px",margin:"0px",fontSize:"1em",fontFamily:"inherit",fontWeight:"inherit",fontStyle:"inherit",color:"inherit",appearance:"none",boxShadow:"none"}),this.__ti_textInput.addEventListener("input",__checkPlaceholder,this),this._container.appendChild(this.__ti_textInput),this.addStateEventListener("in","disabled",function(){this._container.setStyle({cursor:""}),this.__ti_textInput.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){this._container.setStyle({cursor:"pointer"}),this.__ti_textInput.setDisabled(!1)},this),this.__feedbackMessageContainer=new aleks.core.ui.Element("div"),this._container.appendChild(this.__feedbackMessageContainer),this._handleStyles("display",function(cssCamelCaseProperty,cssValue){this._container.setStyle({display:"none"==cssValue?cssValue:"inline-block"})}),this._handleStyles("position",function(cssCamelCaseProperty,cssValue){this._container.setStyle({position:""==cssValue||"static"==cssValue?"relative":cssValue})}),this._handleStyles("padding","padding-left","padding-right","padding-top","padding-bottom",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"0px":cssValue,this.__ti_textInput.setStyle(style),this.__ti_textInput.setStyle({paddingTop:"0px",paddingBottom:"0px"}),this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({paddingTop:"0px",paddingBottom:"0px"})}),this._handleStyles("border","border-top","border-left","border-bottom","border-right",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"none":cssValue,this.__ti_textInput.setStyle(style),this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({borderColor:"transparent",borderTop:"none",borderBottom:"none"})}),this._handleStyles("border-style","border-top-style","border-left-style","border-bottom-style","border-right-style",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"none":cssValue,this.__ti_textInput.setStyle(style),this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({borderTop:"none",borderBottom:"none"})}),this._handleStyles("border-width","border-top-width","border-left-width","border-bottom-width","border-right-width",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"medium":cssValue,this.__ti_textInput.setStyle(style),this._ti_placeholder.setStyle(style)}),this._handleStyles("border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this.__ti_textInput.setStyle(style),this._ti_placeholderContainer.setStyle(style),this._container.setStyle(style)}),this._handleStyles("border-color","border-top-color","border-left-color","border-bottom-color","border-right-color",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this.__ti_textInput.setStyle(style)}),this._handleStyles("background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this._container.setStyle(style)}),this._handleStyles("placeholder-font",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty.replace(/^placeholder(\w)/,function(m,g1){return g1.toLowerCase()})]=cssValue,this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({lineHeight:2*maxSupportedHalfHeight+"px"})}),this._handleStyles("placeholder-color","placeholder-font-family","placeholder-font-size","placeholder-font-size-adjust","placeholder-font-stretch","placeholder-font-style","placeholder-font-variant","placeholder-font-weight","placeholder-text-align","placeholder-text-decoration","placeholder-text-decoration-color","placeholder-text-decoration-line","placeholder-text-decoration-style","placeholder-text-indent","placeholder-text-justify","placeholder-text-overflow","placeholder-text-shadow","placeholder-text-transform",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty.replace(/^placeholder(\w)/,function(m,g1){return g1.toLowerCase()})]=cssValue,this._ti_placeholder.setStyle(style)}),this._handleStyles("text-transform",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this.__ti_textInput.setStyle(style)}),this._setElement(this._container),this._setKeyEventTarget(this.__ti_textInput),this.setAriaStyle({role:"textbox"})},aleks.extend(aleks.core.ui.TextInput,aleks.core.ui.AbstractControl),aleks.core.ui.TextInput.prototype.setInputFeedback=function(inputError){this.__inputFeedback=inputError,this.__feedbackMessageContainer.appendChild(inputError)},aleks.core.ui.TextInput.prototype.getInput=function(){return this.__ti_textInput.getInput()},aleks.core.ui.TextInput.prototype.setInput=function(textInput){this.__ti_textInput=textInput},aleks.core.ui.TextInput.prototype.getName=function(){return this.__ti_textInput.getName()},aleks.core.ui.TextInput.prototype.setName=function(name){this.__ti_textInput.setName(name)},aleks.core.ui.TextInput.prototype.getValue=function(){return this.__ti_textInput.getValue()},aleks.core.ui.TextInput.prototype.setValue=function(value){this.__ti_textInput.setValue(value),__checkPlaceholder.call(this)},aleks.core.ui.TextInput.prototype.getPlaceholder=function(){return this._ti_placeholderTextNode.getData()},aleks.core.ui.TextInput.prototype.getPlaceholderContainer=function(){return this._ti_placeholder},aleks.core.ui.TextInput.prototype.setPlaceholder=function(placeholder){this._ti_placeholderTextNode.setData(placeholder),this._ti_placeholder.setStyle({color:smt.color.other2_1})},aleks.core.ui.TextInput.prototype.setFocusedColor=function(){},aleks.core.ui.TextInput.prototype.setPlaceholderId=function(id){this._ti_placeholder.setId(id)},aleks.core.ui.TextInput.prototype.setMaxLength=function(maxLength){this.__ti_textInput.setMaxLength(maxLength)},aleks.core.ui.TextInput.prototype.setAutocomplete=function(autocomplete){this.__ti_textInput.setAutocomplete("new-password")},aleks.core.ui.TextInput.prototype.disableAutocomplete=function(){this.__ti_textInput.disableAutocomplete()},aleks.core.ui.TextInput.prototype.setType=function(type){this.__ti_textInput.setType(type)},aleks.core.ui.TextInput.prototype.applyFilter=function(params){this.__ti_textInput.applyFilter(params)},aleks.core.ui.TextInput.prototype.setFilter=function(params){this.__ti_textInput.setFilter(params)}}(),function(){const mapType=function(type){return"number"===type?"text":type};aleks.core.ui.Input=function(){let options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this._super(),this.__options=options,this.__inputType=options.inputType||"text",this.__ti_textInput=new aleks.core.ui.Element("input"),this.__ti_textInput.setType(mapType(this.__inputType)),this.__addEventListeners(),this._setElement(this.__ti_textInput),this._setKeyEventTarget(this.__ti_textInput),this.setAriaStyle({role:"textbox"})},aleks.extend(aleks.core.ui.Input,aleks.core.ui.AbstractControl),aleks.core.ui.Input.prototype.__addEventListeners=function(){this.__options.pattern&&(this.__ti_textInput.addEventListener("change",this.__validate,this),this.__ti_textInput.addEventListener("validate",this.__validate,this))},aleks.core.ui.Input.prototype.__validate=function(){if(this.__options.pattern){const stringValue=this.getValue()+"";if(!stringValue.match(this.__options.pattern)){const fallbackValue=this.__options.fallback?this.__options.fallback(stringValue):null;null===fallbackValue?this.setValue(this.__cachedValue,{validate:!1}):this.setValue(fallbackValue,{validate:!1})}}},aleks.core.ui.Input.prototype.getInput=function(){return this.__ti_textInput},aleks.core.ui.Input.prototype.getName=function(){return this.__ti_textInput.getName()},aleks.core.ui.Input.prototype.setName=function(name){this.__ti_textInput.setName(name)},aleks.core.ui.Input.prototype.getId=function(){return this.__ti_textInput.getId()},aleks.core.ui.Input.prototype.setId=function(id){this.__ti_textInput.setId(id)},aleks.core.ui.Input.prototype.getValue=function(){return""===this.__ti_textInput.getValue()?"":"number"===this.__inputType?+aleks.Intl.formatInputNumber(this.__ti_textInput.getValue()).value:this.__ti_textInput.getValue()},aleks.core.ui.Input.prototype.getStringValue=function(){return this.__ti_textInput.getValue()},aleks.core.ui.Input.prototype.setValue=function(value){let options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},formattedValue=value;"number"===this.__inputType&&(formattedValue=null==value?null:aleks.Intl.formatInputNumber(value.toString()).formattedValue),this.__ti_textInput.setValue(formattedValue),this.applyFilter(this.__options),!1!==options.validate&&this.__validate(),this.__updateCachedValue(),options.change&&this.dispatchEvent("change")},aleks.core.ui.Input.prototype.__updateCachedValue=function(){this.__cachedValue=this.getValue()},aleks.core.ui.Input.prototype.getPlaceholder=function(){return this.__ti_textInput.getDOMElement().placeholder},aleks.core.ui.Input.prototype.setPlaceholder=function(placeholder){this.__ti_textInput.getDOMElement().placeholder=placeholder},aleks.core.ui.Input.prototype.setMaxLength=function(maxLength){this.setAriaStyle({maxlength:maxLength}),this.__ti_textInput.setMaxLength(maxLength)},aleks.core.ui.Input.prototype.setAutocomplete=function(autocomplete){this.__ti_textInput.setAutocomplete("new-password")},aleks.core.ui.Input.prototype.disableAutocomplete=function(){this.__ti_textInput.setAutocomplete("off")},aleks.core.ui.Input.prototype.setFocusedColor=function(){},aleks.core.ui.Input.prototype.setDisabled=function(state){this.__ti_textInput.setDisabled(state)},aleks.core.ui.Input.prototype.setType=function(type){"email"==type&&this.__ti_textInput.getDOMElement().validity===void 0&&(type="text"),this.__options.type=type,this.__ti_textInput.setType(type)},aleks.core.ui.Input.prototype.applyFilter=function(params){if(["integer","real"].includes(params.type)&&("number"==typeof params.min&&this.getValue()<params.min&&""!==this.getValue()&&this.setValue(params.min),"number"==typeof params.max&&this.getValue()>params.max&&""!==this.getValue()&&this.setValue(params.max),params.digitsAfterDecimal)){var _formattedValue$split;const formattedValue=aleks.Intl.formatInputNumber(this.getStringValue()).value,decimalCount=(null===(_formattedValue$split=formattedValue.split(".")[1])||void 0===_formattedValue$split?void 0:_formattedValue$split.length)||0;decimalCount>params.digitsAfterDecimal&&this.setValue(this.getValue().toFixed(params.digitsAfterDecimal))}const valueValidation=aleks.validation.validate(this.getValue(),params.type,{allowNegative:params.allowNegative,digitsAfterDecimal:params.digitsAfterDecimal});""!==this.getValue()&&!valueValidation.isValid&&this.setValue(params.default)},aleks.core.ui.Input.prototype.setFilter=function(){let params=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};params.maxlength&&this.setMaxLength(params.maxlength),params.type&&this.__ti_textInput.addEventListener("keypress",event=>{if(this.metaCommand)return;const keyString=event.key,currentValue="letters"===params.type?this.getStringValue():aleks.Intl.formatInputNumber(this.getStringValue()).value,currentInput=currentValue.slice(0,event.target.selectionStart)+keyString+currentValue.slice(event.target.selectionEnd),currentInputValidation=aleks.validation.validate(currentInput,params.type,{allowNegative:params.allowNegative,digitsAfterDecimal:params.digitsAfterDecimal});!currentInputValidation.isValid&&event.preventDefault()}),this.__ti_textInput.addEventListener("keydown",event=>{"Meta"===event.key&&(this.metaCommand=!0)}),this.__ti_textInput.addEventListener("keyup",event=>{if("Meta"===event.key&&(this.metaCommand=!1),"real"===params.type&&[".",","].includes(event.key)){const selectionStart=event.target.selectionStart,selectionEnd=event.target.selectionEnd,locale=aleks.Intl.formatInputNumber(this.getStringValue()).formattedValue;this.__ti_textInput.setValue(locale),event.target.selectionStart=selectionStart,event.target.selectionEnd=selectionEnd}}),"number"===this.__inputType&&params.type&&this.addStateEventListener("out","focused",function(){this.__cleanValueForNumber(params)},this,{callListener:!0}),this.addStateEventListener("out","focused",function(){this.applyFilter(params)})},aleks.core.ui.Input.prototype.__cleanValueForNumber=function(params){const originalValue=this.getStringValue(),formattedValue=aleks.Intl.formatInputNumber(this.getStringValue()).value;isNaN(+formattedValue)||""===this.getStringValue()?this.setValue(params.default):this.setValue(parseFloat(formattedValue)),this.getStringValue()!==originalValue&&this.dispatchEvent("change")}}(),function(){aleks.core.ui.InputFeedback=function(element,focusedState){this._super(),this.__focusedState=focusedState||"focused",this.__isVisited=!1,this.__element=element,this.__valueContainer=element.getValueContainer?element.getValueContainer():element,this.__focusContainer=element.getFocusContainer?element.getFocusContainer():element,this.__feedback=new aleks.core.ui.Element("div"),this.__feedbackIcon=new aleks.core.ui.Element("div"),this.__feedbackMessage=new aleks.ui.Body({level:2}),this.__feedbackMessage.setAriaStyle({live:"assertive"}),element.getInput&&(this.__feedbackMsgId=`inputFeedback_${Math.random().toString(36).substring(2,12)}`,this.__feedback.setId(this.__feedbackMsgId),this.__feedbackMessage.setAriaStyle({role:"alert"}),this.__feedbackMessage.setId(`errorId_${this.__feedbackMsgId}`),this.__input=element.getInput(!0),this.__input&&this.__input.setAriaStyle({errormessage:`errorId_${this.__feedbackMsgId}`})),this.__feedback.setStyle({display:"none",cursor:"default"}),this.__feedback.appendChild(this.__feedbackIcon),this.__feedback.appendChild(this.__feedbackMessage),this._setElement(this.__feedback),this.__addFeedbackEventListeners();const container=element.getContainer?element.getContainer():element;container.appendChild(this.__feedback)},aleks.extend(aleks.core.ui.InputFeedback,aleks.core.ui.AbstractElement),aleks.core.ui.InputFeedback.prototype.__addFeedbackEventListeners=function(){this.__valueContainer.addEventListener("updateFeedback",function(event){this.__isVisited=!0,!this.__element.getState(this.__focusedState)&&this.__updateFeedback(event)},this),this.__valueContainer.addEventListener("change",function(event){this.__isVisited=!0,!this.__element.getState(this.__focusedState)&&this.__updateFeedback(event)},this),this.__valueContainer.addEventListener("keypress",function(){this.onUpdateFeedback()},this),this.__focusContainer.addStateEventListener("in",this.__focusedState+" !disabled",function(){this.__isVisited=!0},this),this.__focusContainer.addStateEventListener("in","!"+this.__focusedState+" !disabled !opened",this.__updateFeedback,this)},aleks.core.ui.InputFeedback.prototype.__updateFeedback=function(event){let checkUnvisited=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];const validatorFunction=this.__element.getFeedback();!this.__valueContainer||!validatorFunction||!this.__isVisited&&!checkUnvisited||this.updateFeedback(event)},aleks.core.ui.InputFeedback.prototype.__hideFeedbackMessage=function(){this.__isVisited=!0,this.__feedback.setStyle({display:"none"}),this.__feedback.setAriaStyle({hidden:!0})},aleks.core.ui.InputFeedback.prototype.__showFeedbackMessage=function(){this.__feedback.setStyle({display:"flex"}),this.__feedback.setAriaStyle({hidden:!1})},aleks.core.ui.InputFeedback.prototype.updateFeedback=function(event){var _this$__valueContaine,_this$__valueContaine2,_ref3,_results$feedbackData;const value=null===(_this$__valueContaine=(_this$__valueContaine2=this.__valueContainer).getValue)||void 0===_this$__valueContaine?void 0:_this$__valueContaine.call(_this$__valueContaine2,{forFeedback:!0}),results=this.__element.getFeedback()(value,event,null===(_ref3=this.__element.__options||this.__element._options)||void 0===_ref3?void 0:_ref3.optionalRequired);return this.onUpdateFeedback(results),!results||(null!==(_results$feedbackData=results.feedbackData)&&void 0!==_results$feedbackData?_results$feedbackData:results.correct)},aleks.core.ui.InputFeedback.prototype.onUpdateFeedback=function(results){results&&results.text?(this.__feedbackMessage.setText(results.text),this.__showFeedbackMessage(),results.correct?this.__input&&this.__input.setAriaStyle({invalid:null,errormessage:""}):this.__input&&this.__input.setAriaStyle({errormessage:`errorId_${this.__feedbackMsgId}`})):(this.__input&&this.__input.setAriaStyle({invalid:null,errormessage:""}),this.__feedbackMessage.setText(""),this.__hideFeedbackMessage())},aleks.core.ui.InputFeedback.prototype.getFeedbackIcon=function(){return this.__feedbackIcon},aleks.core.ui.InputFeedback.prototype.getFeedbackMessage=function(){return this.__feedbackMessage},aleks.core.ui.NumberInput=function(){this._super("number"),this.setStyle({height:"16px"})},aleks.extend(aleks.core.ui.NumberInput,aleks.core.ui.TextInput),aleks.core.ui.NumberInput.onLoadInit=function(paramsFilter,styles,settings){for(var list=document.getElementsByTagName("input"),i=0;i<list.length;i++)if("number"==list[i].getAttribute("element")){var currentInput=list[i],newInput=new aleks.core.ui.NumberInput;newInput.setValue(""),currentInput.value&&newInput.setValue(currentInput.value),newInput.setName(currentInput.name);var domElementTxtInput=newInput.__ti_textInput.getDOMElement();if(currentInput.size&&newInput.setAriaStyle({size:currentInput.size}),currentInput.maxLength&&newInput.setAriaStyle({maxlength:currentInput.maxLength}),newInput.setFilter({maxlength:paramsFilter.maxlength,min:paramsFilter.min,max:paramsFilter.max,type:paramsFilter.type}),newInput.__ti_textInput.setStyle(styles),currentInput.onkeyup){var eventScript=currentInput.onkeyup;domElementTxtInput.addEventListener("keyup",eventScript)}if(currentInput.onkeypress){var eventScript=currentInput.onkeypress;domElementTxtInput.addEventListener("keypress",eventScript)}if(currentInput.oninput){var eventScript=currentInput.oninput;domElementTxtInput.addEventListener("input",eventScript)}if(currentInput.onchange){var eventScript=currentInput.onchange;domElementTxtInput.addEventListener("change",eventScript)}if(currentInput.onblur){var eventScript=currentInput.onblur;domElementTxtInput.addEventListener("blur",eventScript)}if(currentInput.onfocusout){var eventScript=currentInput.onfocusout;domElementTxtInput.addEventListener("focusout",eventScript)}if(currentInput.onpaste){var eventScript=currentInput.onpaste;domElementTxtInput.addEventListener("paste",eventScript)}currentInput.id&&(newInput.__ti_textInput.setId(currentInput.id+"_disp"),newInput.__nativeValueContainer.__ti_textInput.setId(currentInput.id)),aleks.core.ui.Element.fromElement(list[i].parentNode).replaceChild(newInput,list[i]),settings&&("number"==typeof currentInput.selectionStart||settings.selected)&&(0===currentInput.selectionStart&&currentInput.selectionEnd===currentInput.value.length||settings.selected)&&domElementTxtInput.select()}}}(),function(){const TEXT_AREA_STYLE={position:"absolute",width:"100%",height:"100%",resize:"none",zIndex:2,left:"0px",top:"0px",boxSizing:"border-box",background:"transparent",padding:"0px",margin:"0px",fontSize:"1em",fontFamily:"inherit",fontWeight:"inherit",fontStyle:"inherit",color:"inherit",appearance:"none"};aleks.core.ui.TextArea=function(){let textAreaElement=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"textarea";this._super();var container=new aleks.core.ui.Element("div");container.setStyle({display:"block",position:"relative",zIndex:"0",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"auto",height:"auto",userSelect:"none",verticalAlign:"middle"}),this._ti_placeholderContainer=new aleks.core.ui.Element("div"),this._ti_placeholderContainer.setStyle({position:"absolute",zIndex:"1",left:"0px",top:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this._ti_placeholder=new aleks.core.ui.Element("div"),this._ti_placeholder.setStyle({position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",borderColor:"transparent",borderTop:"none",borderBottom:"none",overflow:"hidden",textOverflow:"ellipsis"}),this._ti_placeholderText=new aleks.ui.Body({emphasis:"bold"}),this._ti_placeholder.appendChild(this._ti_placeholderText),this._ti_placeholderContainer.appendChild(this._ti_placeholder),container.appendChild(this._ti_placeholder),this._ti_textArea=this._getNewTextAreaElement(),this._ti_textArea.setStyle(TEXT_AREA_STYLE),container.appendChild(this._ti_textArea),this._ti_textArea.addEventListener("input",()=>this.__checkPlaceholder()),this.addStateEventListener("in","disabled",function(){container.setStyle({cursor:""}),this.setDisabled(!0)},this),this.addStateEventListener("out","disabled",function(){container.setStyle({cursor:this._getCursorStyle()}),this.setDisabled(!1)},this),this._handleStyles("display",function(cssCamelCaseProperty,cssValue){container.setStyle({display:"none"==cssValue?cssValue:"block"})}),this._handleStyles("position",function(cssCamelCaseProperty,cssValue){container.setStyle({position:""==cssValue||"static"==cssValue?"relative":cssValue})}),this._handleStyles("padding","padding-left","padding-right","padding-top","padding-bottom",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"0px":cssValue,this._ti_textArea.setStyle(style),this._ti_placeholder.setStyle(style)}),this._handleStyles("border","border-top","border-left","border-bottom","border-right",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"none":cssValue,this._ti_textArea.setStyle(style),this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({borderColor:"transparent",borderTop:"none",borderBottom:"none"})}),this._handleStyles("border-style","border-top-style","border-left-style","border-bottom-style","border-right-style",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"none":cssValue,this._ti_textArea.setStyle(style),this._ti_placeholder.setStyle(style),this._ti_placeholder.setStyle({borderTop:"none",borderBottom:"none"})}),this._handleStyles("border-width","border-top-width","border-left-width","border-bottom-width","border-right-width",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=""==cssValue?"medium":cssValue,this._ti_textArea.setStyle(style),this._ti_placeholder.setStyle(style)}),this._handleStyles("border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this._ti_textArea.setStyle(style),this._ti_placeholderContainer.setStyle(style),container.setStyle(style)}),this._handleStyles("border-color","border-top-color","border-left-color","border-bottom-color","border-right-color",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,this._ti_textArea.setStyle(style)}),this._handleStyles("background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty]=cssValue,container.setStyle(style)}),this._handleStyles("placeholder-font",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty.replace(/^placeholder(\w)/,function(m,g1){return g1.toLowerCase()})]=cssValue,this._ti_placeholder.setStyle(style)}),this._handleStyles("placeholder-color","placeholder-font-family","placeholder-font-size","placeholder-font-size-adjust","placeholder-font-stretch","placeholder-font-style","placeholder-font-variant","placeholder-font-weight","placeholder-text-align","placeholder-text-decoration","placeholder-text-decoration-color","placeholder-text-decoration-line","placeholder-text-decoration-style","placeholder-text-indent","placeholder-text-justify","placeholder-text-overflow","placeholder-text-shadow","placeholder-text-transform",function(cssCamelCaseProperty,cssValue){var style={};style[cssCamelCaseProperty.replace(/^placeholder(\w)/,function(m,g1){return g1.toLowerCase()})]=cssValue,this._ti_placeholder.setStyle(style)}),this._setElement(container),this._setKeyEventTarget(this._ti_textArea),this.setAriaStyle({role:"textbox"}),this._container=container,this._init()},aleks.extend(aleks.core.ui.TextArea,aleks.core.ui.AbstractControl),aleks.core.ui.TextArea.prototype._getNewTextAreaElement=function(){return new aleks.core.ui.Element("textarea")},aleks.core.ui.TextArea.prototype.__checkPlaceholder=function(){this.isEmpty()?this._ti_placeholder.setStyle({display:""}):this._ti_placeholder.setStyle({display:"none"})},aleks.core.ui.TextArea.prototype._getCursorStyle=function(){return"pointer"},aleks.core.ui.TextArea.prototype._init=function(){this._ti_textArea.setMaxLength(5e4)},aleks.core.ui.TextArea.prototype.getValue=function(){return this._ti_textArea.getValue()},aleks.core.ui.TextArea.prototype.setValue=function(value){this._ti_textArea.setValue(value),this.__checkPlaceholder()},aleks.core.ui.TextArea.prototype.getCaretPosition=function(){return this._ti_textArea.getCaretPosition()},aleks.core.ui.TextArea.prototype.setCaretPosition=function(position){this._ti_textArea.setCaretPosition(position)},aleks.core.ui.TextArea.prototype.getContainer=function(){return this._container},aleks.core.ui.TextArea.prototype.getPlaceholder=function(){return this._ti_placeholderText.getText()},aleks.core.ui.TextArea.prototype.setPlaceholder=function(placeholder){this._ti_placeholderText.setText(placeholder),this._ti_placeholderText.setStyle({opacity:.4})},aleks.core.ui.TextArea.prototype.getMaxLength=function(){return this._ti_textArea.getMaxLength()},aleks.core.ui.TextArea.prototype.setMaxLength=function(value){this._ti_textArea.setMaxLength(value)},aleks.core.ui.TextArea.prototype.setDisabled=function(value){this._ti_textArea.setDisabled(value)},aleks.core.ui.TextArea.prototype.isReadOnly=function(){return this._ti_textArea.isReadOnly()},aleks.core.ui.TextArea.prototype.setReadOnly=function(value){this._ti_textArea.setReadOnly(value)},aleks.core.ui.TextArea.prototype.getTextArea=function(value){return this._ti_textArea},aleks.core.ui.TextArea.prototype.isEmpty=function(value){const rawValue=null!==value&&void 0!==value?value:this.getValue({forFeedback:!0}),sanitizedValue=rawValue.replaceAll(/<([a-zA-Z]*?) style="background-color: transparent; color: inherit; font-family: inherit; font-size: 1em; font-style: inherit; font-weight: inherit;">\u200B?<\/([a-zA-Z]*?)>/g,"");return!!sanitizedValue.match(/^(<\/?div>|<br>|​|\s|\n)*$/)}}(),function(){var _protectedKey={};aleks.core.ui.Layer=function(){this._super(),this.__layer_view=null;var iframe=document.createElement("iframe");iframe.src="about:blank",iframe.allowTransparency=!0,iframe.frameBorder=0,this.__layer_iframe=aleks.core.ui.Element.fromElement(iframe),this.__layer_iframe.setStyle({position:"absolute",border:"none",left:"0px",top:"0px",width:"100%",height:"100%"});var iframeDocumentElement=new aleks.core.ui.Element("html");iframeDocumentElement.setStyle({position:"relative",overflow:"hidden",width:"100%",height:"100%",margin:"0px",padding:"0px"});var iframeHead=new aleks.core.ui.Element("head"),iframeBase=document.createElement("base");iframeHead.appendChild(iframeBase),iframeDocumentElement.appendChild(iframeHead);var iframeBody=new aleks.core.ui.Element("body");iframeBody.setStyle({position:"relative",overflow:"hidden",width:"100%",height:"100%",margin:"0px",padding:"0px",backgroundColor:"transparent"});var iframeContentContainer=new aleks.core.ui.Element("div");iframeContentContainer.setStyle({position:"relative",overflow:"auto",width:"100%",height:"100%",margin:"0px",padding:"0px"}),iframeBody.appendChild(iframeContentContainer);var iframeOverlay=new aleks.core.ui.Element("div");iframeOverlay.setStyle({position:"absolute",left:"0px",top:"0px",overflow:"hidden",width:"100%",height:"100%",margin:"0px",padding:"0px"}),iframeBody.appendChild(iframeOverlay),iframeDocumentElement.appendChild(iframeBody);var inOnLoad=!1;dom.EventTarget.addEventListener(iframe,"load",function(event){if(!inOnLoad){inOnLoad=!0,window===window.top?iframeBase.target="_top":window===iframe.contentWindow.parent?iframeBase.target="_parent":(!window.name&&(window.name="app_"+Math.floor(9e8*Math.random()+1e8).toString(36)),iframeBase.target=window.name);var iframeDocument=iframe.contentDocument||iframe.contentWindow.document;dom.Node.removeAllChildren(iframeDocument);var ownerDoctype=iframe.ownerDocument.doctype;if(ownerDoctype)iframeDocument.open(),iframeDocument.write("<!DOCTYPE "+ownerDoctype.name+(ownerDoctype.publicId?" PUBLIC \""+ownerDoctype.publicId+"\"":"")+(ownerDoctype.systemId?(ownerDoctype.publicId?"":" SYSTEM")+" \""+ownerDoctype.systemId+"\"":"")+">"),iframeDocument.close();else{var commentDoctype=iframe.ownerDocument.firstChild;commentDoctype&&8==commentDoctype.nodeType&&0===commentDoctype.nodeValue.toUpperCase().lastIndexOf("DOCTYPE",0)&&(iframeDocument.open(),iframeDocument.write("<!"+commentDoctype.nodeValue+">"),iframeDocument.close())}for(var childNodes=iframeDocument.childNodes,i=childNodes.length-1;0<i;i--)iframeDocument.removeChild(childNodes[i]);aleks.core.ui.Node.fromNode(iframeDocument).appendChild(iframeDocumentElement),dom.EventTarget.addEventListener(iframe.contentWindow,"unload",function(event){aleks.core.ui.Node.fromNode(iframeDocument).removeChild(iframeDocumentElement)}),inOnLoad=!1}},this),this.addStateEventListener("in","disabled",function(){iframeOverlay.setStyle({display:""}),iframeDocumentElement.setStyle({userSelect:"none"}),this.__layer_iframe.blur()},this),this.addStateEventListener("out","disabled",function(){iframeOverlay.setStyle({display:"none"}),iframeDocumentElement.setStyle({userSelect:""})},this),this._setElement(this.__layer_iframe),this._setChildrenContainerElement(iframeContentContainer),this._handleStyles("position","display","top","left","bottom","right","width","height","margin","margin-top","margin-right","margin-bottom","margin-left",function(){})},aleks.extend(aleks.core.ui.Layer,aleks.core.ui.AbstractControl),aleks.core.ui.Layer.prototype.getView=function(){return this.__layer_view};var _setView=function(view){view instanceof aleks.core.ui.View?(this.__layer_iframe.setStyle({display:""}),this.__layer_view=view):(this.__layer_iframe.setStyle({display:"none"}),this.__layer_view=null)};aleks.core.ui.View=function(mainLayer){this._super(),this.__view_layers=[],this.__view_layerContainer=new aleks.core.ui.Element("span"),this.__view_layerContainer.setStyle({position:"relative",display:"inline-block"}),this.__view_layerContainer.addEventListener("beforechildnoderemoved",function(event){},this),this.__view_mainLayer=mainLayer instanceof aleks.core.ui.Layer?mainLayer:new aleks.core.ui.Layer,this.addLayer(this.__view_mainLayer),this._setElement(this.__view_layerContainer),this._setChildrenContainerElement(this.__view_mainLayer)},aleks.extend(aleks.core.ui.View,aleks.core.ui.AbstractElement);var _updateLayerStates=function(){var nbLayers=this.__view_layers.length;if(0<nbLayers){for(var i=0;i<nbLayers-1;i++)this.__view_layers[i].setDisabled(!0);this.__view_layers[nbLayers-1].setDisabled(!1)}};aleks.core.ui.View.prototype.getLayers=function(){return this.__view_layers.slice()},aleks.core.ui.View.prototype.addLayer=function(layer){if(layer instanceof aleks.core.ui.Layer){var failedToRemoveFromPreviousView=!1,previousView=layer.getView();if(previousView&&!previousView.removeLayer(layer)&&(failedToRemoveFromPreviousView=!0),!failedToRemoveFromPreviousView)return _setView.call(layer,this),this.__view_layerContainer.appendChild(layer),this.__view_layers.push(layer),_updateLayerStates.call(this),!0}return!1},aleks.core.ui.View.prototype.removeLayer=function(layer){if(layer instanceof aleks.core.ui.Layer&&layer!==this.__view_mainLayer&&layer.getView()===this){_setView.call(layer,null),this.__view_layerContainer.removeChild(layer);for(var i=this.__view_layers.length;0<=i;i--)if(layer===this.__view_layers[i]){this.__view_layers.splice(i,1);break}return _updateLayerStates.call(this),!0}return!1}}(),function(){var __td_addWindowEventListeners,__td_removeWindowEventListeners,__inPressedEvent=isTablet?"touchstart":"mousedown",__dropdown_style_regexp=/dropdown-(.*)/,__selector_style_regexp=/selector-(.*)/,__mousedownDocumentHandler=function(){this.__preventCloseOptionsContainer?this.__preventCloseOptionsContainer=!1:this.setState("opened",!1)},__td_rec_addWindowEventListeners=function(currentWindow){try{this.__td_windowEventListeners.addEventListener(currentWindow,__inPressedEvent,__mousedownDocumentHandler,this,{passive:!0});for(var i=0;i<currentWindow.frames.length;i++)__td_rec_addWindowEventListeners.call(this,currentWindow.frames[i])}catch(error){}},__td_removeWindowEventListeners=function(){this.__td_windowEventListeners.removeAllEventListeners()},__td_addWindowEventListeners=function(){__td_removeWindowEventListeners.call(this),__td_rec_addWindowEventListeners.call(this,window.top)},__setInHoveredOption=function(option){this.__hoveredOption=option},__setOutHoveredOption=function(){this.__hoveredOption&&(this.__hoveredOption=null)},__setSelectedOption=function(option){this.__setSelectorDisplay(option.getSelectionContent()),this.__selectedOption=option;for(var i=0;i<this.__optionsList.length;i++)this.__optionsList[i]!==option&&this.__optionsList[i].setState("selected",!1);this.dispatchEvent("change",null),__setOutHoveredOption.call(this)},__setOptionFocused=function(option){for(var i=0;i<this.__optionsList.length;i++)this.__optionsList[i]===option?this.__optionsList[i].setState("optionFocused",!0):this.__optionsList[i].setState("optionFocused",!1)};aleks.core.ui.PulldownOption=function(){this._super(),this.setTabbable(!1),this.setAriaStyle({role:"option"}),this._selectionContent=null,this.__optionValue=null,this.addEventListener("click",function(){!this.getState("disabled")&&this.setState("selected",!0)},this),this.addStateEventListener("in","disabled",function(){this.setState("selected",!1)},this)},aleks.extend(aleks.core.ui.PulldownOption,aleks.core.ui.Button),aleks.core.ui.PulldownOption.prototype.getSelectionContent=function(){if(this._selectionContent)return this._selectionContent;throw new Error("NOT SUPPORTED YET")},aleks.core.ui.PulldownOption.prototype.setValue=function(value){this.__optionValue=value},aleks.core.ui.PulldownOption.prototype.getValue=function(){return this.__optionValue},aleks.core.ui.Pulldown=function(){this._super(),this.__optionsList=[],this.__td_windowEventListeners=new dom.EventManager,this.__preventCloseOptionsContainer=!1,this.__selectedOption=null,this.__hoveredOption=null,this._pulldownContainer=new aleks.core.ui.Element("div"),this._pulldownContainer.setStyle({position:"relative",display:"inline-block"}),this.__optionSelector=new aleks.core.ui.Button,this.__optionSelector.setTabbable(!1),this.__optionSelector.getContentContainer().setAriaStyle({live:"assertive"}),this._pulldownContainer.appendChild(this.__optionSelector),this.__optionsContainer=new aleks.core.ui.Element("div"),this.__optionsContainer.setStyle({position:"absolute",display:"none",backgroundColor:"#FFFFFF",border:"1px solid",overflowX:"hidden",overflowY:"auto",zIndex:1e5}),this._pulldownContainer.appendChild(this.__optionsContainer),this._setElement(this._pulldownContainer),this._setChildrenContainerElement(this.__optionSelector),this._handleStyles("dropdownHeight","dropdownAlign","dropdownBorder","dropdownBorderRadius","dropdownWidth",this._updateStyles),this.__optionSelector.addEventListener("click",function(event){!this.getState("disabled")&&this.setState("opened",!this.getState("opened"))},this),this.addEventListener("keydown",function(event){if(!this.getState("disabled")){var keyCode=event.keyCode||event.which,indexCurrentOption=this.__optionsList.indexOf(this.__hoveredOption||this.__selectedOption);40===keyCode||39===keyCode?this.setSelectedOption(Math.min(indexCurrentOption+1,this.__optionsList.length-1)):38===keyCode||37===keyCode?this.setSelectedOption(Math.max(indexCurrentOption-1,0)):13===keyCode||32===keyCode?this.setState("opened",!this.getState("opened")):(9===keyCode||27===keyCode)&&this.setState("opened",!1),9!=keyCode&&event.preventDefault()}},this),this.addStateEventListener("in","focused !disabled",function(){this.__optionSelector.setStyle({border:"2px solid "+this.__currentFocusedColor})},this),this.addEventListener(__inPressedEvent,function(){this.getState("opened")&&(this.__preventCloseOptionsContainer=!0)},this),this.addStateEventListener("in","opened !disabled",function(){__td_addWindowEventListeners.call(this),__setOptionFocused.call(this,this.__selectedOption),this.__optionsContainer.setStyle({display:""}),this.setAriaStyle({expanded:!0})},this),this.addStateEventListener("out","opened !disabled",function(){__td_removeWindowEventListeners.call(this),this.__optionsContainer.setStyle({display:"none"}),this.setAriaStyle({expanded:""})},this),this.addStateEventListener("in","disabled",function(){this.__optionSelector.setState("disabled",!0);for(var i=0;i<this.__optionsList.length;i++)this.__optionsList[i].setState("disabled",!0)},this),this.addStateEventListener("out","disabled",function(){this.__optionSelector.setState("disabled",!1);for(var i=0;i<this.__optionsList.length;i++)this.__optionsList[i].setState("disabled",!1)},this),this._handleStyles("focusedColor",function(cssCamelCaseProperty,cssValue){this.__currentFocusedColor=cssValue}),this.setState("opened",!1),this.setState("disabled",!0),this.setTabbable(!0),this.setAriaStyle({role:"listbox"})},aleks.extend(aleks.core.ui.Pulldown,aleks.core.ui.AbstractControl),aleks.core.ui.Pulldown.prototype.addInsetBorderFocusedStyle=function(insetStyle){this.addStateEventListener("in","focused",function(){this.__optionSelector.setStyle(insetStyle)})},aleks.core.ui.Pulldown.prototype.getOptionSelector=function(){return this.__optionSelector},aleks.core.ui.Pulldown.prototype._updateStyles=function(cssCamelCaseProperty,cssValue){__STYLE_UPDATE[cssCamelCaseProperty]&&__STYLE_UPDATE[cssCamelCaseProperty].call(this,cssValue)};var __STYLE_UPDATE={dropdownHeight:function(cssValue){this.__optionsContainer.setStyle({maxHeight:cssValue})},dropdownAlign:function(cssValue){this.__optionsContainer.setStyle({cssValue:"0px"})},dropdownBorder:function(cssValue){this.__optionsContainer.setStyle({border:cssValue})},dropdownBorderRadius:function(cssValue){this.__optionsContainer.setStyle({borderRadius:cssValue})},dropdownWidth:function(cssValue){this.__optionsContainer.setStyle({width:cssValue})}};aleks.core.ui.Pulldown.prototype.setStyle=function(style){var dropdownStyles={},selectorStyles={},remainingStyles={};for(var cssProperty in style){var dropdownStyle=cssProperty.match(__dropdown_style_regexp),selectorStyle=cssProperty.match(__selector_style_regexp);dropdownStyle?dropdownStyles[dropdownStyle[1]]=style[cssProperty]:selectorStyle?selectorStyles[selectorStyle[1]]=style[cssProperty]:remainingStyles[cssProperty]=style[cssProperty]}this.__optionsContainer.setStyle(dropdownStyles),this.__optionSelector.setStyle(selectorStyles),this._super(remainingStyles)},aleks.core.ui.Pulldown.prototype.setSelectedOption=function(index){if(!this.getState("disabled"))if(this.__optionsList[index])this.__optionsList[index].setState("selected",!0);else throw new Error("Incorrect index")},aleks.core.ui.Pulldown.prototype.setSelectedValue=function(value){if(!this.getState("disabled"))for(var option,i=0;i<this.__optionsList.length;i++)option=this.__optionsList[i],option.getValue()==value&&option.setState("selected",!0)},aleks.core.ui.Pulldown.prototype.__setSelectorDisplay=function(selectedContent){null!=selectedContent&&(this.removeAllChildren(),selectedContent&&this.appendChild(selectedContent))},aleks.core.ui.Pulldown.prototype.getSelectedValue=function(){return this.__selectedOption.getValue()},aleks.core.ui.Pulldown.prototype.setOption=function(option){if(option instanceof aleks.core.ui.PulldownOption)this.getState("disabled")&&this.setState("disabled",!1),this.__optionsList.push(option),option.addEventListener("click",function(){this.setState("opened",!1)},this),option.addStateEventListener("in","selected !disabled",function(){!this.getState("disabled")&&(__setSelectedOption.call(this,option),__setOptionFocused.call(this,option))},this),option.addStateEventListener("in","hovered !disabled",function(){!this.getState("disabled")&&(__setInHoveredOption.call(this,option),__setOptionFocused.call(this,option))},this),option.addStateEventListener("out","hovered !disabled",function(){!this.getState("disabled")&&__setOutHoveredOption.call(this)},this);else throw new Error("NOT SUPPORTED YET")},aleks.core.ui.Pulldown.prototype.addOption=function(option){if(option instanceof aleks.core.ui.PulldownOption)this.setOption(option),this.__optionsContainer.appendChild(option);else throw new Error("NOT SUPPORTED YET")}}();var __buildDropboxContainer=function(){this.__container=new aleks.core.ui.Element("div"),this.__container.setStyle({position:"absolute",display:"",overflowY:"auto","-webkit-overflow-scrolling":"touch"}),this._setElement(this.__container),this._setChildrenContainerElement(this.__container)};aleks.core.ui.DropBox=function(){this._super(),__buildDropboxContainer.call(this),this.getDOMElement().setAttribute("tabindex","-1"),this.addStateEventListener("in","opened",function(){this.show()},this),this.addStateEventListener("out","opened",function(){this.hide()},this)},aleks.extend(aleks.core.ui.DropBox,aleks.core.ui.AbstractStateElement),aleks.core.ui.DropBox.prototype.setOpened=function(state){this.setState("opened",state)},aleks.core.ui.DropBox.prototype.checkKeyPress=function(evt){},aleks.core.ui.DropBox.prototype.show=function(){this.setStyle({display:""}),this.setAriaStyle({hidden:!1})},aleks.core.ui.DropBox.prototype.hide=function(){this.setStyle({display:"none"}),this.setAriaStyle({hidden:!0})},aleks.core.ui.Listbox=function(id,settings){this._super(),this.__settings={...(settings||{})},__buildDropboxContainer.call(this),this.__selectedOption=null,this.__elements={},this.__permanentElementList=[],this.__allOptionsList=[],this.__optionsList=[],this.handleFocusChange=function(){},this.setTabbable(!0),this.setId(id),this.setAriaStyle({role:"listbox"}),this.addEventListener("keydown",this.checkKeyPress,this),this.addStateEventListener("in","opened",function(){this.show(),this.__selectedOption&&(this.getDOMElement().scrollTop=this.__selectedOption.getDOMElement().offsetTop)},this),this.addStateEventListener("out","opened",function(){this.hide()},this)},aleks.extend(aleks.core.ui.Listbox,aleks.core.ui.AbstractControl),aleks.core.ui.Listbox.prototype.clear=function(){let optionChanged;this.__selectedOption&&(this.__selectedOption=null,optionChanged=!0),this.__elements={},this.__allOptionsList=[],this.__optionsList=[],this.removeAllChildren();for(var permanentElement of this.__permanentElementList)this.addElement(permanentElement);optionChanged&&this.dispatchEvent("optionChanged")},aleks.core.ui.Listbox.prototype.show=function(){this.setStyle({display:""}),this.setAriaStyle({hidden:!1})},aleks.core.ui.Listbox.prototype.hide=function(){this.setStyle({display:"none"}),this.setAriaStyle({hidden:!0})},aleks.core.ui.Listbox.prototype.setHandleFocusChange=function(focusChangeHandler){this.handleFocusChange=focusChangeHandler};var isHidden=function(elem){return"none"===elem.getStyle("display")};aleks.core.ui.Listbox.prototype.isEmpty=function(){return this.__allOptionsList.every(isHidden)},aleks.core.ui.Listbox.prototype.isOptionVisible=function(option){return!isHidden(option)},aleks.core.ui.Listbox.prototype.addOption=function(option){let first=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];this.__allOptionsList.push(option),this.__optionsList.push(option),first?this.insertFirstChild(option):this.appendChild(option)},aleks.core.ui.Listbox.prototype.addElement=function(elementInfo){this.__elements[elementInfo.id]={id:elementInfo.id,element:elementInfo.element,rebuild:elementInfo.rebuild||function(){},display:elementInfo.display||function(){return!0}},this.appendChild(elementInfo.element)},aleks.core.ui.Listbox.prototype.addPermanentElement=function(elementInfo){this.__permanentElementList.push(elementInfo),this.addElement(elementInfo)},aleks.core.ui.Listbox.prototype.addOptionsGroupHeader=function(headerInfo){var optionsGroupHeaderInfo={id:headerInfo.id,element:headerInfo.element,rebuild:headerInfo.rebuild,display:headerInfo.display||function(options){return function(){return options.some(option=>this.isOptionVisible(option),this)}}(headerInfo.options)};this.addElement(optionsGroupHeaderInfo)},aleks.core.ui.Listbox.prototype.filterOptions=function(filter,value){var changed=!1;if(this.__optionsList=[],this.__allOptionsList.forEach(function(option){var newDisplayValue=filter(option,value)?"block":"none",wasHidden="none"===option.getStyle("display"),nowVisible="none"!==newDisplayValue;changed|=nowVisible===wasHidden,nowVisible&&this.__optionsList.push(option),option.setStyle({display:newDisplayValue})},this),0===this.__optionsList.length&&this.__elements.empty_state&&this.__elements.empty_state.element.setText(aleks.Intl.getTranslation("ui_control_emptyState",{text:escapeHTMLInjection(value)})),changed){for(var elementId in this.__elements){var element=this.__elements[elementId];element.element.setStyle({display:element.display.call(this)?"":"none"}),element.rebuild.call(this)}this.dispatchEvent("changed")}},aleks.core.ui.Listbox.prototype.getValue=function(){return this.getSelectedValue()},aleks.core.ui.Listbox.prototype.getSelectedOption=function(){return this.__selectedOption},aleks.core.ui.Listbox.prototype.getSelectedName=function(){return this.__selectedOption?this.__selectedOption.getName():null},aleks.core.ui.Listbox.prototype.getSelectedValue=function(){return this.__selectedOption?this.__selectedOption.getValue():null},aleks.core.ui.Listbox.prototype.getSelectedLabel=function(){return this.__selectedOption?this.__selectedOption.getLabel():null},aleks.core.ui.Listbox.prototype.getOptionList=function(){return this.__optionsList},aleks.core.ui.Listbox.prototype.focusIndexItem=function(index,preventOptionChanged){0<this.__optionsList.length&&this.focusItem(this.__optionsList[index],preventOptionChanged)},aleks.core.ui.Listbox.prototype.focusItem=function(element,preventOptionChanged){let optionChanged;!element.getState("selected")&&(optionChanged=!0),element.setState("selected",!0);var listboxNode=this.getDOMElement(),elementNode=element.getDOMElement();if(listboxNode.scrollHeight>listboxNode.clientHeight){var scrollBottom=listboxNode.clientHeight+listboxNode.scrollTop,elementBottom=elementNode.offsetTop+elementNode.offsetHeight;elementBottom>scrollBottom?listboxNode.scrollTop=elementBottom-listboxNode.clientHeight:elementNode.offsetTop<listboxNode.scrollTop&&(listboxNode.scrollTop=elementNode.offsetTop)}optionChanged&&!preventOptionChanged&&this.dispatchEvent("optionChanged")},aleks.core.ui.Listbox.prototype.unfocusItem=function(){this.__selectedOption&&(this.__selectedOption.setState("selected",!1),this.setAriaStyle({activedescendant:null}),this.__selectedOption=null,this.dispatchEvent("change",null),this.dispatchEvent("optionChanged"))},aleks.core.ui.Listbox.prototype.setSelectedOptionIdx=function(idx){const option=this.__allOptionsList[idx];this.setSelectedOption(option)},aleks.core.ui.Listbox.prototype.setSelectedValue=function(value){for(let i=0;i<this.__allOptionsList.length;i++){const option=this.__allOptionsList[i];option.getValue()===value&&this.focusItem(option,!1)}},aleks.core.ui.Listbox.prototype.setSelectedOption=function(element){this.__selectedOption&&this.__selectedOption.setState("selected",!1),this.__selectedOption=element,this.setAriaStyle({activedescendant:element.getId()}),this.handleFocusChange(element),this.dispatchEvent("change",null)},aleks.core.ui.Listbox.prototype.focusFirstItem=function(preventOptionChanged){var firstItem=this.__optionsList[0];firstItem&&this.focusItem(firstItem,preventOptionChanged)},aleks.core.ui.Listbox.prototype.isFirstSelected=function(){const indexCurrentOption=this.__optionsList.indexOf(this.__selectedOption);return 0===indexCurrentOption},aleks.core.ui.Listbox.prototype.focusNextItem=function(preventOptionChanged){var indexCurrentOption=this.__optionsList.indexOf(this.__selectedOption),nextItem=this.__optionsList[indexCurrentOption+1];nextItem?this.focusItem(nextItem,preventOptionChanged):this.focusFirstItem(preventOptionChanged)},aleks.core.ui.Listbox.prototype.focusLastItem=function(preventOptionChanged){var lastItem=this.__optionsList[this.__optionsList.length-1];lastItem&&this.focusItem(lastItem,preventOptionChanged)},aleks.core.ui.Listbox.prototype.isLastSelected=function(){const indexCurrentOption=this.__optionsList.indexOf(this.__selectedOption);return indexCurrentOption===this.__optionsList.length-1},aleks.core.ui.Listbox.prototype.focusPreviousItem=function(preventOptionChanged){var indexCurrentOption=this.__optionsList.indexOf(this.__selectedOption),previousItem=this.__optionsList[indexCurrentOption-1];previousItem?this.focusItem(previousItem,preventOptionChanged):this.focusLastItem(preventOptionChanged)},aleks.core.ui.Listbox.prototype.checkKeyPress=function(evt){var key=evt.which||evt.keyCode;const preventOptionChanged=!0===this.__settings.preventAutoSelect;switch(key){case dom.KeyCode.UP:evt.preventDefault(),this.focusPreviousItem(preventOptionChanged);break;case dom.KeyCode.DOWN:evt.preventDefault(),this.focusNextItem(preventOptionChanged);break;case dom.KeyCode.HOME:evt.preventDefault(),this.focusFirstItem(preventOptionChanged);break;case dom.KeyCode.END:evt.preventDefault(),this.focusLastItem(preventOptionChanged);break;case dom.KeyCode.SPACE:evt.preventDefault();break;default:}},aleks.core.ui.ListElement=function(params){this._super(),this.__listParent=params.listbox,this.setListElementParams(params),this.__actionId=params.actionId,this.__selectionContent=null,this.__inSelected=params.inSelected,this.setTabbable(!1),this.setAriaStyle({role:"option"}),this.setId(this.__listParent.getId()+"_"+this.__optionId),this.addEventListener("click",function(){!this.getState("disabled")&&this.__listParent.focusItem(this)},this),this.addStateEventListener("in","disabled",function(){this.setState("selected",!1)},this),this.addStateEventListener("in","selected !disabled",function(){this.setAriaStyle({selected:!0}),this.__listParent.setSelectedOption(this),"function"==typeof this.__inSelected&&this.__inSelected.call(this)},this),this.addStateEventListener("out","selected !disabled",function(){this.setAriaStyle({selected:!1})},this)},aleks.extend(aleks.core.ui.ListElement,aleks.core.ui.NewButton),aleks.core.ui.ListElement.prototype.setListElementParams=function(params){this.__optionName=params.name,this.__optionValue=params.value===void 0?params.name:params.value,this.__optionLabel=params.label===void 0?params.name:params.label,this.__optionId=params.id===void 0?this.__optionValue:params.id,this.setName(params.text)},aleks.core.ui.ListElement.prototype.setSelectionContent=function(content){this.__selectionContent=content},aleks.core.ui.ListElement.prototype.getSelectionContent=function(){return this.__selectionContent},aleks.core.ui.ListElement.prototype.getValue=function(){return this.__optionValue},aleks.core.ui.ListElement.prototype.getLabel=function(){return this.__optionLabel},aleks.core.ui.ListElement.prototype.getName=function(){return this.__optionName},aleks.core.ui.ListElement.prototype.getActionId=function(){return this.__actionId},aleks.core.ui.ListElement.prototype.isSelected=function(){return!!this.getState("selected")},aleks.core.ui.ListElement.prototype.getListbox=function(){return this.__listParent};var __inPressedEvent=isTablet?"touchstart":"mousedown",__dd_rec_addWindowEventListeners=function(currentWindow){try{this.__dd_windowEventListeners.addEventListener(currentWindow,__inPressedEvent,this.mousedownDocumentHandler,this,{passive:!0}),this.__dd_windowEventListeners.addEventListener(currentWindow,"resize",this.updateDropboxPosition,this);for(var i=0;i<currentWindow.frames.length;i++)__dd_rec_addWindowEventListeners.call(this,currentWindow.frames[i])}catch(error){}},__dd_removeWindowEventListeners=function(){this.__dd_windowEventListeners.removeAllEventListeners()},__dd_addWindowEventListeners=function(){__dd_removeWindowEventListeners.call(this),__dd_rec_addWindowEventListeners.call(this,window.top)};aleks.core.ui.Dropdown=function(dropdownButton,dropBox,options){if(this._super(),this.__options={responsive:!0,dropBoxPosition:"auto",offset:8,...options},this.__container=new aleks.core.ui.Element("div"),this.__container.setStyle({position:"static",display:"inline-block"}),this._setElement(this.__container),this._setChildrenContainerElement(this.__container),dom.Element.removeAttribute(this.__container.getDOMElement(),"tabindex"),this.__dd_windowEventListeners=new dom.EventManager,this.__dropdown=dropdownButton,this.__dropdownButton=dropdownButton,this.__dropdownButton.setAriaStyle({expanded:"",haspopup:"true"}),this.setLabel(),this.__dropdownContainer=new aleks.core.ui.Element("div"),this.__dropdownContainer.appendChild(this.__dropdownButton),this.appendChild(this.__dropdownContainer),this.__dropBox=dropBox,this.__dropBoxVisible=!1,this.appendChild(this.__dropBox),this.__options.responsive){const dropBoxClass=this.__options.isInPopup?"dropBoxPopup":"dropBox";this.__dropBox.addClass(aleks.ui.styleSheet.classes[dropBoxClass])}this.__listButtonEventListener=[],this.__listDropBoxEventListener=[],this.registerEvents(),this.addStateEventListener("in","opened",function(){this.showDropBox()},this),this.addStateEventListener("out","opened",function(){this.hideDropBox()},this),this.addStateEventListener("in","disabled",function(){this.__dropdownButton.setDisabled(!0),this.hideDropBox()},this),this.addStateEventListener("out","disabled",function(){this.__dropdownButton.setDisabled(!1)},this),this.__dropBox.addStateEventListener("out","opened",function(){this.setOpened(!1)},this)},aleks.extend(aleks.core.ui.Dropdown,aleks.core.ui.AbstractControl),aleks.core.ui.Dropdown.prototype.setLabel=function(){this.__options.labelId&&this.__dropdownButton.setAriaStyle({labelby:this.__options.labelId})},aleks.core.ui.Dropdown.prototype.clickHandler=function(){this.getState("opened")?this.setOpened(!1):this.setOpened(!0)},aleks.core.ui.Dropdown.prototype.replaceDropdown=function(dropdown,options){this.__focusTarget=options&&options.focusTarget||null,this.__dropdown=dropdown,this.__dropdownContainer.removeAllChildren(),this.__dropdownContainer.appendChild(dropdown)},aleks.core.ui.Dropdown.prototype.mousedownDocumentHandler=function(event){event.target&&this.getDOMElement().contains(event.target)||this.setOpened(!1)},aleks.core.ui.Dropdown.prototype.getOpened=function(){return this.getState("opened")},aleks.core.ui.Dropdown.prototype.setOpened=function(state){this.__dropBox.setState("opened",state),this.setState("opened",state),this.__dropdownButton.setState("opened",state)},aleks.core.ui.Dropdown.prototype.showDropBox=function(){var _this$__options$preve;if(!this.getState("disabled")&&!(null!==(_this$__options$preve=this.__options.preventShowDropBoxCallback)&&void 0!==_this$__options$preve&&_this$__options$preve.call(this))&&(this.__dropBoxVisible=!0,__dd_addWindowEventListeners.call(this),this.__dropdownButton.setAriaStyle({expanded:!0}),this.__options.responsive&&this.updateDropboxPosition(),this.__options.alignRight)){this.__dropBox.setStyle({right:0});const rightOffset=this.__dropBox.getBoundingClientRect().getRight()-this.getBoundingClientRect().getRight();this.__dropBox.setStyle({right:`${rightOffset}px`})}},aleks.core.ui.Dropdown.prototype.updateDropboxPosition=function(){aleks.DOMRect.updatePositionsStyles("dropdown",{selector:this.__dropdownContainer,dropdown:this.__dropBox,position:this.__options.dropBoxPosition,offset:this.__options.offset})},aleks.core.ui.Dropdown.prototype.hideDropBox=function(){this.__dropBoxVisible=!1,__dd_removeWindowEventListeners.call(this),this.__dropdownButton.setAriaStyle({expanded:""})},aleks.core.ui.Dropdown.prototype.checkShow=function(evt){var key=evt.which||evt.keyCode;switch(key){case dom.KeyCode.UP:case dom.KeyCode.DOWN:evt.preventDefault(),this.setOpened(!0),this.__dropBox.checkKeyPress(evt);break;case dom.KeyCode.TAB:evt.shiftKey&&this.setOpened(!1);break;default:}},aleks.core.ui.Dropdown.prototype.checkHide=function(evt){var key=evt.which||evt.keyCode;switch(key){case dom.KeyCode.RETURN:case dom.KeyCode.ESC:evt.preventDefault(),this.setOpened(!1),this.__dropdownButton.focus();break;case dom.KeyCode.TAB:dom.Timer.schedule(new dom.Task(function(){!this.__dropBox.getDOMElement().contains(document.activeElement)&&this.setOpened(!1)},this),1);break;default:}},aleks.core.ui.Dropdown.prototype.registerEvents=function(){this.__listButtonEventListener.push(this.__dropdownButton.addEventListener("click",this.clickHandler,this)),this.__listButtonEventListener.push(this.__dropdownButton.addEventListener("keydown",this.checkShow,this)),this.__listDropBoxEventListener.push(this.__dropBox.addEventListener("keydown",this.checkHide,this))},aleks.core.ui.Dropdown.prototype.unregisterEvents=function(){this.__listButtonEventListener.forEach(listener=>{this.__dropdownButton.removeEventListener(listener)}),this.__listDropBoxEventListener.forEach(listener=>{this.__dropBox.removeEventListener(listener)}),this.__listButtonEventListener=[],this.__listDropBoxEventListener=[]},aleks.core.ui.Dropdown.prototype.getButton=function(){return this.__dropdownButton},aleks.core.ui.Dropdown.prototype.getDropbox=function(){return this.__dropBox},aleks.core.ui.Dropdown.prototype.getDropdown=function(){return this.__dropdown},aleks.core.ui.ListboxCollapsable=function(button,listbox){let options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.__listbox=listbox,this.__listbox.setTabbable(!1),this._super(button,this.__listbox,options),this.__selectedOption=null,this.__optionsList=[]},aleks.extend(aleks.core.ui.ListboxCollapsable,aleks.core.ui.Dropdown),aleks.core.ui.ListboxCollapsable.prototype.registerEvents=function(){this._super(),this.__listbox.setHandleFocusChange(this.onFocusChange.bind(this))},aleks.core.ui.ListboxCollapsable.prototype.addOption=function(option){let first=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];this.__listbox.addOption(option,first),option.addEventListener("click",function(){this.setOpened(!1)},this)},aleks.core.ui.ListboxCollapsable.prototype.getValue=function(){return this.__listbox.getSelectedValue()},aleks.core.ui.ListboxCollapsable.prototype.showDropBox=function(){this._super(),dom.Timer.schedule(new dom.Task(function(){this.__focusTarget?this.__focusTarget.focus({preventScroll:!0}):this.__listbox.focus()},this),1)},aleks.core.ui.ListboxCollapsable.prototype.onFocusChange=function(element){element.getSelectionContent()?(this.__dropdownButton.getTextContainer().removeAllChildren(),this.__dropdownButton.getTextContainer().appendChild(element.getSelectionContent()),this.__dropdownButton.setAriaStyle({label:null})):(this.__dropdownButton.setName(element.getName()),this.__dropdownButton.setTitle(element.getName()),this.__dropdown.setValue(element.getName()),this.__dropdownButton.setAriaStyle({label:element.getLabel()}))},aleks.core.ui.ListboxCollapsable.prototype.getListbox=function(){return this.__listbox},function(){function DialogManager(){this.zIndex=10004,this.dialogPriority=0}aleks.core.ui.Menu=function(params){this._super(),this.__buttonList=[],this.__selectedButton=null,this.disableAutoSelect=params.disableAutoSelect||!1,this.setAriaStyle({role:params.horizontal?"menubar":"menu"}),this.setFocusable(!1),this.setTabbable(!1);for(var submenu_param,i=0;i<params.menu.length;i++)submenu_param=params.menu[i],submenu_param.size=params.size,submenu_param.index=i,this.createGroupButton(submenu_param),i<params.menu.length-1&&this.addMenuSeparator(i)},aleks.extend(aleks.core.ui.Menu,aleks.core.ui.DropBox),aleks.core.ui.Menu.prototype.show=function(){this._super(),!isTablet&&!this.disableAutoSelect&&dom.Timer.schedule(new dom.Task(function(){this.selectFirstElement()},this),2)},aleks.core.ui.Menu.prototype.createGroupButton=function(params){for(var button_param,j=0;j<params.buttons.length;j++)button_param=params.buttons[j],button_param.size=params.size,button_param.subMenuIndex=params.index,this.addButtonMenu(button_param),this.addButtonSeparator()},aleks.core.ui.Menu.prototype.addToButtonList=function(buttonMenu){0===this.__buttonList.length&&buttonMenu.setTabbable(!0),this.__buttonList.push(buttonMenu)},aleks.core.ui.Menu.prototype.addButtonMenu=function(params){params.parent=this},aleks.core.ui.Menu.prototype.addMenuSeparator=function(){},aleks.core.ui.Menu.prototype.addButtonSeparator=function(){},aleks.core.ui.Menu.prototype.getButtonList=function(){return this.__buttonList},aleks.core.ui.Menu.prototype.clickHandler=function(){},aleks.core.ui.Menu.prototype.getSelectedElement=function(){return this.__selectedButton},aleks.core.ui.Menu.prototype.selectFirstElement=function(){this.selectElement(0)},aleks.core.ui.Menu.prototype.selectNextElement=function(currentButton){var indexButton=this.__buttonList.indexOf(currentButton)+1;this.selectElement(indexButton,"down")},aleks.core.ui.Menu.prototype.selectPreviousElement=function(currentButton){var indexButton=this.__buttonList.indexOf(currentButton)-1;this.selectElement(indexButton,"up")},aleks.core.ui.Menu.prototype.selectElement=function(pos,direction){var focusedButton=null,a=0;for(this.__selectedButton&&this.__selectedButton.setAriaStyle({tabindex:-1});null==focusedButton&&(a<this.__buttonList.length||50>a);){0>pos?pos=this.__buttonList.length-1:pos===this.__buttonList.length&&(pos=0);var nextButton=this.__buttonList[pos];!nextButton.isDisabled()&&(focusedButton=nextButton),direction&&"up"===direction?pos--:pos++,a++}null!==focusedButton&&(focusedButton.focus(),this.__selectedButton=focusedButton,this.__selectedButton.setAriaStyle({tabindex:0}))},aleks.core.ui.ButtonMenu=function(params){this._super(params),this.setParentMenu(params.parent),this.__action=params.action,this.__horizontal=params.horizontal,this.setTabbable(!1),this.setAriaStyle({role:"menuitem"}),this.addEventListener("keydown",this.keydownHandler,this),this.addEventListener("keyup",this.keyupHandler,this),this.addEventListener("click",this.clickHandler,this),this.addStateEventListener("in","selected",function(){this.getParentMenu().getButtonList().forEach(function(buttonMenu){buttonMenu!==this&&buttonMenu.setSelected(!1)})},this)},aleks.extend(aleks.core.ui.ButtonMenu,aleks.core.ui.NewButton),aleks.core.ui.ButtonMenu.prototype.setParentMenu=function(parent){this._parentMenu=parent},aleks.core.ui.ButtonMenu.prototype.getParentMenu=function(){return this._parentMenu},aleks.core.ui.ButtonMenu.prototype.setSelected=function(state){this.setState("selected",state)},aleks.core.ui.ButtonMenu.prototype.keydownHandler=function(evt){var key=evt.which||evt.keyCode;const previousKey=dom.KeyCode.UP,nextKey=dom.KeyCode.DOWN;switch(key){case previousKey:evt.preventDefault(),this.getParentMenu().selectPreviousElement(this);break;case nextKey:evt.preventDefault(),this.getParentMenu().selectNextElement(this);break;case dom.KeyCode.RETURN:this.dispatchEvent("click",evt),evt.preventDefault();break;default:}},aleks.core.ui.ButtonMenu.prototype.keyupHandler=function(evt){evt.keyCode===dom.KeyCode.SPACE&&(this.dispatchEvent("click",evt),evt.preventDefault())},aleks.core.ui.ButtonMenu.prototype.clickHandler=function(){this.getParentMenu().setState("opened",!1),this.blur(),this.__action&&"function"==typeof this.__action&&this.__action.call()},aleks.core.ui.TabList=function(){let params=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this._super(),this.__RADIO_GROUP_ROLE="radiogroup",this._params={initial:0,ariaLabel:"Unnamed Button Group",isAutoActivate:!0,...params},this._container=new aleks.core.ui.Element("nav"),this._setElement(this._container),this._handleEvents("change"),this._buttons=params.buttons||[],this._selectedButtonId=null,this.addStateEventListener("in","disabled",()=>{this._buttons.forEach(button=>{button.setDisabled(!0)})}),this.addStateEventListener("out","disabled",()=>{this._buttons.forEach(button=>{button.setDisabled(!1)})}),this.setFocusable(!0),this.__init()},aleks.extend(aleks.core.ui.TabList,aleks.core.ui.AbstractStateElement),aleks.core.ui.TabList.prototype.__init=function(){const isRadioGroup=this._params.role===this.__RADIO_GROUP_ROLE;this._container.setAriaStyle({role:isRadioGroup?"radiogroup":"tablist",label:this._params.ariaLabel});let availableButtonsNewIndex={},allButtonsRevertIndex={},availableButtons=[],availableButtonCount=0;for(let index=0;index<this._buttons.length;index++)!0!==this._buttons[index].isDisabled&&(availableButtons.push(this._buttons[index]),availableButtonsNewIndex[index]=availableButtonCount,allButtonsRevertIndex[availableButtonCount]=index,availableButtonCount++);0<=this._params.initial&&this._params.initial<availableButtons.length&&this.setSelected(availableButtons[this._params.initial],!0,!0),availableButtons.forEach(button=>{if(this._container.appendChild(button),isRadioGroup){const setButtonChecked=this.isSelected(button);button.setAriaStyle({checked:setButtonChecked})}button.addEventListener("click",()=>{this.setSelected(button,!0)}),button.setAriaRoleType(isRadioGroup?"radio":"tab")}),this.addEventListener("keydown",event=>{let delta=0;if("ArrowRight"===event.key||isRadioGroup&&"ArrowDown"===event.key)delta=1;else if("ArrowLeft"===event.key||isRadioGroup&&"ArrowUp"===event.key)delta=-1;else return;if(event.preventDefault(),this._params.isAutoActivate){const nextSelectedIndex=(availableButtonsNewIndex[this.getSelectedIndex()]+delta+availableButtons.length)%availableButtons.length,selectedButton=availableButtons[nextSelectedIndex];selectedButton.focus(),this.setSelected(selectedButton,!0)}else{this.__previousFocusIndex=this.__focusIndex;const indexWithoutDisabled=(availableButtonsNewIndex[this.__previousFocusIndex]+delta+availableButtons.length)%availableButtons.length;this.__focusIndex=allButtonsRevertIndex[indexWithoutDisabled];const focusedButton=availableButtons[indexWithoutDisabled];focusedButton.focus()}})},aleks.core.ui.TabList.prototype.setDisabled=function(isDisabled){this.setState("disabled",isDisabled)},aleks.core.ui.TabList.prototype.isSelected=function(button){return this._buttons.indexOf(button)===this._selectedButtonId},aleks.core.ui.TabList.prototype.setSelected=function(button,isSelected,noDispatchChange){const buttonIndex=this._buttons.indexOf(button);this._selectedButtonId=isSelected?buttonIndex:null,!noDispatchChange&&this.dispatchEvent("change",{selectedId:buttonIndex,selected:this.isSelected(button)})},aleks.core.ui.TabList.prototype.getSelected=function(){return null===this._selectedButtonId?null:this._buttons[this._selectedButtonId]},aleks.core.ui.TabList.prototype.getSelectedIndex=function(){return this._selectedButtonId},aleks.core.ui.TabList.prototype.getButtonList=function(){return this._buttons},aleks.core.ui.TabList.prototype.getInputId=function(){return this.getId()},aleks.core.ui.TabList.prototype.setInputId=function(id){this.setId(id)};var __customDialogManager;aleks.core.ui.getDialogManager=function(){return!__customDialogManager&&(__customDialogManager=new DialogManager),__customDialogManager},DialogManager.prototype.updateDialog=function(dialog){dialog.__container.setStyle({zIndex:this.zIndex+ ++this.dialogPriority})};const __initAleksInPopup=()=>{!aleks.inPopup&&(aleks.inPopup=new Set)};aleks.core.ui.Dialog=function(options){var _options$shouldFocusC;this._super(),this.__options=options,this.__movedToBody=!1,this.__staticHeightSet=!1,this.__staticHeight=null,this.__triggerElement=options.triggerElement,this.preventFocus=options.preventFocus||!1,this.onResizeFreezeWidth=options.onResizeFreezeWidth||!1,this.stretchToFullHeightAlways=!1,this.marginTopStaticOnResize=0,this.marginBottomStaticOnResize=0,this.__modal=!1!==options.modal&&null!==options.modal&&(options.modal||"light"),this.__addPrimaryButton=!1!==options.primaryButton&&null!==options.primaryButton,this.__addSecondaryButton=!1!==options.secondaryButton&&null!==options.secondaryButton,this.__addCloseButton=!1!==options.closeButton&&null!==options.closeButton,this.__closeButtonOptions={...options.closeButton},this.__primaryButtonOptions={...options.primaryButton},this.__secondaryButtonOptions=this.__addSecondaryButton&&{text:aleks.Intl.getTranslation("aleks_ui_dialog_cancel"),...options.secondaryButton},this.__hasButtons=this.__addPrimaryButton||this.__addSecondaryButton||this.__addCloseButton,this.__hasBottomButtons=this.__addPrimaryButton||this.__addSecondaryButton,this.__dismissalType=options.closeType||"remove",this.__isCentered=!1!==options.isCentered&&null!==options.isCentered,this.__isDraggable=options.isDraggable||!1,this.__isStackable=options.isStackable||!1,this.__isShaded=options.isShaded||!1,this.__alertStyle=options.alertStyle||!1,this.__titleIcon=this.__options.headerIcon,this.__centerTitle=this.__options.centerTitle,this.__overlayAppendedToDOM=!1,this.__scrollShadow=options.scrollShadow,this.__shouldFocusContainer=null===(_options$shouldFocusC=options.shouldFocusContainer)||void 0===_options$shouldFocusC||_options$shouldFocusC,this.__context=options.customStudentModuleTarget?options.customStudentModuleTarget:window,this.__reflowOverride=options.reflowOverride,this.__documentBody=aleks.core.ui.Element.fromElement(this.__context.document.body),this.__customStudentModuleTarget=null,__initAleksInPopup(),options.customStudentModuleTarget&&(this.__customStudentModuleTarget=options.customStudentModuleTarget),this.resizeCallback=event=>this.contentResizeHandler(event),this.mouseMoveCallback=event=>this.mouseMoveHandler(event),this.keydownCallback=event=>{var _this$__customStudent;return this.keydownHandler(event,null===(_this$__customStudent=this.__customStudentModuleTarget)||void 0===_this$__customStudent?void 0:_this$__customStudent.document)},this.keyupCallback=event=>{var _this$__customStudent2;return this.keyupHandler(event,null===(_this$__customStudent2=this.__customStudentModuleTarget)||void 0===_this$__customStudent2?void 0:_this$__customStudent2.document)},this.isFirstFocusableElementActive=context=>context.activeElement===this.__firstFocusableElement,this.isLastFocusableElementActive=context=>context.activeElement===this.__lastFocusableElement,this.__build(),this._setElement(this.__container),this._setChildrenContainerElement(this.__contentContainer),this.__listenersAreAttached=!1,this.setFocusable(!0),this.setAriaStyle({role:"dialog",modal:this.__modal?"true":""}),this.setId(options.id)},aleks.extend(aleks.core.ui.Dialog,aleks.core.ui.AbstractStateElement),aleks.core.ui.Dialog.prototype.remove=function(){var _this$getParent;this.__overlay&&this.__overlayAppendedToDOM&&(this.__documentBody.removeChild(this.__overlay),this.__overlayAppendedToDOM=!1),this.setVisibility(!1),null===(_this$getParent=this.getParent())||void 0===_this$getParent||_this$getParent.removeChild(this)},aleks.core.ui.Dialog.prototype.getDropboxOverflowContainer=function(){return this.__dropboxOverflowContainer},aleks.core.ui.Dialog.prototype.getOverflowContainer=function(){return this.__overflowContainer},aleks.core.ui.Dialog.prototype.getMainContainer=function(){return this.__mainContainer},aleks.core.ui.Dialog.prototype.getLeftContainer=function(){return this.__leftContainer},aleks.core.ui.Dialog.prototype.getRightContainer=function(){return this.__rightContainer},aleks.core.ui.Dialog.prototype.getContentContainer=function(){return this.__contentContainer},aleks.core.ui.Dialog.prototype.getTitleContainer=function(){return this.__titleContainer},aleks.core.ui.Dialog.prototype.getTitleHeight=function(){return this.__titleContainer.getBoundingClientRect().getHeight()},aleks.core.ui.Dialog.prototype.getHeaderContainer=function(){return this.__headerContainer},aleks.core.ui.Dialog.prototype.getTitleText=function(){if(this.__title instanceof aleks.core.ui.Element)return this.__title.getText();return"string"==typeof this.__title?this.__title:void 0},aleks.core.ui.Dialog.prototype.getOverflowContainer=function(){return this.__overflowContainer},aleks.core.ui.Dialog.prototype.getOverlay=function(){return this.__overlay},aleks.core.ui.Dialog.prototype.__build=function(){if(this.__overlay=this.__modal&&new aleks.core.ui.Element("div"),this.__container=new aleks.core.ui.Element("div"),this.__focusDiv=new aleks.core.ui.Element("div"),this.__focusDiv.setTabbable(!0),this.__container.appendChild(this.__focusDiv),this.__options.title instanceof aleks.core.ui.Element)this.__titleContainer=this.__options.title,this.__title=this.__options.titleRef;else{const text=this.__options.title||(this.__alertStyle?aleks.Intl.getTranslation(`ui_control_dialog_${this.__alertStyle}`):aleks.Intl.getTranslation("ui_control_dialog_default_title"));this.__titleContainer=new aleks.core.ui.Element("div"),this.__title=new aleks.ui.Header({text,level:4,ariaLevel:2,safe:this.__options.safe}),this.__titleContainer.appendChild(this.__title)}if(this.__dropboxOverflowContainer=new aleks.core.ui.Element("div"),this.__dropboxOverflowContainer.setStyle({position:"relative"}),this.__overflowContainer=new aleks.core.ui.Element("div"),this.__contentContainer=new aleks.core.ui.Element("div"),this.__buttonContainer=new aleks.core.ui.Element("div"),this.__headerContainer=new aleks.core.ui.Element("div"),this.__headerContainer.setStyle({alignItems:"center",display:"flex",justifyContent:this.__centerTitle?"center":""}),this.__options.splitDialog&&(this.__mainContainer=new aleks.core.ui.Element("div"),this.__mainContainer.setStyle({display:"flex"}),this.__leftContainer=new aleks.core.ui.Element("div"),this.__leftContainer.setStyle({display:"block",width:"100%"}),this.__rightContainer=new aleks.core.ui.Element("div"),this.__rightContainer.setStyle({display:"block"})),this.__titleIcon&&(this.__headerIcon=new aleks.core.ui.Element("div"),this.__headerIcon.appendChild(this.__titleIcon),this.__headerContainer.appendChild(this.__headerIcon),this.__options.headerColor)){var _this$__title;null===(_this$__title=this.__title)||void 0===_this$__title||_this$__title.setStyle({color:this.__options.headerColor})}this.__headerContainer.appendChild(this.__titleContainer),this.__overflowContainer.appendChild(this.__contentContainer),this.__dropboxOverflowContainer.appendChild(this.__overflowContainer),this.__options.splitDialog?(this.__leftContainer.appendChild(this.__headerContainer),this.__leftContainer.appendChild(this.__dropboxOverflowContainer),this.__mainContainer.appendChild(this.__leftContainer),this.__mainContainer.appendChild(this.__rightContainer),this.__focusDiv.appendChild(this.__mainContainer)):(this.__focusDiv.appendChild(this.__headerContainer),this.__focusDiv.appendChild(this.__dropboxOverflowContainer)),this.__hasBottomButtons&&this.__focusDiv.appendChild(this.__buttonContainer),this.__buildContent(this.__options.component,this.__options.level,this.__options.inlineComponents),this.__buildConfirmationButtons(),this.__addCloseButton&&this.__buildCloseButton(),this.__isDraggable&&(this.makeDraggable(),this.__initialOffsetX=null,this.__initialOffsetY=null,this.__lastOffsetY=null,this.__lastOffsetX=null),this.__isStackable&&this.makeStackable(),this.__scrollShadow&&this.addOverflowContainerScrollListener(),this.__setFocusableElements()},aleks.core.ui.Dialog.prototype.__setFocusableElements=function(){const focusableContent=this.__focusDiv.getFocusableElements();this.__firstFocusableElement=this.__focusDiv.getDOMElement(),this.__lastFocusableElement=focusableContent[focusableContent.length-1]},aleks.core.ui.Dialog.prototype.changeTitle=function(text){var _this$__title2;null===(_this$__title2=this.__title)||void 0===_this$__title2||_this$__title2.setText(text)},aleks.core.ui.Dialog.prototype.setId=function(){let id=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Math.random().toString(36).substring(2,12);this._super(id),this.__primaryButton&&this.__primaryButton.setId(`${id}_primary_button`),this.__secondaryButton&&this.__secondaryButton.setId(`${id}_secondary_button`),this.__closeButton&&this.__closeButton.setId(`${id}_close_button`),this.__titleContainer&&this.__titleContainer.setId(`${id}_title_container`),this.__focusDiv.setId(`${id}___focusDiv`),this.__component&&this.__component.setId&&this.__component.setId(`${id}_popup_content`),this.setAriaStyle({labelby:this.__titleContainer?`${id}_title_container`:"",describeby:this.__component&&this.__component.setId?`${id}_popup_content`:""})},aleks.core.ui.Dialog.prototype.getContentId=function(){var _this$__component$get,_this$__component;return this.__component&&(null===(_this$__component$get=(_this$__component=this.__component).getId)||void 0===_this$__component$get?void 0:_this$__component$get.call(_this$__component))},aleks.core.ui.Dialog.prototype.makeStackable=function(){this.__focusDiv.addEventListener(__inPressedEvent,function(){aleks.core.ui.getDialogManager().updateDialog(this)},this)},aleks.core.ui.Dialog.prototype.getContainer=function(){return this.__focusDiv},aleks.core.ui.Dialog.prototype.getButtonContainer=function(){return this.__buttonContainer},aleks.core.ui.Dialog.prototype.makeDraggable=function(){const dialogHeader=this.__headerContainer;dialogHeader.setStyle({cursor:"move"});const closeDragElement=()=>{document.removeEventListener(isTablet?"touchend":"mouseup",closeDragElement),document.removeEventListener(isTablet?"touchmove":"mousemove",this.mouseMoveCallback),document.removeEventListener(isTablet?"touchstart":"mousedown",startDrag)},startDrag=event=>{if(event.preventDefault(),isTablet){const touch=event.changedTouches[0];this.__initialOffsetX=parseInt(touch.clientX-this.getBoundingClientRect().getLeft(),10),this.__initialOffsetY=parseInt(touch.clientY-this.getBoundingClientRect().getTop(),10)}else this.__initialOffsetX=event.clientX-parseInt(this.getBoundingClientRect().getLeft(),10),this.__initialOffsetY=event.clientY-parseInt(this.getBoundingClientRect().getTop(),10);document.addEventListener(isTablet?"touchend":"mouseup",closeDragElement),isTablet?document.addEventListener("touchmove",this.mouseMoveCallback,{passive:!0}):document.addEventListener("mousemove",this.mouseMoveCallback)};dialogHeader.addEventListener(isTablet?"touchstart":"mousedown",startDrag,this)},aleks.core.ui.Dialog.prototype.mouseMoveHandler=function(event){const isResizeEvent="resize"===event.type,isTabletEvent="touchmove"===event.type;let topPos=this.getBoundingClientRect().getTop(),leftPos=this.getBoundingClientRect().getLeft();if(!isResizeEvent)if(isTabletEvent){const touch=event.changedTouches[0];topPos=touch.clientY-this.__initialOffsetY,leftPos=touch.clientX-this.__initialOffsetX}else event.preventDefault(),topPos=event.clientY-this.__initialOffsetY,leftPos=event.clientX-this.__initialOffsetX;const popupWidth=this.getBoundingClientRect().getRight()-this.getBoundingClientRect().getLeft(),bodyWidth=document.body.getBoundingClientRect().right-document.body.getBoundingClientRect().left,titleHeight=this.__titleContainer.getDOMElement().offsetHeight,displayMargin=50,heightDiff=window.innerHeight-titleHeight,widthDiff=bodyWidth-displayMargin;leftPos<=-1*(popupWidth-displayMargin)?leftPos=-1*(popupWidth-displayMargin):leftPos>=widthDiff&&(leftPos=widthDiff),null!==topPos&&0>=topPos?topPos=0:topPos>=heightDiff&&(topPos=heightDiff),isResizeEvent?(this.__lastOffsetY>=heightDiff&&(topPos=heightDiff,leftPos=this.__lastOffsetX<=widthDiff?this.__lastOffsetX:widthDiff),this.__lastOffsetX>=widthDiff&&(leftPos=widthDiff,topPos=this.__lastOffsetY<=heightDiff?this.__lastOffsetY:heightDiff)):(this.__lastOffsetY=topPos,this.__lastOffsetX=leftPos),null!==topPos&&null!==leftPos&&this.setStyle({top:`${topPos}px`,left:`${leftPos}px`,position:"fixed"}),this.__resizeDialog(),this.__isCentered=!1},aleks.core.ui.Dialog.prototype.isVisible=function(){return this.__isVisible},aleks.core.ui.Dialog.prototype.getCloseButton=function(){return this.__closeButton},aleks.core.ui.Dialog.prototype.setDisabledButtons=function(status){this.__closeButton&&this.__closeButton.setDisabled(status),this.__primaryButton&&this.__primaryButton.setDisabled(status),this.__secondaryButton&&this.__secondaryButton.setDisabled(status)};const DIALOG_BUTTONS={CLOSE:"close",PRIMARY:"primary",SECONDARY:"secondary"};aleks.core.ui.Dialog.prototype.disableButtons=function(buttonList){if(!Array.isArray(buttonList))throw new Error("buttonList should be an array");buttonList.forEach(buttonName=>{buttonName===DIALOG_BUTTONS.CLOSE?this.__closeButton.setDisabled(!0):buttonName===DIALOG_BUTTONS.PRIMARY?this.__primaryButton.setDisabled(!0):buttonName===DIALOG_BUTTONS.SECONDARY&&this.__secondaryButton.setDisabled(!0)})},aleks.core.ui.Dialog.prototype.enableButtons=function(buttonList){if(!Array.isArray(buttonList))throw new Error("buttonList should be an array");buttonList.forEach(buttonName=>{buttonName===DIALOG_BUTTONS.CLOSE?this.__closeButton.setDisabled(!1):buttonName===DIALOG_BUTTONS.PRIMARY?this.__primaryButton.setDisabled(!1):buttonName===DIALOG_BUTTONS.SECONDARY&&this.__secondaryButton.setDisabled(!1)})},aleks.core.ui.Dialog.prototype.addOverlay=function(){this.__overlay&&(this.__documentBody.appendChild(this.__overlay),this.__overlay.setStyle({display:"none"}),this.__overlayAppendedToDOM=!0)},aleks.core.ui.Dialog.prototype.setDialogWidths=function(){if(!this.__scrollWidth){const content=this.__contentContainer.getDOMElement();this.__scrollWidth=getContentBox(content).width-getScrollBarWidth(),this.__maxWidth=this.__options.maxWidth||content.getBoundingClientRect().width}},aleks.core.ui.Dialog.prototype.contentResizeHandler=function(event){this.__isDraggable&&this.mouseMoveCallback(event),this.isVisible()&&this.__isCentered&&(this.__resizeDialog(),dom.Timer.schedule(new dom.Task(function(){0<this.getBoundingClientRect().getWidth()&&0<this.getBoundingClientRect().getHeight()&&this.centerDialog()},this),10))},aleks.core.ui.Dialog.prototype.centerDialog=function(){const centerX=Math.round(this.__context.innerWidth/2-this.getBoundingClientRect().getWidth()/2)-11,centerY=Math.round(this.__context.innerHeight/2-this.getBoundingClientRect().getHeight()/2);this.setStyle({left:`${centerX}px`,top:`${centerY}px`})},aleks.core.ui.Dialog.prototype.__updateScrollShadow=function(){if(this.__scrollShadow){const element=this.__overflowContainer.getDOMElement();this.__focusDiv.toggleClass(["scrollShadow"],1<=element.scrollHeight-element.scrollTop-element.clientHeight)}},aleks.core.ui.Dialog.prototype.__resizeDialog=function(){this.setDialogWidths();let horizontalScrollWidth=0;const dialogSidePadding=16,closeButtonSizes={width:0,height:0,widthOutsideDialog:11},dialogMaxWidth=window.innerWidth-getScrollBarWidth()-2*dialogSidePadding-closeButtonSizes.widthOutsideDialog;if(this.__closeButton&&(closeButtonSizes.width=this.__closeButton.getCurrentWidth(),closeButtonSizes.height=this.__closeButton.getCurrentHeight()),!this.onResizeFreezeWidth&&(window.innerWidth<=smt.largeWidth-getScrollBarWidth()&&(horizontalScrollWidth+=getScrollBarWidth()),!this.__options.allowOverflow&&(window.innerWidth<=this.__contentContainer.getDOMElement().scrollWidth?(horizontalScrollWidth+=getScrollBarWidth(),this.setStyle({maxWidth:dialogMaxWidth+"px"}),this.__reflowOverride&&this.__contentContainer.setStyle({width:this.__scrollWidth+"px"})):this.setStyle({maxWidth:Math.min(this.__maxWidth,dialogMaxWidth)+"px"}))),!this.__options.allowOverflow){const maxHeight=this.__contentContainer.getDOMElement().scrollHeight+this.__titleContainer.getCurrentHeight()+this.__buttonContainer.getCurrentHeight()+horizontalScrollWidth;if(window.innerHeight>=maxHeight&&!this.stretchToFullHeightAlways)this.__contentContainer.setStyle({height:"auto"});else{let startHeight=window.innerHeight;this.__staticHeightSet&&this.__staticHeight&&window.innerHeight>parseInt(this.__staticHeight,10)&&(startHeight=parseInt(this.__staticHeight,10));const newHeight=startHeight-closeButtonSizes.height-this.__titleContainer.getCurrentHeight()-this.__buttonContainer.getCurrentHeight()-horizontalScrollWidth-this.marginTopStaticOnResize-this.marginBottomStaticOnResize;this.__contentContainer.setStyle({height:newHeight+"px"})}}this.__updateScrollShadow()},aleks.core.ui.Dialog.prototype.__buildContent=function(content){let level=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,inline=2<arguments.length?arguments[2]:void 0;"string"==typeof content?this.__component=new aleks.ui.Body({text:content,level,safe:!0}):content&&content instanceof Array?(this.__component=new aleks.core.ui.Element("div"),content.forEach((element,index)=>{let textElement=null;textElement="object"==typeof element?element:new aleks.ui.Body({text:element,level}),inline?textElement.setStyle({display:"inline"}):0!==index&&textElement.setStyle({"padding-top":"16px"}),this.__component.appendChild(textElement)})):content&&"object"==typeof content?this.__component=content:this.__component=new ui.TextContainer(""),this.__component.setStyle({position:"inherit",padding:"0px"}),this.__contentContainer.appendChild(this.__component)},aleks.core.ui.Dialog.prototype.replaceContent=function(content,level){this.__contentContainer.removeAllChildren(),this.__buildContent(content,level)},aleks.core.ui.Dialog.prototype.getComponent=function(){return this.__component},aleks.core.ui.Dialog.getActionListenerEventsObject=function(){let hoverOnly=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];const hoverEvents={mouseover:!0,mouseout:!1,blur:!1,click:!hoverOnly,mousedown:!hoverOnly},hoverTabletEvents={touchstart:!hoverOnly,touchend:!1},toggleEvents={click:!0},toggleTabletEvents={touchend:!0};return{hover:isTablet?hoverTabletEvents:hoverEvents,toggle:isTablet?toggleTabletEvents:toggleEvents,click:{click:!0},hoverEvents}},aleks.core.ui.Dialog.generateListener=function(e,action,clickDismissible,syncToggleState,preventFocusChange,listenerEvent,visibility,actionListenerEvents){if(this.__linkedComponent.eventLock&&"mouseover"===this.__previousListenerEvent&&"click"===listenerEvent)return void(this.__previousListenerEvent=listenerEvent);if(this.__previousListenerEvent=listenerEvent,"mouseover"===listenerEvent&&(this.__linkedComponent.eventLock=!0),("touchend"===listenerEvent||"touchstart"===listenerEvent||"mouseout"===listenerEvent)&&("mouseout"===listenerEvent&&(null===e||void 0===e||e.preventDefault()),!preventFocusChange&&("mouseout"===listenerEvent||e&&!this.__linkedComponent.getDOMElement().contains(e.target))&&document.activeElement.blur()),this.isVisible()&&(!isTablet||"toggle"===action)&&e&&this.__linkedComponent.getDOMElement().contains(e.target))this.setVisibility(!clickDismissible);else if(this.__linkedComponent.toggleable&&syncToggleState&&this.__linkedComponent.toggleState(visibility),this.setVisibility("undefined"==typeof actionListenerEvents.hover[listenerEvent]?!this.isVisible():visibility),!preventFocusChange&&("undefined"==typeof actionListenerEvents.hoverEvents[listenerEvent]||this.isVisible()&&!this.closeButton))if("touchend"!==listenerEvent){var _this$__target;null===(_this$__target=this.__target)||void 0===_this$__target||_this$__target.focus()}else document.activeElement.blur();"mouseover"===listenerEvent&&dom.Timer.schedule(new dom.Task(function(){this.__linkedComponent.eventLock=!1},this),0)},aleks.core.ui.Dialog.prototype.linkDialogToComponentAction=function(component){let{action="click",clickDismissible=!0,hoverOnly=!1,syncToggleState=!1,preventFocusChange=!1}=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};const actionListenerEvents=aleks.core.ui.Dialog.getActionListenerEventsObject(hoverOnly);if(!this.__linkedComponent){this.__linkedComponent=component;for(const[listenerEvent,visibility]of Object.entries(actionListenerEvents[action]))this.__linkedComponent.addEventListener(listenerEvent,e=>{aleks.core.ui.Dialog.generateListener.call(this,e,action,clickDismissible,syncToggleState,preventFocusChange,listenerEvent,visibility,actionListenerEvents)},!1)}},aleks.core.ui.Dialog.prototype.__addWindowListeners=function(){!this.__listenersAreAttached&&(this.__modal&&(this.__context.addEventListener("keyup",this.keyupCallback,!0),this.__context.addEventListener("keydown",this.keydownCallback,!0)),DisplayManager.getCustomEventManager().addEventListener("changePage",()=>this.remove()),this.__context.addEventListener("resize",this.resizeCallback,!0),this.__listenersAreAttached=!0)},aleks.core.ui.Dialog.prototype.__removeWindowListeners=function(){this.__modal&&(this.__context.addEventListener("keyup",this.keyupCallback,!0),this.__context.removeEventListener("keydown",this.keydownCallback,!0)),this.__context.removeEventListener("resize",this.resizeCallback,!0),this.__listenersAreAttached=!1},aleks.core.ui.Dialog.prototype.addEscKeyListener=function(closeHandler){this.escKeyListener=closeHandler,this.addEventListener("keydown",this.escKeyListener)},aleks.core.ui.Dialog.prototype.addOverflowContainerScrollListener=function(){this.__overflowContainer.addEventListener("scroll",()=>{this.__updateScrollShadow()})},aleks.core.ui.Dialog.prototype.__buildConfirmationButtons=function(){if(this.__addSecondaryButton&&(this.__secondaryButton=new aleks.ui.ConfirmationButton({theme:"confirmation.lightGreyDark",style:"secondary",text:this.__secondaryButtonOptions.text}),this.__buttonContainer.appendChild(this.__secondaryButton),this.__secondaryButtonOptions.callback&&this.__secondaryButtonOptions.triggerOnEsc&&(this.__secondaryButtonOptions.callback.triggerOnEsc=this.__secondaryButtonOptions.triggerOnEsc),aleks.core.ui.addCloseAction({closeButton:this.__secondaryButton,actionTarget:this,actionType:this.__dismissalType,callback:this.__secondaryButtonOptions.callback,callbackContext:this.__secondaryButtonOptions.callbackContext})),this.__addPrimaryButton){const theme=this.__primaryButtonOptions.theme||("warning"===this.__alertStyle?"standard.lightDarkLight":"confirmation.green"),text=this.__primaryButtonOptions.text||("confirmation.green"===theme?aleks.Intl.getTranslation("aleks_ui_dialog_confirm"):aleks.Intl.getTranslation("aleks_ui_dialog_continue"));this.__primaryButton=new aleks.ui.ConfirmationButton({theme,style:this.__secondaryButtonOptions?"primary":"single",text}),this.__buttonContainer.appendChild(this.__primaryButton),aleks.core.ui.addCloseAction({closeButton:this.__primaryButton,actionTarget:this,actionType:this.__dismissalType,callback:this.__primaryButtonOptions.callback,callbackContext:this.__primaryButtonOptions.callbackContext,onBeforeCallback:this.__primaryButtonOptions.onBeforeCallback,preventClose:this.__primaryButtonOptions.preventClose})}},aleks.core.ui.Dialog.prototype.close=function(){this.__closeAction&&this.__closeAction()},aleks.core.ui.Dialog.prototype.__buildCloseButton=function(){this.__closeButton=new aleks.ui.IconButton({style:"primary",icon:new smt.icon.closeButtonIcon}),this.__closeButton.setAriaStyle({label:"dialog close"}),this.__focusDiv.appendChild(this.__closeButton),this.__closeAction=aleks.core.ui.addCloseAction({closeButton:this.__closeButton,actionTarget:this,actionType:this.__dismissalType,callback:this.__closeButtonOptions.callback,callbackContext:this.__closeButtonOptions.callbackContext})},aleks.core.ui.Dialog.prototype.keyupHandler=function(event){let context=1<arguments.length&&arguments[1]!==void 0?arguments[1]:document;const isTabPressed=event.keyCode===dom.KeyCode.TAB;!isTabPressed||!this.getDOMElement().contains(context.activeElement)&&this.isVisible()&&event.preventDefault()},aleks.core.ui.Dialog.prototype.keydownHandler=function(event){let context=1<arguments.length&&arguments[1]!==void 0?arguments[1]:document;const isTabPressed=event.keyCode===dom.KeyCode.TAB;if(!isTabPressed)return;this.__focusedElement=null,this.__setFocusableElements();const isShiftTabOnFirstFocusableElement=event.shiftKey&&this.isFirstFocusableElementActive(context),isTabOnLastFocusableElement=!event.shiftKey&&this.isLastFocusableElementActive(context);isShiftTabOnFirstFocusableElement?this.__focusedElement=this.__lastFocusableElement:isTabOnLastFocusableElement&&(this.__focusedElement=this.__firstFocusableElement),this.__focusedElement&&(event.preventDefault(),this.__focusedElement.focus())},aleks.core.ui.Dialog.prototype.getButtons=function(){return{primary:this.__primaryButton,secondary:this.__secondaryButton,close:this.__closeButton}},aleks.core.ui.Dialog.prototype.getButtonsOptions=function(){return{primary:this.__primaryButtonOptions,secondary:this.__secondaryButtonOptions,close:this.__closeButtonOptions}},aleks.core.ui.Dialog.prototype.__appendToBody=function(){const _documentBody=aleks.core.ui.Element.fromElement(this.__customStudentModuleTarget?this.__customStudentModuleTarget.document.body:document.body);(!this.__movedToBody||this.getParent()!==_documentBody)&&(_documentBody.appendChild(this),this.__movedToBody=!0,this.__customStudentModuleTarget&&this.addContextualClasses())};const replaceTypographyClasses=(element,contextClasses)=>{var _element$getChildren;null===(_element$getChildren=element.getChildren())||void 0===_element$getChildren||_element$getChildren.map(child=>replaceTypographyClasses(child,contextClasses)),"typography"===(null===element||void 0===element?void 0:element.__type)&&element.addClass([contextClasses.typography])};aleks.core.ui.Dialog.prototype.addContextualClasses=function(){var _this$getCloseButton;const contextClasses=this.__customStudentModuleTarget.aleks.ui.styleSheet.classes;this.addClass([contextClasses.dialog]),this.__title.addClass([contextClasses.typography]),null===(_this$getCloseButton=this.getCloseButton())||void 0===_this$getCloseButton||_this$getCloseButton.addClass([contextClasses.button]),replaceTypographyClasses(this.getComponent(),contextClasses)},aleks.core.ui.Dialog.prototype.setVisibility=function(visibility){this.setStyle({visibility:visibility?"visible":"hidden"});let elementToFocus=null;visibility?(this.__appendToBody(),this.__modal&&this.addOverlay(),this.__elementToFocusOnClose=this.__triggerElement||aleks.prevFocus,this.__addWindowListeners(),!aleks.inPopup.has(this.__UUID)&&this.__modal&&(this.__UUID=Math.random().toString(36).substring(2,12),aleks.inPopup.add(this.__UUID)),this.__isStackable&&aleks.core.ui.getDialogManager().updateDialog(this),this.__resizeDialog(),this.__setFocusableElements(),this.__isCentered&&this.centerDialog(),!this.preventFocus&&(this.__focusedElement=this,elementToFocus=this.__focusDiv)):(this.__removeWindowListeners(),aleks.inPopup.has(this.__UUID)&&aleks.inPopup.delete(this.__UUID),elementToFocus=this.__elementToFocusOnClose),dom.Timer.schedule(new dom.Task(function(){var _elementToFocus2;null===(_elementToFocus2=elementToFocus)||void 0===_elementToFocus2||_elementToFocus2.focus()},this),1),this.__isVisible=visibility},aleks.core.ui.Tooltip=function(options){this._super({closeButton:!1,primaryButton:!1,secondaryButton:!1,triggerElement:options.target,shouldFocusContainer:!1,...options,modal:!1}),this.tipSize=16,this.rightOffset=this.rightOffset||0,this.__options=options,this.__tipLocation=options.tipLocation||"centered",this.__listenerType=options.listenerType||"click",this.__target=options.target,this.__describesTarget=options.describesTarget,this.__hasBottomButtons=this.__addPrimaryButton||this.__addSecondaryButton,options.title?this.__setTitle(options.title):!(this instanceof aleks.ui.Popover)&&this.__setTitle(null),this.__position=options.position,this.__orientation=options.orientation||(options.responsive?"top":"left"),this.__customParent=null,options.customParent?this.__customParent=options.customParent:options.dynamic&&(this.__customParent=aleks.core.ui.Element.fromElement(document.body)),this.__isTipPositioned=!1,this.__isVisible=!1,this.__isVisibleDelay=options.isVisibleDelay||!1,this.__containingDiv=null,this.__UUID=null,this.__contentParamCache=null,this.clickCallback=e=>{"toggle"!==this.__listenerType&&!this.getDOMElement().contains(e.target)&&!this.__target.getDOMElement().contains(e.target)&&(this.__target.toggleable&&this.__target.toggleState(),this.setVisibility(!1))},this.targetKeydownHandler=e=>{const isEscape="Escape"===e.key,isTab="Tab"===e.key;(isEscape||isTab)&&"disabled"!==this.__listenerType&&(this.__target.toggleable&&"toggle"===this.__listenerType&&this.__target.toggleState(!1),this.setVisibility(!1))},this.containerKeydownHandler=e=>{this.keydownCallback(e),e.target===this.__focusDiv.getDOMElement()&&e.keyCode===dom.KeyCode.TAB&&e.shiftKey&&"disabled"!==this.__listenerType&&(this.__target.toggleable&&"toggle"===this.__listenerType&&this.__target.toggleState(!1),this.setVisibility(!1))},this.__targetListenerRef=null,this.__pruneContainers(),this.__buildTip();const tooltipRole=this.__describesTarget?"tooltip":"alert",tooltipLabel=this.__describesTarget?aleks.Intl.getTranslation("ui_control_tooltip_aria_label"):"";this.setAriaStyle({role:this.__hasButtons?"dialog":tooltipRole,label:tooltipLabel}),options.hiddenAlert&&this.setAriaStyle({role:"",label:"",describeby:""}),options.dynamic?window.addEventListener("resize",()=>{this.isVisible()&&this.setVisibility(!1)}):options.responsive&&window.addEventListener("resize",()=>{this.__setDefaultTipStyle(),this.__updatePosition()}),document.fonts.ready.then(()=>{this.__buildContainer(),options.initialVisibility&&this.setVisibility(options.initialVisibility)})},aleks.extend(aleks.core.ui.Tooltip,aleks.core.ui.Dialog),aleks.core.ui.Tooltip.prototype.__pruneContainers=function(){!this.__title&&(this.__headerContainer.removeChild(this.__titleContainer),this.setAriaStyle({labelby:""}))},aleks.core.ui.Tooltip.prototype.__build=function(){this._super(),!this.__shouldFocusContainer&&this.__focusDiv.setTabbable(!1)},aleks.core.ui.Tooltip.prototype.__setTitle=function(title){this.__title=title},aleks.core.ui.Tooltip.prototype.__buildContent=function(content){let level=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;this._super(content,level),this.__component.setStyle({maxHeight:"calc(min(400px, 100vh))",overflow:"auto"})},aleks.core.ui.Tooltip.prototype.__isInParentBox=function(){const parent=this.__customParent||this.__containingDiv,containerRects=this.getBoundingClientRect(parent),parentContainerRects=parent.getBoundingClientRect();return 0<containerRects.getLeft()&&containerRects.getRight()<=parentContainerRects.getWidth()&&0<containerRects.getTop()&&containerRects.getBottom()<=parentContainerRects.getHeight()},aleks.core.ui.Tooltip.prototype.getTarget=function(){return this.__target},aleks.core.ui.Tooltip.prototype.setTarget=function(target){this.__target=target},aleks.core.ui.Tooltip.prototype.setTargetState=function(state,value){this.__target&&"function"==typeof this.__target.setState&&this.__target.setState(state,value)},aleks.core.ui.Tooltip.prototype.reInit=function(_ref4){let{target,content,position,orientation,tipLocation,keepInParentBox=!1,makeVisible=!0}=_ref4;if(this.__customParent){content&&this.__contentParamCache!==content&&(this.__contentContainer.removeAllChildren(),this.__buildContent(content),this.__contentParamCache=content);const isVisible=makeVisible&&!(target===this.__target&&this.__isVisible);if(this.__target=target||this.__target,this.__position=position||this.__position,this.__orientation=orientation||this.__orientation,this.__tipLocation=tipLocation||this.__tipLocation,this.setVisibility(isVisible),keepInParentBox&&isVisible&&!this.__isInParentBox()){let newLocationFound=!1,currentOrientation=this.__orientation;const orientationsToTry=["left","right","bottom","top"];for(let orientation of orientationsToTry)if(this.__orientation=orientation,this.setVisibility(!0),this.__isInParentBox()){newLocationFound=!0;break}!newLocationFound&&(this.__orientation=currentOrientation,this.setVisibility(!0))}}},aleks.core.ui.Tooltip.prototype.__setDefaultTipStyle=function(){const blackOptions={},whiteOptions={};"left"===this.__orientation?(blackOptions.left="-1px",whiteOptions.left="1px"):"top"===this.__orientation?(blackOptions.top="-1px",whiteOptions.top="1px"):"right"===this.__orientation?(blackOptions.left="1px",whiteOptions.left="-1px"):"bottom"===this.__orientation&&(blackOptions.top="1px",whiteOptions.top="-1px"),this.__blackTip.setStyle(blackOptions),this.__whiteTip.setStyle(whiteOptions),this.__isTipPositioned=!1},aleks.core.ui.Tooltip.prototype.__buildTip=function(){this.__tipPaddingContainer=new aleks.core.ui.Element("div"),this.__tipContainer=new aleks.core.ui.Element("div"),this.__blackTip=new aleks.core.ui.Element("div"),this.__whiteTip=new aleks.core.ui.Element("div"),this.__tipContainer.appendChild(this.__blackTip),this.__tipContainer.appendChild(this.__whiteTip),this.__focusDiv.appendChild(this.__tipPaddingContainer),this.__focusDiv.appendChild(this.__tipContainer)},aleks.core.ui.Tooltip.prototype.__calculateTipPosition=function(position){let orientation=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.__orientation;const options={};switch(orientation){case"top":options.top=-this.tipSize,"centered"===position?options.left=this.__width/2-this.tipSize/2:"right"===position?options.right=2*this.tipSize+this.rightOffset:"left"==position&&(options.left=this.tipSize);break;case"bottom":options.bottom=0,"centered"===position?options.left=this.__width/2-this.tipSize:"right"===position?options.right=2*this.tipSize:"left"==position&&(options.left=this.tipSize);break;case"left":options.left=-this.tipSize,"centered"===position?options.top=this.__height/2-this.tipSize/2:"bottom"===position?options.bottom=2*this.tipSize:options.top=this.tipSize;break;case"right":if(options.right=0,"centered"===position)options.top=this.__height/2-this.tipSize/2;else if("top"===position){const multiplier=this.__options.closeButton?2.5:1;options.top=this.tipSize*multiplier}else options.bottom=2*this.tipSize}return options},aleks.core.ui.Tooltip.prototype.__calculateTipOffsetFromTarget=function(){let tipLocation=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.__tipLocation,tipOffset=0;const targetLocation=this.__target.getBoundingClientRect();switch(tipLocation){case"centered":{tipOffset=targetLocation.getWidth()/2;break}case"left":{const{left}=this.__calculateTipPosition("left");tipOffset=left;break}case"right":{const{right}=this.__calculateTipPosition("right");tipOffset=targetLocation.getWidth()-right;break}}return tipOffset},aleks.core.ui.Tooltip.prototype.__positionTip=function(position){const tipPositionCalculationsJson=this.__calculateTipPosition(position,this.__orientation);Object.keys(tipPositionCalculationsJson).forEach(key=>{tipPositionCalculationsJson[key]+="px"});const options={position:"absolute",left:"",top:"",right:"",bottom:"",...tipPositionCalculationsJson},padOptions={position:"absolute",width:"",height:""};"bottom"===this.__orientation?(padOptions.bottom="-20px",padOptions.height="20px",padOptions.width="100%"):"left"===this.__orientation?(padOptions.left="-20px",padOptions.height="100%",padOptions.width="20px",padOptions.top="0px"):"right"===this.__orientation?(padOptions.right="-20px",padOptions.height="100%",padOptions.width="20px",padOptions.top="0px"):"top"===this.__orientation&&(padOptions.top="20px",padOptions.height="20px",padOptions.width="100%"),padOptions[this.__orientation]="-20px",this.__tipPaddingContainer.setStyle(padOptions),this.__tipContainer.setStyle(options),this.__isTipPositioned=!0},aleks.core.ui.Tooltip.prototype.__updatePosition=function(newPosition){const position=newPosition||this.__getPosition();let offset=this.__getOrientationOffset(position);if(this.__customParent){const targetPositionInParent=this.__target.getBoundingClientRect(this.__customParent);offset.top+=targetPositionInParent.getTop(),offset.left+=targetPositionInParent.getLeft()}this.setStyle({top:offset.top+"px",left:offset.left+"px"}),(!this.__isTipPositioned||newPosition)&&this.__positionTip(position)},aleks.core.ui.Tooltip.prototype.__resetPosition=function(){this.setStyle({top:"0px",left:"0px"})},aleks.core.ui.Tooltip.prototype.__getPosition=function(){var _this$__position,_POSITIONING_MAP$posi,_bestPosition;const position=null!==(_this$__position=this.__position)&&void 0!==_this$__position?_this$__position:"left",targetLocation=this.__target.getBoundingClientRect(),pageRight=document.body.clientWidth,pageLeft=0,BUFFER_PX=20,SMALL_SCREEN_POSITIONING="centered",offscreenPXMap={},POSITIONING_MAP={left:["left","centered","right"],right:["right","centered","left"],centered:["centered","right","left"],top:["top","bottom"],bottom:["top","bottom"]},CHECKS_MAP={left:()=>{const{left}=this.__getOrientationOffset("left"),leftEdgeX=targetLocation.getLeft()+left,rightEdgeX=leftEdgeX+this.__width+this.rightOffset,isRightOk=pageRight>rightEdgeX,isLeftOk=pageLeft<=leftEdgeX;return offscreenPXMap.left=Math.abs(leftEdgeX-pageLeft)+Math.abs(rightEdgeX-pageRight),isRightOk&&isLeftOk},centered:()=>{const{left}=this.__getOrientationOffset("centered"),leftEdgeX=targetLocation.getLeft()+left,rightEdgeX=leftEdgeX+this.__width+this.rightOffset,isRightOk=pageRight>rightEdgeX+BUFFER_PX,isLeftOk=pageLeft<=leftEdgeX-BUFFER_PX;return offscreenPXMap.centered=Math.abs(leftEdgeX-pageLeft)+Math.abs(rightEdgeX-pageRight),isRightOk&&isLeftOk},right:()=>{const{left}=this.__getOrientationOffset("right"),leftEdgeX=targetLocation.getLeft()+left,rightEdgeX=leftEdgeX+this.__width+this.rightOffset,isRightOk=pageRight>rightEdgeX,isLeftOk=pageLeft<=leftEdgeX;return offscreenPXMap.right=Math.abs(leftEdgeX-pageLeft)+Math.abs(rightEdgeX-pageRight),isRightOk&&isLeftOk},top:()=>!0,bottom:()=>!0},positioningOptions=null!==(_POSITIONING_MAP$posi=POSITIONING_MAP[position])&&void 0!==_POSITIONING_MAP$posi?_POSITIONING_MAP$posi:[];let bestPosition=positioningOptions.find(item=>CHECKS_MAP[item]());const offscreenPXMapKeys=Object.keys(offscreenPXMap);return!bestPosition&&0<offscreenPXMapKeys.length&&(bestPosition=offscreenPXMapKeys.reduce((key,v)=>offscreenPXMap[v]<offscreenPXMap[key]?v:key)),null!==(_bestPosition=bestPosition)&&void 0!==_bestPosition?_bestPosition:SMALL_SCREEN_POSITIONING},aleks.core.ui.Tooltip.prototype.__resetTipContainer=function(){this.__isTipPositioned=!1,this.__setDefaultTipStyle()},aleks.core.ui.Tooltip.prototype.__getOrientationOffset=function(position){const targetLocation=this.__target.getBoundingClientRect(),elementSizes={targetWidth:targetLocation.getWidth(),targetHeight:targetLocation.getHeight()},elementBorder=this.__borderTheme?2:1,targetMargin={left:0,top:0};if(!this.__customParent){const computedStyles=window.getComputedStyle(this.__target.getDOMElement());targetMargin.left=parseInt(computedStyles.getPropertyValue("margin-left"),10),targetMargin.top=parseInt(computedStyles.getPropertyValue("margin-top"),10)}this.__getDimensions();const positionOffset={};if("left"===this.__orientation)positionOffset.top=elementSizes.targetHeight/2+targetMargin.top-1.5*this.tipSize,positionOffset.left=elementSizes.targetWidth+targetMargin.left+this.tipSize,"centered"===position?positionOffset.top=elementSizes.targetHeight/2-this.__height/2+targetMargin.top:"bottom"==position&&(positionOffset.top=-this.__height+elementSizes.targetHeight/2+targetMargin.top+1.5*this.tipSize);else if("right"===this.__orientation){if(positionOffset.top=-this.__height+elementSizes.targetHeight/2+targetMargin.top+1.5*this.tipSize,positionOffset.left=-this.__width+targetMargin.left-this.tipSize,"centered"===position)positionOffset.top=elementSizes.targetHeight/2-this.__height/2+targetMargin.top;else if("top"===position){const multiplier=this.__options.closeButton?3:1.5;positionOffset.top=elementSizes.targetHeight/2+targetMargin.top-this.tipSize*multiplier}}else if("top"===this.__orientation)switch(positionOffset.top=elementSizes.targetHeight+targetMargin.top+this.tipSize,this.__tipLocation){case"centered":{"left"===position?positionOffset.left=elementSizes.targetWidth/2+targetMargin.left-1.5*this.tipSize-elementBorder:"centered"===position?positionOffset.left=-this.__width/2+elementSizes.targetWidth/2+targetMargin.left-elementBorder:"right"==position&&(positionOffset.left=-this.__width+elementSizes.targetWidth/2+targetMargin.left+this.rightOffset+1.5*this.tipSize+elementBorder);break}case"left":{const tipOffsetFromTarget=this.__calculateTipOffsetFromTarget(),{left,right}=this.__calculateTipPosition(position);"left"===position?positionOffset.left=0+targetMargin.left-elementBorder:"centered"===position?positionOffset.left=tipOffsetFromTarget-left+targetMargin.left-elementBorder:"right"==position&&(positionOffset.left=tipOffsetFromTarget-(this.__width-right)+targetMargin.left+elementBorder);break}case"right":{const tipOffsetFromTargetLeft=this.__calculateTipOffsetFromTarget(),{left,right}=this.__calculateTipPosition(position);"left"===position?positionOffset.left=tipOffsetFromTargetLeft-left+targetMargin.left-elementBorder:"centered"===position?positionOffset.left=tipOffsetFromTargetLeft-left+targetMargin.left-elementBorder:"right"==position&&(positionOffset.left=tipOffsetFromTargetLeft-(this.__width-right)+targetMargin.left-elementBorder);break}}else if("bottom"===this.__orientation)switch(positionOffset.top=-this.__height+targetMargin.top-this.tipSize,this.__tipLocation){case"centered":{"left"===position?positionOffset.left=elementSizes.targetWidth/2+targetMargin.left-1.5*this.tipSize-elementBorder:"centered"===position?positionOffset.left=-this.__width/2+elementSizes.targetWidth/2+targetMargin.left+this.tipSize/2-elementBorder:"right"==position&&(positionOffset.left=-this.__width+elementSizes.targetWidth/2+targetMargin.left+1.5*this.tipSize+elementBorder);break}case"left":{const tipOffsetFromTarget=this.__calculateTipOffsetFromTarget(),{left,right}=this.__calculateTipPosition(position);"left"===position?positionOffset.left=0+targetMargin.left-elementBorder:"centered"===position?positionOffset.left=tipOffsetFromTarget-left+targetMargin.left-elementBorder:"right"==position&&(positionOffset.left=tipOffsetFromTarget-(this.__width-right)+targetMargin.left+elementBorder);break}case"right":{const tipOffsetFromTarget=this.__calculateTipOffsetFromTarget(),{left,right}=this.__calculateTipPosition(position);"left"===position?positionOffset.left=tipOffsetFromTarget-left+targetMargin.left-elementBorder:"centered"===position?positionOffset.left=tipOffsetFromTarget-left+targetMargin.left-elementBorder:"right"==position&&(positionOffset.left=tipOffsetFromTarget-(this.__width-right)+targetMargin.left-elementBorder);break}}return positionOffset},aleks.core.ui.Tooltip.prototype.__addListeners=function(){if("toggle"!==this.__listenerType&&"disabled"!==this.__listenerType){if(!this.__listenersAreAttached){if("click"===this.__listenerType){const eventType=isTablet?"touchend":"click";window.addEventListener(eventType,this.clickCallback,!0)}this.__targetListenerRef=this.__target.addEventListener("keydown",this.targetKeydownHandler,!0),this.__containerListenerRef=this.__focusDiv.addEventListener("keydown",this.containerKeydownHandler,!1)}this.__listenersAreAttached=!0}},aleks.core.ui.Tooltip.prototype.__removeListeners=function(){var _this$__target2;if("toggle"!==this.__listenerType&&"disabled"!==this.__listenerType){if("click"===this.__listenerType){const eventType=isTablet?"touchend":"click";window.removeEventListener(eventType,this.clickCallback,!0)}null===(_this$__target2=this.__target)||void 0===_this$__target2||_this$__target2.removeEventListener(this.__targetListenerRef),this.__focusDiv.removeEventListener(this.__containerListenerRef),this.__listenersAreAttached=!1,this.__targetListenerRef=null}},aleks.core.ui.Tooltip.prototype.__getDimensions=function(){const clientRect=this.getBoundingClientRect();this.__height=clientRect.getHeight(),this.__width=clientRect.getWidth()},aleks.core.ui.Tooltip.prototype.getContainer=function(){return this.__containingDiv},aleks.core.ui.Tooltip.prototype.__buildContainer=function(){var _this$__target3;this.__containingDiv=new aleks.core.ui.Element("div"),this.__containingDiv.setStyle({position:"relative",display:"inline-block"});const targetParent=null===(_this$__target3=this.__target)||void 0===_this$__target3?void 0:_this$__target3.getParent();targetParent&&!this.__customParent&&(targetParent.replaceChild(this.__containingDiv,this.__target),this.__containingDiv.appendChild(this.__target))},aleks.core.ui.Tooltip.prototype.appendToCustomParent=function(_ref5){let{customParent}=_ref5;this.__customParent=customParent,this.__customParent.insertFirstChild(this),this.__updatePosition()},aleks.core.ui.Tooltip.prototype.__appendToContainer=function(){this.__customParent?(this.__appendToBody(),this.__customParent.insertFirstChild(this)):(!this.__containingDiv&&this.__buildContainer(),this.__containingDiv.appendChild(this)),this.__movedToBody=!0},aleks.core.ui.Tooltip.prototype.__setFocusableElements=function(){const[first,...rest]=this.__focusDiv.getFocusableElements();this.__firstFocusableElement=first||null,this.__lastFocusableElement=rest.length?rest[rest.length-1]:this.__firstFocusableElement},aleks.core.ui.Tooltip.prototype.setVisibility=function(isVisible){this.__isVisible=isVisible,!this.__movedToBody&&(this.__appendToContainer(),this.__isVisibleDelay&&window.getComputedStyle(this.getDOMElement()).getPropertyValue("transition")),this.setStyle({transitionDelay:this.__isVisibleDelay&&isVisible?"0.5s":"0s",transitionProperty:"visibility",visibility:isVisible?"visible":"hidden",position:isVisible?"absolute":"fixed"}),this.setAriaStyle({hidden:!isVisible}),this.__describesTarget&&(this.__target.setAriaStyle({describeby:""}),isVisible&&this.__target.setAriaStyle({describeby:this.getContentId()}));let elementToFocus=null;if(isVisible)this.__getDimensions(),this.__hasButtons&&!aleks.inPopup.has(this.__UUID)&&(this.__UUID=Math.random().toString(36).substring(2,12),aleks.inPopup.add(this.__UUID)),this.__addListeners(),this.__setDefaultTipStyle(),this.__updatePosition(),elementToFocus=this.__firstFocusableElement;else if(this.__removeListeners(),this.__resetPosition(),this.__resetTipContainer(),this.__hasButtons&&aleks.inPopup.has(this.__UUID)){var _this$__linkedCompone;aleks.inPopup.delete(this.__UUID),(document.activeElement===document.body||this.getDOMElement().contains(document.activeElement)||document.activeElement===(null===(_this$__linkedCompone=this.__linkedComponent)||void 0===_this$__linkedCompone?void 0:_this$__linkedCompone.getDOMElement()))&&(elementToFocus=this.__triggerElement)}dom.Timer.schedule(new dom.Task(function(){elementToFocus&&(elementToFocus.focus(),aleks.prevFocus=elementToFocus)},this),100),this.setState("visible",this.__isVisible)},aleks.core.ui.Tooltip.prototype.reposition=function(){this.__resetTipContainer(),this.__getDimensions(),this.__updatePosition()},aleks.core.ui.Tooltip.prototype.getOrientation=function(){return this.__orientation},aleks.core.ui.Tooltip.prototype.getTipLocation=function(){return this.__tipLocation},aleks.core.ui.Tooltip.prototype.keydownHandler=function(event){let context=1<arguments.length&&arguments[1]!==void 0?arguments[1]:document;const isEscape="Escape"===event.key,isTab="Tab"===event.key;if(!isEscape&&!isTab)return;this.__focusedElement=null,this.__setFocusableElements();const isShiftTabOnFirstFocusableElement=event.shiftKey&&this.isFirstFocusableElementActive(context),isTabOnLastFocusableElement=!event.shiftKey&&this.isLastFocusableElementActive(context);isEscape||isShiftTabOnFirstFocusableElement?(this.__focusedElement=this.__target,this.setVisibility(!1)):isTabOnLastFocusableElement&&this.setVisibility(!1),this.__focusedElement&&(event.preventDefault(),this.__focusedElement.focus())},aleks.core.ui.Tooltip.prototype.setId=function(){this._super(),this.setAriaStyle({labelby:"",describeby:""})},aleks.core.ui.TabPanel=function(params){if(this._super("div"),this.setStyle({position:"relative"}),this._tabList=params.tabList,this._id=params.id,this._styles=params.panelStyles,this._panels=params.components,this._id)this.__addTablist(params.titleComponent),this.__addPanels(params.components);else throw new Error(`aleks.core.ui.TabPanel invalid id: ${this._id}`)},aleks.extend(aleks.core.ui.TabPanel,ui.Element),aleks.core.ui.TabPanel.prototype.__addTablist=function(titleComponent){titleComponent&&(this.appendChild(titleComponent),this._tabList.setStyle({display:"inline-block"})),this.appendChild(this._tabList)},aleks.core.ui.TabPanel.prototype.__addPanels=function(componentList){const panelList=[],buttonList=this._tabList.getButtonList(),selectedIndex=this._tabList.getSelectedIndex();componentList.forEach((component,i)=>{const panelDiv=new ui.Element("div");panelDiv.appendChild(componentList[i]),panelDiv.setTabbable(!0),panelDiv.setAriaStyle({role:"tabpanel",labelby:`tab_panel_${this._id}_component_${i}`}),panelDiv.setStyle({display:selectedIndex===i?"":"none",marginTop:"30px",outline:"none",...this._styles}),this.appendChild(panelDiv),panelList.push(panelDiv),buttonList[i].setId(`tab_panel_${this._id}_component_${i}`)}),this._tabList.addEventListener("change",event=>{panelList.forEach((panel,i)=>{panel.setStyle({display:event.selectedId===i?"":"none"})})})},aleks.core.ui.TabPanel.prototype.activatePanel=function(tabIndex){const buttonList=this._tabList.getButtonList();return this.getSelectedIndex()!=tabIndex&&this._tabList.setSelected(buttonList[tabIndex],!0),this._panels[tabIndex]},aleks.core.ui.TabPanel.prototype.getSelectedIndex=function(){return this._tabList.getSelectedIndex()},aleks.core.debounce=function(func){var _this=this;let timer,timeout=1<arguments.length&&arguments[1]!==void 0?arguments[1]:100;return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];clearTimeout(timer),timer=setTimeout(()=>func.apply(_this,args),timeout)}}}(),aleks.core.ui.getAWSFileUrl=function(filePath,_ref6){let{successCallback,failCallback,oldUrl}=_ref6;const expirationData=null===oldUrl||void 0===oldUrl?void 0:oldUrl.match(/Expires=(\d+)/),expireDate=expirationData?new Date(parseInt(expirationData[1],10)):0;if(120<expireDate-Math.floor(Date.now()/1e3))successCallback(oldUrl);else{const args=`_form_=http_request&page=getAWSFileUrl&filePath=${encodeURIComponent(filePath)}`;aleks.core.ui.__xhrPost(args,successCallback,failCallback)}},aleks.core.ui.uploadFile=function(_ref7){let{file={},page="fileAPIUpload",fileTags={},failCallback,successCallback}=_ref7;const formData=new FormData;formData.append("page",page),formData.append("userfile",file),formData.append("fileTags",JSON.stringify(fileTags)),aleks.core.ui.__xhrPost(formData,successCallback,failCallback)},aleks.core.ui.__xhrPost=function(data){let successCallback=1<arguments.length&&arguments[1]!==void 0?arguments[1]:result=>console.log("xhrPost success: ",result),failCallback=2<arguments.length&&arguments[2]!==void 0?arguments[2]:error=>console.log("xhrPost failure: ",error);const xhr=new XMLHttpRequest;xhr.onreadystatechange=()=>{if(xhr.readyState===XMLHttpRequest.DONE)if(200===xhr.status){let result;result=global.useJsDataEncryption?global_decrypt_string_json(xhr.responseText):JSON.parse(xhr.responseText),successCallback(result)}else failCallback(result)},xhr.open("POST",global.urlRpc,!0),xhr.send(data)},aleks.core.ui.updateImgUrls=function(component){const imgPromises=[],imageTags=component.getDOMElement().getElementsByTagName("img");return Array.from(imageTags).forEach(imageElement=>{const filePath=imageElement.getAttribute("data-file-path");if(filePath){const replaceImgUrl=new Promise((resolve,reject)=>{const oldUrl=imageElement.src;imageElement.src="/aleks/gif/forum/blue_loader_icon.gif",aleks.core.ui.getAWSFileUrl(filePath,{successCallback:url=>{imageElement.src=url,resolve()},failCallback:()=>{reject()},oldUrl})});imgPromises.push(replaceImgUrl)}}),Promise.all(imgPromises)},aleks.core.ui.addEditors=function(component,editorsData){const editorContainers=component.getDOMElement().getElementsByClassName("richTextEditor");return new Promise((resolve,reject)=>{editorContainers.length?aleks.getFileLoader().loadFiles([new aleks.ClientFile({name:"tool_manager.js",location:"editor",module:"zedg"}),new aleks.ClientFile({name:"authoring_view.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_ribbon_utils.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_ribbon.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_manager_abstract.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_manager_richTextArea.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_figed.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_ansed.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_moleced.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"authoring_charted.js",location:"editor_client",module:"zauthoring"}),new aleks.ClientFile({name:"aleksToolApi.js",location:"editor",module:"zal"})]).then(()=>{const toolPromises=[];Array.from(editorContainers).forEach(editorContainer=>{const editorId=editorContainer.id.split(ait.authoring.RichTextArea.EDITOR_CONTAINER_PREFIX)[1],editorData=editorsData[editorId];if(editorData){const{editorType,currEditorName,editor:editorParams}=editorData;let specificParams={};"function"==typeof ait.authoring[editorType].getSpecificParamsForInsert&&(specificParams=ait.authoring[editorType].getSpecificParamsForInsert());const constructorParams={...editorParams,...specificParams,mode:"display",isFrozen:!0,_isFrozen:!0},toolPromise=aleks.toolApi.createTool(editorType,constructorParams,currEditorName,"display",currEditorName);toolPromises.push(toolPromise)}}),Promise.all(toolPromises).then(()=>resolve()).catch(()=>reject())}):resolve()})};